/*! For license information please see main.e7cc6ded.js.LICENSE.txt */
(()=>{var t={43(t,e,n){"use strict";t.exports=n(202)},153(t,e,n){"use strict";var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)o.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:s,_owner:a.current}}e.Fragment=s,e.jsx=c,e.jsxs=c},173(t,e,n){t.exports=n(497)()},202(t,e){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function v(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var _=b.prototype=new v;_.constructor=b,g(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,i){var r,s={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)x.call(e,r)&&!E.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:o,ref:a,props:s,_owner:S.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var C=/\/+/g;function I(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function A(t,e,r,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=t),t=""===s?"."+I(l,0):s,w(o)?(r="",null!=t&&(r=t.replace(C,"$&/")+"/"),A(o,e,r,"",function(t){return t})):null!=o&&(T(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",w(t))for(var c=0;c<t.length;c++){var u=s+I(a=t[c],c);l+=A(a,e,r,u,o)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=A(a=a.value,e,r,u=s+I(a,c++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var i=[],r=0;return A(t,i,"","",function(t){return e.call(n,t,r++)}),i}function N(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var D={current:null},O={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};e.Children={map:P,forEach:function(t,e,n){P(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return P(t,function(){e++}),e},toArray:function(t){return P(t,function(t){return t})||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=r,e.Profiler=o,e.PureComponent=b,e.StrictMode=s,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),s=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=S.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)x.call(e,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:o,props:r,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:N}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=O.transition;O.transition={};try{t()}finally{O.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return D.current.useCallback(t,e)},e.useContext=function(t){return D.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return D.current.useDeferredValue(t)},e.useEffect=function(t,e){return D.current.useEffect(t,e)},e.useId=function(){return D.current.useId()},e.useImperativeHandle=function(t,e,n){return D.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return D.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return D.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return D.current.useMemo(t,e)},e.useReducer=function(t,e,n){return D.current.useReducer(t,e,n)},e.useRef=function(t){return D.current.useRef(t)},e.useState=function(t){return D.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return D.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return D.current.useTransition()},e.version="18.2.0"},218(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234(t,e){"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=t[a],c=a+1,u=t[c];if(0>s(l,n))c<r&&0>s(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function w(t){if(m=!1,_(t),!g)if(null!==i(c))g=!0,O(x);else{var e=i(u);null!==e&&R(w,e.startTime-t)}}function x(t,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var s=f;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&R(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,k=null,T=-1,C=5,I=-1;function A(){return!(e.unstable_now()-I<C)}function P(){if(null!==k){var t=e.unstable_now();I=t;var n=!0;try{n=k(!0,t)}finally{n?S():(E=!1,k=null)}}else E=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=P,S=function(){D.postMessage(null)}}else S=function(){y(P,0)};function O(t){k=t,E||(E=!0,S())}function R(t,n){T=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,O(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,s){var o=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(t.sortIndex=s,n(u,t),null===i(c)&&t===i(u)&&(m?(v(T),T=-1):m=!0,R(w,s-o))):(t.sortIndex=a,n(c,t),g||p||(g=!0,O(x))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},391(t,e,n){"use strict";var i=n(950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},440(t){"use strict";var e=function(){};t.exports=e},497(t,e,n){"use strict";var i=n(218);function r(){}function s(){}s.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,s,o){if(o!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},579(t,e,n){"use strict";t.exports=n(153)},600(t,e){var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var s=typeof n;if("string"===s||"number"===s)t.push(n);else if(Array.isArray(n)){if(n.length){var o=r.apply(null,n);o&&t.push(o)}}else if("object"===s){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var a in n)i.call(n,a)&&n[a]&&t.push(a)}}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},730(t,e,n){"use strict";var i=n(43),r=n(853);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,i,r,s,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){m[t]=new g(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){m[t]=new g(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){m[t]=new g(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){m[t]=new g(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){m[t]=new g(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)});var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var L,F=Object.assign;function j(t){if(void 0===L)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);L=e&&e[1]||""}return"\n"+L+t}var V=!1;function z(t,e){if(!t||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?j(t):""}function U(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=z(t.type,!1);case 11:return t=z(t.type.render,!1);case 1:return t=z(t.type,!0);default:return""}}function B(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case x:return"Portal";case k:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case I:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case N:return null!==(e=t.displayName||null)?e:B(t.type)||"Memo";case D:e=t._payload,t=t._init;try{return B(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function K(t){t._valueTracker||(t._valueTracker=function(t){var e=q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function G(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=q(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function X(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){$(t,e);var n=W(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function st(t,e){var n=W(e.value),i=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return ut(t,e)})}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(ft).forEach(function(t){pt.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]})});var yt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,St=null,Et=null;function kt(t){if(t=br(t)){if("function"!==typeof xt)throw Error(s(280));var e=t.stateNode;e&&(e=wr(e),xt(t.stateNode,t.type,e))}}function Tt(t){St?Et?Et.push(t):Et=[t]:St=t}function Ct(){if(St){var t=St,e=Et;if(Et=St=null,kt(t),e)for(t=0;t<e.length;t++)kt(e[t])}}function It(t,e){return t(e)}function At(){}var Pt=!1;function Nt(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return It(t,e,n)}finally{Pt=!1,(null!==St||null!==Et)&&(At(),Ct())}}function Dt(t,e){var n=t.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Ot=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ut){Ot=!1}function Mt(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Lt=!1,Ft=null,jt=!1,Vt=null,zt={onError:function(t){Lt=!0,Ft=t}};function Ut(t,e,n,i,r,s,o,a,l){Lt=!1,Ft=null,Mt.apply(zt,arguments)}function Bt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(Bt(t)!==t)throw Error(s(188))}function qt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Bt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Wt(r),t;if(o===i)return Wt(r),e;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t))?Kt(t):null}function Kt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Kt(t);if(null!==e)return e;t=t.sibling}return null}var Gt=r.unstable_scheduleCallback,Qt=r.unstable_cancelCallback,Yt=r.unstable_shouldYield,Xt=r.unstable_requestPaint,$t=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,Zt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=he(a):0!==(s&=o)&&(i=he(s))}else 0!==(o=n&~r)?i=he(o):0!==s&&(i=he(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-oe(e)),i|=t[n],e&=~r;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oe(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,xe,Se,Ee,ke,Te=!1,Ce=[],Ie=null,Ae=null,Pe=null,Ne=new Map,De=new Map,Oe=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Me(t,e){switch(t){case"focusin":case"focusout":Ie=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":Ne.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":De.delete(e.pointerId)}}function Le(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=br(e))&&xe(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Fe(t){var e=vr(t.target);if(null!==e){var n=Bt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void ke(t.priority,function(){Se(n)})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function je(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=br(n))&&xe(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);_t=i,n.target.dispatchEvent(i),_t=null,e.shift()}return!0}function Ve(t,e,n){je(t)&&n.delete(e)}function ze(){Te=!1,null!==Ie&&je(Ie)&&(Ie=null),null!==Ae&&je(Ae)&&(Ae=null),null!==Pe&&je(Pe)&&(Pe=null),Ne.forEach(Ve),De.forEach(Ve)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ze)))}function Be(t){function e(e){return Ue(e,t)}if(0<Ce.length){Ue(Ce[0],t);for(var n=1;n<Ce.length;n++){var i=Ce[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Ie&&Ue(Ie,t),null!==Ae&&Ue(Ae,t),null!==Pe&&Ue(Pe,t),Ne.forEach(e),De.forEach(e),n=0;n<Oe.length;n++)(i=Oe[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Oe.length&&null===(n=Oe[0]).blockedOn;)Fe(n),null===n.blockedOn&&Oe.shift()}var He=_.ReactCurrentBatchConfig,We=!0;function qe(t,e,n,i){var r=be,s=He.transition;He.transition=null;try{be=1,Ge(t,e,n,i)}finally{be=r,He.transition=s}}function Ke(t,e,n,i){var r=be,s=He.transition;He.transition=null;try{be=4,Ge(t,e,n,i)}finally{be=r,He.transition=s}}function Ge(t,e,n,i){if(We){var r=Ye(t,e,n,i);if(null===r)Wi(t,e,i,Qe,n),Me(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Ie=Le(Ie,t,e,n,i,r),!0;case"dragenter":return Ae=Le(Ae,t,e,n,i,r),!0;case"mouseover":return Pe=Le(Pe,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ne.set(s,Le(Ne.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,De.set(s,Le(De.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Me(t,i),4&e&&-1<Re.indexOf(t)){for(;null!==r;){var s=br(r);if(null!==s&&we(s),null===(s=Ye(t,e,n,i))&&Wi(t,e,i,Qe,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(t,e,i,null,n)}}var Qe=null;function Ye(t,e,n,i){if(Qe=null,null!==(t=vr(t=wt(i))))if(null===(e=Bt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qe=t,null}function Xe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var $e=null,Je=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Je,i=n.length,r="value"in $e?$e.value:$e.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===r[s-e];e++);return Ze=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,i,r,s){for(var o in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=sn(vn),_n=sn(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function kn(){return En}var Tn=F({},hn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Cn=sn(Tn),In=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Pn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Nn),On=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,Fn=u&&(!Rn||Mn&&8<Mn&&11>=Mn),jn=String.fromCharCode(32),Vn=!1;function zn(t,e){switch(t){case"keyup":return-1!==On.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hn[t.type]:"textarea"===e}function qn(t,e,n,i){Tt(i),0<(e=Ki(e,"onChange")).length&&(n=new un("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Kn=null,Gn=null;function Qn(t){ji(t,0)}function Yn(t){if(G(_r(t)))return t}function Xn(t,e){if("change"===t)return e}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Zn="function"===typeof ti.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ei(){Kn&&(Kn.detachEvent("onpropertychange",ni),Gn=Kn=null)}function ni(t){if("value"===t.propertyName&&Yn(Gn)){var e=[];qn(e,Gn,t,wt(t)),Nt(Qn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Gn=n,(Kn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Gn)}function si(t,e){if("click"===t)return Yn(e)}function oi(t,e){if("input"===t||"change"===t)return Yn(e)}var ai="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(ai(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function hi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function di(){for(var t=window,e=Q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Q((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pi(t){var e=di(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,yi=null,vi=null,bi=!1;function _i(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Q(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Ki(yi,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xi={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Si={},Ei={};function ki(t){if(Si[t])return Si[t];if(!xi[t])return t;var e,n=xi[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ei)return Si[t]=n[e];return t}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ti=ki("animationend"),Ci=ki("animationiteration"),Ii=ki("animationstart"),Ai=ki("transitionend"),Pi=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(t,e){Pi.set(t,e),l(e,[t])}for(var Oi=0;Oi<Ni.length;Oi++){var Ri=Ni[Oi];Di(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Di(Ti,"onAnimationEnd"),Di(Ci,"onAnimationIteration"),Di(Ii,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function Fi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,a,l,c){if(Ut.apply(this,arguments),Lt){if(!Lt)throw Error(s(198));var u=Ft;Lt=!1,Ft=null,jt||(jt=!0,Vt=u)}}(i,e,void 0,t),t.currentTarget=null}function ji(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break t;Fi(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break t;Fi(r,a,c),s=l}}}if(jt)throw t=Vt,jt=!1,Vt=null,t}function Vi(t,e){var n=e[gr];void 0===n&&(n=e[gr]=new Set);var i=t+"__bubble";n.has(i)||(Hi(e,t,2,!1),n.add(i))}function zi(t,e,n){var i=0;e&&(i|=4),Hi(n,t,i,e)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Bi(t){if(!t[Ui]){t[Ui]=!0,o.forEach(function(e){"selectionchange"!==e&&(Li.has(e)||zi(e,!1,t),zi(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ui]||(e[Ui]=!0,zi("selectionchange",!1,e))}}function Hi(t,e,n,i){switch(Xe(e)){case 1:var r=qe;break;case 4:r=Ke;break;default:r=Ge}n=r.bind(null,e,n,t),r=void 0,!Ot||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Wi(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=vr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue t}a=a.parentNode}}i=i.return}Nt(function(){var i=s,r=wt(n),o=[];t:{var a=Pi.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ti:case Ci:case Ii:l=yn;break;case Ai:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Dt(p,d))&&u.push(qi(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===_t||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Bt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=In,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:_r(l),f=null==c?a:_r(c),(a=new u(g,p+"leave",l,n,r)).target=h,a.relatedTarget=f,g=null,vr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Gi(f))p++;for(f=0,g=d;g;g=Gi(g))f++;for(;0<p-f;)u=Gi(u),p--;for(;0<f-p;)d=Gi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Gi(u),d=Gi(d)}u=null}else u=null;null!==l&&Qi(o,a,l,u,!1),null!==c&&null!==h&&Qi(o,h,c,u,!0)}if("select"===(l=(a=i?_r(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Wn(a))if($n)m=oi;else{m=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(t,i))?qn(o,m,n,r):(y&&y(t,a,i),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=i?_r(i):window,t){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mi=y,yi=i,vi=null);break;case"focusout":vi=yi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,_i(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":_i(o,n,r)}var v;if(Rn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Bn?zn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=tn()):(Je="value"in($e=r)?$e.value:$e.textContent,Bn=!0)),0<(y=Ki(i,b)).length&&(b=new _n(b,t,null,n,r),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=Ln?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Vn=!0,jn);case"textInput":return(t=e.data)===jn&&Vn?null:t;default:return null}}(t,n):function(t,e){if(Bn)return"compositionend"===t||!Rn&&zn(t,e)?(t=tn(),Ze=Je=$e=null,Bn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Ki(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=v))}ji(o,e)})}function qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ki(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Dt(t,n))&&i.unshift(qi(t,s,r)),null!=(s=Dt(t,e))&&i.push(qi(t,s,r))),t=t.return}return i}function Gi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Qi(t,e,n,i,r){for(var s=e._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Dt(n,s))&&o.unshift(qi(n,l,a)):r||null!=(l=Dt(n,s))&&o.push(qi(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Yi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function $i(t){return("string"===typeof t?t:""+t).replace(Yi,"\n").replace(Xi,"")}function Ji(t,e,n){if(e=$i(e),$i(t)!==e&&n)throw Error(s(425))}function Zi(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(t){return sr.resolve(null).then(t).catch(ar)}:ir;function ar(t){setTimeout(function(){throw t})}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void Be(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Be(e)}function cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ur(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function vr(t){var e=t[dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[dr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ur(t);null!==t;){if(n=t[dr])return n;t=ur(t)}return e}n=(t=n).parentNode}return null}function br(t){return!(t=t[dr]||t[pr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _r(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function wr(t){return t[fr]||null}var xr=[],Sr=-1;function Er(t){return{current:t}}function kr(t){0>Sr||(t.current=xr[Sr],xr[Sr]=null,Sr--)}function Tr(t,e){Sr++,xr[Sr]=t.current,t.current=e}var Cr={},Ir=Er(Cr),Ar=Er(!1),Pr=Cr;function Nr(t,e){var n=t.type.contextTypes;if(!n)return Cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Or(){kr(Ar),kr(Ir)}function Rr(t,e,n){if(Ir.current!==Cr)throw Error(s(168));Tr(Ir,e),Tr(Ar,n)}function Mr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,H(t)||"Unknown",r));return F({},n,i)}function Lr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,Pr=Ir.current,Tr(Ir,t),Tr(Ar,Ar.current),!0}function Fr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Mr(t,e,Pr),i.__reactInternalMemoizedMergedChildContext=t,kr(Ar),kr(Ir),Tr(Ir,t)):kr(Ar),Tr(Ar,n)}var jr=null,Vr=!1,zr=!1;function Ur(t){null===jr?jr=[t]:jr.push(t)}function Br(){if(!zr&&null!==jr){zr=!0;var t=0,e=be;try{var n=jr;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}jr=null,Vr=!1}catch(r){throw null!==jr&&(jr=jr.slice(t+1)),Gt(Zt,Br),r}finally{be=e,zr=!1}}return null}var Hr=[],Wr=0,qr=null,Kr=0,Gr=[],Qr=0,Yr=null,Xr=1,$r="";function Jr(t,e){Hr[Wr++]=Kr,Hr[Wr++]=qr,qr=t,Kr=e}function Zr(t,e,n){Gr[Qr++]=Xr,Gr[Qr++]=$r,Gr[Qr++]=Yr,Yr=t;var i=Xr;t=$r;var r=32-oe(i)-1;i&=~(1<<r),n+=1;var s=32-oe(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Xr=1<<32-oe(e)+r|n<<r|i,$r=s+t}else Xr=1<<s|n<<r|i,$r=t}function ts(t){null!==t.return&&(Jr(t,1),Zr(t,1,0))}function es(t){for(;t===qr;)qr=Hr[--Wr],Hr[Wr]=null,Kr=Hr[--Wr],Hr[Wr]=null;for(;t===Yr;)Yr=Gr[--Qr],Gr[Qr]=null,$r=Gr[--Qr],Gr[Qr]=null,Xr=Gr[--Qr],Gr[Qr]=null}var ns=null,is=null,rs=!1,ss=null;function os(t,e){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function as(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ns=t,is=cr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ns=t,is=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yr?{id:Xr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ns=t,is=null,!0);default:return!1}}function ls(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function cs(t){if(rs){var e=is;if(e){var n=e;if(!as(t,e)){if(ls(t))throw Error(s(418));e=cr(n.nextSibling);var i=ns;e&&as(t,e)?os(i,n):(t.flags=-4097&t.flags|2,rs=!1,ns=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,rs=!1,ns=t}}}function us(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ns=t}function hs(t){if(t!==ns)return!1;if(!rs)return us(t),rs=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=is)){if(ls(t))throw ds(),Error(s(418));for(;e;)os(t,e),e=cr(e.nextSibling)}if(us(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){is=cr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}is=null}}else is=ns?cr(t.stateNode.nextSibling):null;return!0}function ds(){for(var t=is;t;)t=cr(t.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(t){null===ss?ss=[t]:ss.push(t)}var gs=_.ReactCurrentBatchConfig;function ms(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var ys=Er(null),vs=null,bs=null,_s=null;function ws(){_s=bs=vs=null}function xs(t){var e=ys.current;kr(ys),t._currentValue=e}function Ss(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Es(t,e){vs=t,_s=bs=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_a=!0),t.firstContext=null)}function ks(t){var e=t._currentValue;if(_s!==t)if(t={context:t,memoizedValue:e,next:null},null===bs){if(null===vs)throw Error(s(308));bs=t,vs.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var Ts=null;function Cs(t){null===Ts?Ts=[t]:Ts.push(t)}function Is(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Cs(e)):(n.next=r.next,r.next=n),e.interleaved=n,As(t,i)}function As(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function Ns(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Os(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rs(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Il)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,As(t,n)}return null===(r=i.interleaved)?(e.next=e,Cs(i)):(e.next=r.next,r.next=e),i.interleaved=e,As(t,n)}function Ms(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Ls(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fs(t,e,n,i){var r=t.updateQueue;Ps=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break t;h=F({},h,d);break t;case 2:Ps=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{o|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);Ll|=o,t.lanes=o,t.memoizedState=h}}function js(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Vs=(new i.Component).refs;function zs(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Us={isMounted:function(t){return!!(t=t._reactInternals)&&Bt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),s=Os(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Rs(t,s,r))&&(nc(e,t,r,i),Ms(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),s=Os(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Rs(t,s,r))&&(nc(e,t,r,i),Ms(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),i=ec(t),r=Os(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Rs(t,r,i))&&(nc(e,t,i,n),Ms(e,t,i))}};function Bs(t,e,n,i,r,s,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,o):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function Hs(t,e,n){var i=!1,r=Cr,s=e.contextType;return"object"===typeof s&&null!==s?s=ks(s):(r=Dr(e)?Pr:Ir.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Nr(t,r):Cr),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Us,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ws(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Us.enqueueReplaceState(e,e.state,null)}function qs(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Vs,Ns(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=ks(s):(s=Dr(e)?Pr:Ir.current,r.context=Nr(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(zs(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Us.enqueueReplaceState(r,r.state,null),Fs(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function Ks(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs;e===Vs&&(e=r.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function Gs(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qs(t){return(0,t._init)(t._payload)}function Ys(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Oc(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Fc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var s=n.type;return s===S?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Qs(s)===e.type)?((i=r(e,n.props)).ref=Ks(t,e,n),i.return=t,i):((i=Rc(n.type,n.key,n.props,null,t.mode,i)).ref=Ks(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=jc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,s){return null===e||7!==e.tag?((e=Mc(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Rc(e.type,e.key,e.props,null,t.mode,n)).ref=Ks(t,null,e),n.return=t,n;case x:return(e=jc(e,t.mode,n)).return=t,e;case D:return d(t,(0,e._init)(e._payload),n)}if(et(e)||M(e))return(e=Mc(e,t.mode,n,null)).return=t,e;Gs(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(t,e,n,i):null;case x:return n.key===r?u(t,e,n,i):null;case D:return f(t,e,(r=n._init)(n._payload),i)}if(et(n)||M(n))return null!==r?null:h(t,e,n,i,null);Gs(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case x:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case D:return p(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||M(i))return h(e,t=t.get(n)||null,i,r,null);Gs(e,i)}return null}function g(r,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(r,h,a[g],l);if(null===y){null===h&&(h=m);break}t&&h&&null===y.alternate&&e(r,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<a.length;g++)null!==(m=p(h,r,g,a[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach(function(t){return e(r,t)}),rs&&Jr(r,g),c}function m(r,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(r,g,v.value,c);if(null===b){null===g&&(g=y);break}t&&g&&null===b.alternate&&e(r,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(r,g),rs&&Jr(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return rs&&Jr(r,m),u}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,c))&&(t&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return t&&g.forEach(function(t){return e(r,t)}),rs&&Jr(r,m),u}return function t(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:t:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qs(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=Ks(i,u,o),s.return=i,i=s;break t}n(i,u);break}e(i,u),u=u.sibling}o.type===S?((s=Mc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Rc(o.type,o.key,o.props,null,i.mode,l)).ref=Ks(i,s,o),l.return=i,i=l)}return a(i);case x:t:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=jc(o,i.mode,l)).return=i,i=s}return a(i);case D:return t(i,s,(u=o._init)(o._payload),l)}if(et(o))return g(i,s,o,l);if(M(o))return m(i,s,o,l);Gs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Fc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var Xs=Ys(!0),$s=Ys(!1),Js={},Zs=Er(Js),to=Er(Js),eo=Er(Js);function no(t){if(t===Js)throw Error(s(174));return t}function io(t,e){switch(Tr(eo,e),Tr(to,t),Tr(Zs,Js),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}kr(Zs),Tr(Zs,e)}function ro(){kr(Zs),kr(to),kr(eo)}function so(t){no(eo.current);var e=no(Zs.current),n=lt(e,t.type);e!==n&&(Tr(to,t),Tr(Zs,n))}function oo(t){to.current===t&&(kr(Zs),kr(to))}var ao=Er(0);function lo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var co=[];function uo(){for(var t=0;t<co.length;t++)co[t]._workInProgressVersionPrimary=null;co.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,go=null,mo=null,yo=null,vo=!1,bo=!1,_o=0,wo=0;function xo(){throw Error(s(321))}function So(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function Eo(t,e,n,i,r,o){if(po=o,go=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ho.current=null===t||null===t.memoizedState?aa:la,t=n(i,r),bo){o=0;do{if(bo=!1,_o=0,25<=o)throw Error(s(301));o+=1,yo=mo=null,e.updateQueue=null,ho.current=ca,t=n(i,r)}while(bo)}if(ho.current=oa,e=null!==mo&&null!==mo.next,po=0,yo=mo=go=null,vo=!1,e)throw Error(s(300));return t}function ko(){var t=0!==_o;return _o=0,t}function To(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?go.memoizedState=yo=t:yo=yo.next=t,yo}function Co(){if(null===mo){var t=go.alternate;t=null!==t?t.memoizedState:null}else t=mo.next;var e=null===yo?go.memoizedState:yo.next;if(null!==e)yo=e,mo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(mo=t).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?go.memoizedState=yo=t:yo=yo.next=t}return yo}function Io(t,e){return"function"===typeof e?e(t):e}function Ao(t){var e=Co(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=mo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,go.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,e.memoizedState)||(_a=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{o=r.lane,go.lanes|=o,Ll|=o,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Po(t){var e=Co(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=t(o,a.action),a=a.next}while(a!==r);ai(o,e.memoizedState)||(_a=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function No(){}function Do(t,e){var n=go,i=Co(),r=e(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,_a=!0),i=i.queue,Wo(Mo.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Ro.bind(null,n,i,r,e),void 0,null),null===Al)throw Error(s(349));0!==(30&po)||Oo(n,e,r)}return r}function Oo(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=go.updateQueue)?(e={lastEffect:null,stores:null},go.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ro(t,e,n,i){e.value=n,e.getSnapshot=i,Lo(e)&&Fo(t)}function Mo(t,e,n){return n(function(){Lo(e)&&Fo(t)})}function Lo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch(i){return!0}}function Fo(t){var e=As(t,1);null!==e&&nc(e,t,1,-1)}function jo(t){var e=To();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,go,t),[e.memoizedState,t]}function Vo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=go.updateQueue)?(e={lastEffect:null,stores:null},go.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function zo(){return Co().memoizedState}function Uo(t,e,n,i){var r=To();go.flags|=t,r.memoizedState=Vo(1|e,n,void 0,void 0===i?null:i)}function Bo(t,e,n,i){var r=Co();i=void 0===i?null:i;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==i&&So(i,o.deps))return void(r.memoizedState=Vo(e,n,s,i))}go.flags|=t,r.memoizedState=Vo(1|e,n,s,i)}function Ho(t,e){return Uo(8390656,8,t,e)}function Wo(t,e){return Bo(2048,8,t,e)}function qo(t,e){return Bo(4,2,t,e)}function Ko(t,e){return Bo(4,4,t,e)}function Go(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Qo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Bo(4,4,Go.bind(null,e,t),n)}function Yo(){}function Xo(t,e){var n=Co();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&So(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $o(t,e){var n=Co();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&So(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Jo(t,e,n){return 0===(21&po)?(t.baseState&&(t.baseState=!1,_a=!0),t.memoizedState=n):(ai(n,e)||(n=ge(),go.lanes|=n,Ll|=n,t.baseState=!0),e)}function Zo(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=fo.transition;fo.transition={};try{t(!1),e()}finally{be=n,fo.transition=i}}function ta(){return Co().memoizedState}function ea(t,e,n){var i=ec(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(t))ra(e,n);else if(null!==(n=Is(t,e,n,i))){nc(n,t,i,tc()),sa(n,e,i)}}function na(t,e,n){var i=ec(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(t))ra(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=e.interleaved;return null===l?(r.next=r,Cs(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=Is(t,e,r,i))&&(nc(n,t,i,r=tc()),sa(n,e,i))}}function ia(t){var e=t.alternate;return t===go||null!==e&&e===go}function ra(t,e){bo=vo=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sa(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}var oa={readContext:ks,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},aa={readContext:ks,useCallback:function(t,e){return To().memoizedState=[t,void 0===e?null:e],t},useContext:ks,useEffect:Ho,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Uo(4194308,4,Go.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uo(4,2,t,e)},useMemo:function(t,e){var n=To();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=To();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ea.bind(null,go,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},To().memoizedState=t},useState:jo,useDebugValue:Yo,useDeferredValue:function(t){return To().memoizedState=t},useTransition:function(){var t=jo(!1),e=t[0];return t=Zo.bind(null,t[1]),To().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=go,r=To();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Al)throw Error(s(349));0!==(30&po)||Oo(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Ho(Mo.bind(null,i,o,t),[t]),i.flags|=2048,Vo(9,Ro.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=To(),e=Al.identifierPrefix;if(rs){var n=$r;e=":"+e+"R"+(n=(Xr&~(1<<32-oe(Xr)-1)).toString(32)+n),0<(n=_o++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=wo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:ks,useCallback:Xo,useContext:ks,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:qo,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:zo,useState:function(){return Ao(Io)},useDebugValue:Yo,useDeferredValue:function(t){return Jo(Co(),mo.memoizedState,t)},useTransition:function(){return[Ao(Io)[0],Co().memoizedState]},useMutableSource:No,useSyncExternalStore:Do,useId:ta,unstable_isNewReconciler:!1},ca={readContext:ks,useCallback:Xo,useContext:ks,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:qo,useLayoutEffect:Ko,useMemo:$o,useReducer:Po,useRef:zo,useState:function(){return Po(Io)},useDebugValue:Yo,useDeferredValue:function(t){var e=Co();return null===mo?e.memoizedState=t:Jo(e,mo.memoizedState,t)},useTransition:function(){return[Po(Io)[0],Co().memoizedState]},useMutableSource:No,useSyncExternalStore:Do,useId:ta,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",i=e;do{n+=U(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function ha(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wl||(Wl=!0,ql=i),da(0,e)},n}function ga(t,e,n){(n=Os(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){da(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,e),"function"!==typeof i&&(null===Kl?Kl=new Set([this]):Kl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new fa;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=kc.bind(null,t,e,n),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function va(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Os(-1,1)).tag=2,Rs(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var ba=_.ReactCurrentOwner,_a=!1;function wa(t,e,n,i){e.child=null===t?$s(e,null,n,i):Xs(e,t.child,n,i)}function xa(t,e,n,i,r){n=n.render;var s=e.ref;return Es(e,r),i=Eo(t,e,n,i,s,r),n=ko(),null===t||_a?(rs&&n&&ts(e),e.flags|=1,wa(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wa(t,e,r))}function Sa(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Rc(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Ea(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&t.ref===e.ref)return Wa(t,e,r)}return e.flags|=1,(t=Oc(s,i)).ref=e.ref,t.return=e,e.child=t}function Ea(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(li(s,i)&&t.ref===e.ref){if(_a=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,Wa(t,e,r);0!==(131072&t.flags)&&(_a=!0)}}return Ca(t,e,n,i,r)}function ka(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tr(Ol,Dl),Dl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Ol,Dl),Dl|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Tr(Ol,Dl),Dl|=i;return wa(t,e,r,n),e.child}function Ta(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ca(t,e,n,i,r){var s=Dr(n)?Pr:Ir.current;return s=Nr(e,s),Es(e,r),n=Eo(t,e,n,i,s,r),i=ko(),null===t||_a?(rs&&i&&ts(e),e.flags|=1,wa(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wa(t,e,r))}function Ia(t,e,n,i,r){if(Dr(n)){var s=!0;Lr(e)}else s=!1;if(Es(e,r),null===e.stateNode)Ha(t,e),Hs(e,n,i),qs(e,n,i,r),i=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ks(c):c=Nr(e,c=Dr(n)?Pr:Ir.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&Ws(e,o,i,c),Ps=!1;var d=e.memoizedState;o.state=d,Fs(e,i,o,r),l=e.memoizedState,a!==i||d!==l||Ar.current||Ps?("function"===typeof u&&(zs(e,n,u,i),l=e.memoizedState),(a=Ps||Bs(e,n,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Ds(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ms(e.type,a),o.props=c,h=e.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ks(l):l=Nr(e,l=Dr(n)?Pr:Ir.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(e,o,i,l),Ps=!1,d=e.memoizedState,o.state=d,Fs(e,i,o,r);var p=e.memoizedState;a!==h||d!==p||Ar.current||Ps?("function"===typeof f&&(zs(e,n,f,i),p=e.memoizedState),(c=Ps||Bs(e,n,c,i,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Aa(t,e,n,i,s,r)}function Aa(t,e,n,i,r,s){Ta(t,e);var o=0!==(128&e.flags);if(!i&&!o)return r&&Fr(e,n,!1),Wa(t,e,s);i=e.stateNode,ba.current=e;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&o?(e.child=Xs(e,t.child,null,s),e.child=Xs(e,null,a,s)):wa(t,e,a,s),e.memoizedState=i.state,r&&Fr(e,n,!0),e.child}function Pa(t){var e=t.stateNode;e.pendingContext?Rr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Rr(0,e.context,!1),io(t,e.containerInfo)}function Na(t,e,n,i,r){return fs(),ps(r),e.flags|=256,wa(t,e,n,i),e.child}var Da,Oa,Ra,Ma={dehydrated:null,treeContext:null,retryLane:0};function La(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fa(t,e,n){var i,r=e.pendingProps,o=ao.current,a=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Tr(ao,1&o),null===t)return cs(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,r,0,null),t=Mc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=La(n),e.memoizedState=Ma,t):ja(e,l));if(null!==(o=t.memoizedState)&&null!==(i=o.dehydrated))return function(t,e,n,i,r,o,a){if(n)return 256&e.flags?(e.flags&=-257,Va(t,e,a,i=ha(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Lc({mode:"visible",children:i.children},r,0,null),(o=Mc(o,r,a,null)).flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,0!==(1&e.mode)&&Xs(e,t.child,null,a),e.child.memoizedState=La(a),e.memoizedState=Ma,o);if(0===(1&e.mode))return Va(t,e,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Va(t,e,a,i=ha(o=Error(s(419)),i,void 0))}if(l=0!==(a&t.childLanes),_a||l){if(null!==(i=Al)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,As(t,r),nc(i,t,r,-1))}return gc(),Va(t,e,a,i=ha(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Cc.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,is=cr(r.nextSibling),ns=e,rs=!0,ss=null,null!==t&&(Gr[Qr++]=Xr,Gr[Qr++]=$r,Gr[Qr++]=Yr,Xr=t.id,$r=t.overflow,Yr=e),e=ja(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,o,n);if(a){a=r.fallback,l=e.mode,i=(o=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==o?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Oc(i,a):(a=Mc(a,l,n,null)).flags|=2,a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=null===(l=t.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Ma,r}return t=(a=t.child).sibling,r=Oc(a,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ja(t,e){return(e=Lc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Va(t,e,n,i){return null!==i&&ps(i),Xs(e,t.child,null,n),(t=ja(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function za(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Ss(t.return,e,n)}function Ua(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ba(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(wa(t,e,i.children,n),0!==(2&(i=ao.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&za(t,n,e);else if(19===t.tag)za(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tr(ao,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===lo(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ua(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===lo(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ua(e,!0,n,null,s);break;case"together":Ua(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ha(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ll|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Oc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Oc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qa(t,e){if(!rs)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ka(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Ga(t,e,n){var i=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(e),null;case 1:case 17:return Dr(e.type)&&Or(),Ka(e),null;case 3:return i=e.stateNode,ro(),kr(Ar),kr(Ir),uo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(hs(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ka(e),null;case 5:oo(e);var r=no(eo.current);if(n=e.type,null!==t&&null!=e.stateNode)Oa(t,e,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return Ka(e),null}if(t=no(Zs.current),hs(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[dr]=e,i[fr]=o,t=0!==(1&e.mode),n){case"dialog":Vi("cancel",i),Vi("close",i);break;case"iframe":case"object":case"embed":Vi("load",i);break;case"video":case"audio":for(r=0;r<Mi.length;r++)Vi(Mi[r],i);break;case"source":Vi("error",i);break;case"img":case"image":case"link":Vi("error",i),Vi("load",i);break;case"details":Vi("toggle",i);break;case"input":X(i,o),Vi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Vi("invalid",i);break;case"textarea":rt(i,o),Vi("invalid",i)}for(var l in vt(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,t),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vi("scroll",i)}switch(n){case"input":K(i),Z(i,o,!0);break;case"textarea":K(i),ot(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[dr]=e,t[fr]=i,Da(t,e),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":Vi("cancel",t),Vi("close",t),r=i;break;case"iframe":case"object":case"embed":Vi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Mi.length;r++)Vi(Mi[r],t);r=i;break;case"source":Vi("error",t),r=i;break;case"img":case"image":case"link":Vi("error",t),Vi("load",t),r=i;break;case"details":Vi("toggle",t),r=i;break;case"input":X(t,i),r=Y(t,i),Vi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),Vi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Vi("invalid",t)}for(o in vt(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?mt(t,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vi("scroll",t):null!=u&&b(t,o,u,l))}switch(n){case"input":K(t),Z(t,i,!1);break;case"textarea":K(t),ot(t);break;case"option":null!=i.value&&t.setAttribute("value",""+W(i.value));break;case"select":t.multiple=!!i.multiple,null!=(o=i.value)?nt(t,!!i.multiple,o,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ka(e),null;case 6:if(t&&null!=e.stateNode)Ra(0,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=no(eo.current),no(Zs.current),hs(e)){if(i=e.stateNode,n=e.memoizedProps,i[dr]=e,(o=i.nodeValue!==n)&&null!==(t=ns))switch(t.tag){case 3:Ji(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=e,e.stateNode=i}return Ka(e),null;case 13:if(kr(ao),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&e.mode)&&0===(128&e.flags))ds(),fs(),e.flags|=98560,o=!1;else if(o=hs(e),null!==i&&null!==i.dehydrated){if(null===t){if(!o)throw Error(s(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=e}else fs(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ka(e),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ao.current)?0===Rl&&(Rl=3):gc())),null!==e.updateQueue&&(e.flags|=4),Ka(e),null);case 4:return ro(),null===t&&Bi(e.stateNode.containerInfo),Ka(e),null;case 10:return xs(e.type._context),Ka(e),null;case 19:if(kr(ao),null===(o=e.memoizedState))return Ka(e),null;if(i=0!==(128&e.flags),null===(l=o.rendering))if(i)qa(o,!1);else{if(0!==Rl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=lo(t))){for(e.flags|=128,qa(o,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tr(ao,1&ao.current|2),e.child}t=t.sibling}null!==o.tail&&$t()>Bl&&(e.flags|=128,i=!0,qa(o,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=lo(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Ka(e),null}else 2*$t()-o.renderingStartTime>Bl&&1073741824!==n&&(e.flags|=128,i=!0,qa(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$t(),e.sibling=null,n=ao.current,Tr(ao,i?1&n|2:1&n),e):(Ka(e),null);case 22:case 23:return hc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Dl)&&(Ka(e),6&e.subtreeFlags&&(e.flags|=8192)):Ka(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Qa(t,e){switch(es(e),e.tag){case 1:return Dr(e.type)&&Or(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return ro(),kr(Ar),kr(Ir),uo(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return oo(e),null;case 13:if(kr(ao),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));fs()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return kr(ao),null;case 4:return ro(),null;case 10:return xs(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Da=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":r=Y(t,r),i=Y(t,i),o=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),o=[];break;case"textarea":r=it(t,r),i=it(t,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=Zi)}for(u in vt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vi("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}},Ra=function(t,e,n,i){n!==i&&(e.flags|=4)};var Ya=!1,Xa=!1,$a="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ec(t,e,i)}else n.current=null}function tl(t,e,n){try{n()}catch(i){Ec(t,e,i)}}var el=!1;function nl(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(e,n,s)}r=r.next}while(r!==i)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[dr],delete e[fr],delete e[gr],delete e[mr],delete e[yr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zi));else if(4!==i&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(a){}switch(n.tag){case 5:Xa||Za(n,e);case 6:var i=ul,r=hl;ul=null,dl(t,e,n),hl=r,null!==(ul=i)&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),Be(t)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,dl(t,e,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,e,o),r=r.next}while(r!==i)}dl(t,e,n);break;case 1:if(!Xa&&(Za(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ec(n,e,a)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Xa=(i=Xa)||null!==n.memoizedState,dl(t,e,n),Xa=i):dl(t,e,n);break;default:dl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new $a),e.forEach(function(e){var i=Ic.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))})}}function gl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ec(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),yl(t),4&i){try{nl(3,t,t.return),il(3,t)}catch(m){Ec(t,t.return,m)}try{nl(5,t,t.return)}catch(m){Ec(t,t.return,m)}}break;case 1:gl(e,t),yl(t),512&i&&null!==n&&Za(n,n.return);break;case 5:if(gl(e,t),yl(t),512&i&&null!==n&&Za(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(m){Ec(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var o=t.memoizedProps,a=null!==n?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),bt(l,a);var u=bt(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?mt(r,d):"dangerouslySetInnerHTML"===h?ht(r,d):"children"===h?dt(r,d):b(r,h,d,u)}switch(l){case"input":J(r,o);break;case"textarea":st(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?nt(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?nt(r,!!o.multiple,o.defaultValue,!0):nt(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){Ec(t,t.return,m)}}break;case 6:if(gl(e,t),yl(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(m){Ec(t,t.return,m)}}break;case 3:if(gl(e,t),yl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Be(e.containerInfo)}catch(m){Ec(t,t.return,m)}break;case 4:default:gl(e,t),yl(t);break;case 13:gl(e,t),yl(t),8192&(r=t.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=$t())),4&i&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Xa=(u=Xa)||h,gl(e,t),Xa=u):gl(e,t),yl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Ja=t,h=t.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ec(i,n,m)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Ja=p):wl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",a))}catch(m){Ec(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ec(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(e,t),yl(t),4&i&&pl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ol(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),cl(t,al(t),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(t,al(t),o);break;default:throw Error(s(161))}}catch(a){Ec(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,n){Ja=t,bl(t,e,n)}function bl(t,e,n){for(var i=0!==(1&t.mode);null!==Ja;){var r=Ja,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ya;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var c=Xa;if(Ya=o,(Xa=l)&&!c)for(Ja=r;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?xl(r):null!==l?(l.return=o,Ja=l):xl(r);for(;null!==s;)Ja=s,bl(s,e,n),s=s.sibling;Ja=r,Ya=a,Xa=c}_l(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Ja=s):_l(t)}}function _l(t){for(;null!==Ja;){var e=Ja;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Xa||il(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Xa)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ms(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&js(e,o,i);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}js(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Be(d)}}}break;default:throw Error(s(163))}Xa||512&e.flags&&rl(e)}catch(f){Ec(e,e.return,f)}}if(e===t){Ja=null;break}if(null!==(n=e.sibling)){n.return=e.return,Ja=n;break}Ja=e.return}}function wl(t){for(;null!==Ja;){var e=Ja;if(e===t){Ja=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Ja=n;break}Ja=e.return}}function xl(t){for(;null!==Ja;){var e=Ja;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Ec(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Ec(e,r,l)}}var s=e.return;try{rl(e)}catch(l){Ec(e,s,l)}break;case 5:var o=e.return;try{rl(e)}catch(l){Ec(e,o,l)}}}catch(l){Ec(e,e.return,l)}if(e===t){Ja=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ja=a;break}Ja=e.return}}var Sl,El=Math.ceil,kl=_.ReactCurrentDispatcher,Tl=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,Il=0,Al=null,Pl=null,Nl=0,Dl=0,Ol=Er(0),Rl=0,Ml=null,Ll=0,Fl=0,jl=0,Vl=null,zl=null,Ul=0,Bl=1/0,Hl=null,Wl=!1,ql=null,Kl=null,Gl=!1,Ql=null,Yl=0,Xl=0,$l=null,Jl=-1,Zl=0;function tc(){return 0!==(6&Il)?$t():-1!==Jl?Jl:Jl=$t()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Il)&&0!==Nl?Nl&-Nl:null!==gs.transition?(0===Zl&&(Zl=ge()),Zl):0!==(t=be)?t:t=void 0===(t=window.event)?16:Xe(t.type)}function nc(t,e,n,i){if(50<Xl)throw Xl=0,$l=null,Error(s(185));ye(t,n,i),0!==(2&Il)&&t===Al||(t===Al&&(0===(2&Il)&&(Fl|=n),4===Rl&&ac(t,Nl)),ic(t,i),1===n&&0===Il&&0===(1&e.mode)&&(Bl=$t()+500,Vr&&Br()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-oe(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=fe(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}(t,e);var i=de(t,t===Al?Nl:0);if(0===i)null!==n&&Qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Qt(n),1===e)0===t.tag?function(t){Vr=!0,Ur(t)}(lc.bind(null,t)):Ur(lc.bind(null,t)),or(function(){0===(6&Il)&&Br()}),n=null;else{switch(_e(i)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Ac(n,rc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rc(t,e){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(s(327));var n=t.callbackNode;if(xc()&&t.callbackNode!==n)return null;var i=de(t,t===Al?Nl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=mc(t,i);else{e=i;var r=Il;Il|=2;var o=pc();for(Al===t&&Nl===e||(Hl=null,Bl=$t()+500,dc(t,e));;)try{vc();break}catch(l){fc(t,l)}ws(),kl.current=o,Il=r,null!==Pl?e=0:(Al=null,Nl=0,e=Rl)}if(0!==e){if(2===e&&(0!==(r=pe(t))&&(i=r,e=sc(t,r))),1===e)throw n=Ml,dc(t,0),ac(t,i),ic(t,$t()),n;if(6===e)ac(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=mc(t,i))&&(0!==(o=pe(t))&&(i=o,e=sc(t,o))),1===e))throw n=Ml,dc(t,0),ac(t,i),ic(t,$t()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:wc(t,zl,Hl);break;case 3:if(ac(t,i),(130023424&i)===i&&10<(e=Ul+500-$t())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){tc(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(wc.bind(null,t,zl,Hl),e);break}wc(t,zl,Hl);break;case 4:if(ac(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-oe(i);o=1<<a,(a=e[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=$t()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){t.timeoutHandle=ir(wc.bind(null,t,zl,Hl),i);break}wc(t,zl,Hl);break;default:throw Error(s(329))}}}return ic(t,$t()),t.callbackNode===n?rc.bind(null,t):null}function sc(t,e){var n=Vl;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=mc(t,e))&&(e=zl,zl=n,null!==e&&oc(e)),t}function oc(t){null===zl?zl=t:zl.push.apply(zl,t)}function ac(t,e){for(e&=~jl,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),i=1<<n;t[n]=-1,e&=~i}}function lc(t){if(0!==(6&Il))throw Error(s(327));xc();var e=de(t,0);if(0===(1&e))return ic(t,$t()),null;var n=mc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=sc(t,i))}if(1===n)throw n=Ml,dc(t,0),ac(t,e),ic(t,$t()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wc(t,zl,Hl),ic(t,$t()),null}function cc(t,e){var n=Il;Il|=1;try{return t(e)}finally{0===(Il=n)&&(Bl=$t()+500,Vr&&Br())}}function uc(t){null!==Ql&&0===Ql.tag&&0===(6&Il)&&xc();var e=Il;Il|=1;var n=Cl.transition,i=be;try{if(Cl.transition=null,be=1,t)return t()}finally{be=i,Cl.transition=n,0===(6&(Il=e))&&Br()}}function hc(){Dl=Ol.current,kr(Ol)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(es(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Or();break;case 3:ro(),kr(Ar),kr(Ir),uo();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:kr(ao);break;case 10:xs(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=t,Pl=t=Oc(t.current,null),Nl=Dl=e,Rl=0,Ml=null,jl=Fl=Ll=0,zl=Vl=null,null!==Ts){for(e=0;e<Ts.length;e++)if(null!==(i=(n=Ts[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ts=null}return t}function fc(t,e){for(;;){var n=Pl;try{if(ws(),ho.current=oa,vo){for(var i=go.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}vo=!1}if(po=0,yo=mo=go=null,bo=!1,_o=0,Tl.current=null,null===n||null===n.return){Rl=1,Ml=e,Pl=null;break}t:{var o=t,a=n.return,l=n,c=e;if(e=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,e),1&p.mode&&ma(o,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ma(o,u,e),gc();break t}c=Error(s(426))}else if(rs&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,e),ps(ua(c,l));break t}}o=c=ua(c,l),4!==Rl&&(Rl=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Ls(o,pa(0,c,e));break t;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e,Ls(o,ga(o,l,e));break t}}o=o.return}while(null!==o)}_c(n)}catch(_){e=_,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var t=kl.current;return kl.current=oa,null===t?oa:t}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Al||0===(268435455&Ll)&&0===(268435455&Fl)||ac(Al,Nl)}function mc(t,e){var n=Il;Il|=2;var i=pc();for(Al===t&&Nl===e||(Hl=null,dc(t,e));;)try{yc();break}catch(r){fc(t,r)}if(ws(),Il=n,kl.current=i,null!==Pl)throw Error(s(261));return Al=null,Nl=0,Rl}function yc(){for(;null!==Pl;)bc(Pl)}function vc(){for(;null!==Pl&&!Yt();)bc(Pl)}function bc(t){var e=Sl(t.alternate,t,Dl);t.memoizedProps=t.pendingProps,null===e?_c(t):Pl=e,Tl.current=null}function _c(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ga(n,e,Dl)))return void(Pl=n)}else{if(null!==(n=Qa(n,e)))return n.flags&=32767,void(Pl=n);if(null===t)return Rl=6,void(Pl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Pl=e);Pl=e=t}while(null!==e);0===Rl&&(Rl=5)}function wc(t,e,n){var i=be,r=Cl.transition;try{Cl.transition=null,be=1,function(t,e,n,i){do{xc()}while(null!==Ql);if(0!==(6&Il))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oe(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,o),t===Al&&(Pl=Al=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ac(ee,function(){return xc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=be;be=1;var l=Il;Il|=4,Tl.current=null,function(t,e){if(tr=We,fi(t=di())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break t}var a=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===r&&(l=a),f===o&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},We=!1,Ja=e;null!==Ja;)if(t=(e=Ja).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ja=t;else for(;null!==Ja;){e=Ja;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:ms(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Ja=t;break}Ja=e.return}g=el,el=!1}(t,n),ml(n,t),pi(er),We=!!tr,er=tr=null,t.current=n,vl(n,t,r),Xt(),Il=l,be=a,Cl.transition=o}else t.current=n;if(Gl&&(Gl=!1,Ql=t,Yl=r),o=t.pendingLanes,0===o&&(Kl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,$t()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,t=ql,ql=null,t;0!==(1&Yl)&&0!==t.tag&&xc(),o=t.pendingLanes,0!==(1&o)?t===$l?Xl++:(Xl=0,$l=t):Xl=0,Br()}(t,e,n,i)}finally{Cl.transition=r,be=i}return null}function xc(){if(null!==Ql){var t=_e(Yl),e=Cl.transition,n=be;try{if(Cl.transition=null,be=16>t?16:t,null===Ql)var i=!1;else{if(t=Ql,Ql=null,Yl=0,0!==(6&Il))throw Error(s(331));var r=Il;for(Il|=4,Ja=t.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(sl(h),h===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else t:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ja=v;break t}Ja=o.return}}var b=t.current;for(Ja=b;null!==Ja;){var _=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,Ja=_;else t:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){Ec(l,l.return,x)}if(l===a){Ja=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Ja=w;break t}Ja=l.return}}if(Il=r,Br(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(x){}i=!0}return i}finally{be=n,Cl.transition=e}}return!1}function Sc(t,e,n){t=Rs(t,e=pa(0,e=ua(n,e),1),1),e=tc(),null!==t&&(ye(t,1,e),ic(t,e))}function Ec(t,e,n){if(3===t.tag)Sc(t,t,n);else for(;null!==e;){if(3===e.tag){Sc(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Kl||!Kl.has(i))){e=Rs(e,t=ga(e,t=ua(n,t),1),1),t=tc(),null!==e&&(ye(e,1,t),ic(e,t));break}}e=e.return}}function kc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,Al===t&&(Nl&n)===n&&(4===Rl||3===Rl&&(130023424&Nl)===Nl&&500>$t()-Ul?dc(t,0):jl|=n),ic(t,e)}function Tc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tc();null!==(t=As(t,e))&&(ye(t,e,n),ic(t,n))}function Cc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Tc(t,n)}function Ic(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Tc(t,n)}function Ac(t,e){return Gt(t,e)}function Pc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(t,e,n,i){return new Pc(t,e,n,i)}function Dc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Oc(t,e){var n=t.alternate;return null===n?((n=Nc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rc(t,e,n,i,r,o){var a=2;if(i=t,"function"===typeof t)Dc(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Mc(n.children,r,o,e);case E:a=8,r|=8;break;case k:return(t=Nc(12,n,e,2|r)).elementType=k,t.lanes=o,t;case A:return(t=Nc(13,n,e,r)).elementType=A,t.lanes=o,t;case P:return(t=Nc(19,n,e,r)).elementType=P,t.lanes=o,t;case O:return Lc(n,r,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:a=10;break t;case C:a=9;break t;case I:a=11;break t;case N:a=14;break t;case D:a=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Nc(a,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function Mc(t,e,n,i){return(t=Nc(7,t,i,e)).lanes=n,t}function Lc(t,e,n,i){return(t=Nc(22,t,i,e)).elementType=O,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return(t=Nc(6,t,null,e)).lanes=n,t}function jc(t,e,n){return(e=Nc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zc(t,e,n,i,r,s,o,a,l){return t=new Vc(t,e,n,a,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Nc(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ns(s),t}function Uc(t){if(!t)return Cr;t:{if(Bt(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Dr(n))return Mr(t,n,e)}return e}function Bc(t,e,n,i,r,s,o,a,l){return(t=zc(n,i,!0,t,0,s,0,a,l)).context=Uc(null),n=t.current,(s=Os(i=tc(),r=ec(n))).callback=void 0!==e&&null!==e?e:null,Rs(n,s,r),t.current.lanes=r,ye(t,r,i),ic(t,i),t}function Hc(t,e,n,i){var r=e.current,s=tc(),o=ec(r);return n=Uc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Os(s,o)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Rs(r,e,o))&&(nc(t,r,o,s),Ms(t,r,o)),o}function Wc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Kc(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ar.current)_a=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return _a=!1,function(t,e,n){switch(e.tag){case 3:Pa(e),fs();break;case 5:so(e);break;case 1:Dr(e.type)&&Lr(e);break;case 4:io(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tr(ys,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Tr(ao,1&ao.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fa(t,e,n):(Tr(ao,1&ao.current),null!==(t=Wa(t,e,n))?t.sibling:null);Tr(ao,1&ao.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Ba(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(ao,ao.current),i)break;return null;case 22:case 23:return e.lanes=0,ka(t,e,n)}return Wa(t,e,n)}(t,e,n);_a=0!==(131072&t.flags)}else _a=!1,rs&&0!==(1048576&e.flags)&&Zr(e,Kr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ha(t,e),t=e.pendingProps;var r=Nr(e,Ir.current);Es(e,n),r=Eo(null,e,i,t,r,n);var o=ko();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dr(i)?(o=!0,Lr(e)):o=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ns(e),r.updater=Us,e.stateNode=r,r._reactInternals=e,qs(e,i,t,n),e=Aa(null,e,i,!0,o,n)):(e.tag=0,rs&&o&&ts(e),wa(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Ha(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Dc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===I)return 11;if(t===N)return 14}return 2}(i),t=ms(i,t),r){case 0:e=Ca(null,e,i,t,n);break t;case 1:e=Ia(null,e,i,t,n);break t;case 11:e=xa(null,e,i,t,n);break t;case 14:e=Sa(null,e,i,ms(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Ca(t,e,i,r=e.elementType===i?r:ms(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ia(t,e,i,r=e.elementType===i?r:ms(i,r),n);case 3:t:{if(Pa(e),null===t)throw Error(s(387));i=e.pendingProps,r=(o=e.memoizedState).element,Ds(t,e),Fs(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Na(t,e,i,n,r=ua(Error(s(423)),e));break t}if(i!==r){e=Na(t,e,i,n,r=ua(Error(s(424)),e));break t}for(is=cr(e.stateNode.containerInfo.firstChild),ns=e,rs=!0,ss=null,n=$s(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){e=Wa(t,e,n);break t}wa(t,e,i,n)}e=e.child}return e;case 5:return so(e),null===t&&cs(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(e.flags|=32),Ta(t,e),wa(t,e,a,n),e.child;case 6:return null===t&&cs(e),null;case 13:return Fa(t,e,n);case 4:return io(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Xs(e,null,i,n):wa(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,xa(t,e,i,r=e.elementType===i?r:ms(i,r),n);case 7:return wa(t,e,e.pendingProps,n),e.child;case 8:case 12:return wa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Tr(ys,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Ar.current){e=Wa(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Os(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ss(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Es(e,n),i=i(r=ks(r)),e.flags|=1,wa(t,e,i,n),e.child;case 14:return r=ms(i=e.type,e.pendingProps),Sa(t,e,i,r=ms(i.type,r),n);case 15:return Ea(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ms(i,r),Ha(t,e),e.tag=1,Dr(i)?(t=!0,Lr(e)):t=!1,Es(e,n),Hs(e,i,r),qs(e,i,r,n),Aa(null,e,i,!0,t,n);case 19:return Ba(t,e,n);case 22:return ka(t,e,n)}throw Error(s(156,e.tag))};var Gc="function"===typeof reportError?reportError:function(t){console.error(t)};function Qc(t){this._internalRoot=t}function Yc(t){this._internalRoot=t}function Xc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Jc(){}function Zc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var t=Wc(o);a.call(t)}}Hc(e,o,t,r)}else o=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=Wc(o);s.call(t)}}var o=Bc(e,i,t,0,null,!1,0,"",Jc);return t._reactRootContainer=o,t[pr]=o.current,Bi(8===t.nodeType?t.parentNode:t),uc(),o}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var a=i;i=function(){var t=Wc(l);a.call(t)}}var l=zc(t,0,!1,null,0,!1,0,"",Jc);return t._reactRootContainer=l,t[pr]=l.current,Bi(8===t.nodeType?t.parentNode:t),uc(function(){Hc(e,l,n,i)}),l}(n,e,t,r,i);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Hc(t,e,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc(function(){Hc(null,t,null,null)}),e[pr]=null}},Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oe.length&&0!==e&&e<Oe[n].priority;n++);Oe.splice(n,0,t),0===n&&Fe(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),ic(e,$t()),0===(6&Il)&&(Bl=$t()+500,Br()))}break;case 13:uc(function(){var e=As(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}}),Kc(t,1)}},xe=function(t){if(13===t.tag){var e=As(t,134217728);if(null!==e)nc(e,t,134217728,tc());Kc(t,134217728)}},Se=function(t){if(13===t.tag){var e=ec(t),n=As(t,e);if(null!==n)nc(n,t,e,tc());Kc(t,e)}},Ee=function(){return be},ke=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},xt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wr(i);if(!r)throw Error(s(90));G(i),J(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},It=cc,At=uc;var tu={usingClientEntryPoint:!1,Events:[br,_r,wr,Tt,Ct,cc]},eu={findFiberByHostInstance:vr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=qt(t))?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{re=iu.inject(nu),se=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Xc(t))throw Error(s(299));var n=!1,i="",r=Gc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=zc(t,1,!1,null,0,n,0,i,r),t[pr]=e.current,Bi(8===t.nodeType?t.parentNode:t),new Qc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=qt(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,n){if(!$c(e))throw Error(s(200));return Zc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Xc(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Bc(e,null,t,1,null!=n?n:null,r,0,o,a),t[pr]=e.current,Bi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Yc(e)},e.render=function(t,e,n){if(!$c(e))throw Error(s(200));return Zc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!$c(t))throw Error(s(40));return!!t._reactRootContainer&&(uc(function(){Zc(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!$c(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return Zc(t,e,n,!1,i)},e.version="18.2.0-next-9e3b772b8-20220608"},740(t){"use strict";t.exports=function(t,e,n,i,r,s,o,a){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,s,o,a],u=0;(l=new Error(e.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},853(t,e,n){"use strict";t.exports=n(234)},950(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce((e,i)=>(n.f[i](t,e),e),[])),n.u=t=>"static/js/"+t+".e076ee58.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="mandarin-trainer:";n.l=(i,r,s,o)=>{if(t[i])t[i].push(r);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==e+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+s),a.src=i),t[i]=[r];var d=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=t[i];if(delete t[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach(t=>t(n)),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.p="/mandarin-trainer/",(()=>{var t={792:0};n.f.j=(e,i)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((n,i)=>r=t[e]=[n,i]);i.push(r[2]=s);var o=n.p+n.u(e),a=new Error;n.l(o,i=>{if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}},"chunk-"+e,e)}};var e=(e,i)=>{var r,s,[o,a,l]=i,c=0;if(o.some(e=>0!==t[e])){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(e&&e(i);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunkmandarin_trainer=self.webpackChunkmandarin_trainer||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t=n(43),e=n(391);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function s(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}function c(t,e){if(null==t)return{};var n,i,r=l(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var u=n(600),h=n.n(u),d=n(579);const f=["xxl","xl","lg","md","sm","xs"],p="xs",g=t.createContext({prefixes:{},breakpoints:f,minBreakpoint:p}),{Consumer:m,Provider:y}=g;function v(e,n){const{prefixes:i}=(0,t.useContext)(g);return e||i[n]||n}function b(){const{breakpoints:e}=(0,t.useContext)(g);return e}function _(){const{minBreakpoint:e}=(0,t.useContext)(g);return e}function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;const i=[];return Object.entries(t).forEach(t=>{let[r,s]=t;null!=s&&("object"===typeof s?e.forEach(t=>{const e=s[t];if(null!=e){const s=t!==n?"-".concat(t):"";i.push("".concat(r).concat(s,"-").concat(e))}}):i.push("".concat(r,"-").concat(s)))}),i}const x=["as","bsPrefix","className","direction","gap"],S=t.forwardRef((t,e)=>{let{as:n="div",bsPrefix:i,className:r,direction:s,gap:o}=t,l=c(t,x);i=v(i,"horizontal"===s?"hstack":"vstack");const u=b(),f=_();return(0,d.jsx)(n,a(a({},l),{},{ref:e,className:h()(r,i,...w({gap:o},u,f))}))});S.displayName="Stack";const E=S,k=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(k(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new C;const l=e<<2|s>>4;if(i.push(l),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I=function(t){return function(t){const e=k(t);return T.encodeByteArray(e,!0)}(t).replace(/\./g,"")},A=function(t){try{return T.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const P=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,N=()=>{try{return P()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/mandarin-trainer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyC-pDvc9tXpHkqxX-kR2FAl225GcNmmDW0",REACT_APP_FIREBASE_AUTH_DOMAIN:"mandarintrainer-26164.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"mandarintrainer-26164",REACT_APP_FIREBASE_STORAGE_BUCKET:"mandarintrainer-26164.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"391352347469",REACT_APP_FIREBASE_APP_ID:"1:391352347469:web:0d8e92faddb6367f156504",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-9EN5HCGTLJ"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&A(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},D=()=>{var t;return null===(t=N())||void 0===t?void 0:t.config};class O{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}class R extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,R.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M.prototype.create)}}class M{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(L,(t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,e):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new R(n,s,e)}}const L=/\{\$([^}]+)}/g;function F(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(j(n)&&j(s)){if(!F(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function j(t){return null!==t&&"object"===typeof t}class V{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const z="[DEFAULT]";class U{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new O;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:z})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...t.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===z?void 0:r),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.component?this.component.multipleInstances?t:z:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class B{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new U(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const H=[];var W;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(W||(W={}));const q={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},K=W.INFO,G={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},Q=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),i=G[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(t.name,":"),...s)};class Y{constructor(t){this.name=t,this._logLevel=K,this._logHandler=Q,this._userLogHandler=null,H.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in W))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?q[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}}let X,$;const J=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap;let it={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Z.get(t);if("objectStoreNames"===e)return t.objectStoreNames||tt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ot(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function rt(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(at(this),n),ot(J.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ot(t.apply(at(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=t.call(at(this),e,...i);return tt.set(s,e.sort?e.sort():[e]),ot(s)}}function st(t){return"function"===typeof t?rt(t):(t instanceof IDBTransaction&&function(t){if(Z.has(t))return;const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});Z.set(t,e)}(t),e=t,(X||(X=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(t,it):t);var e}function ot(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(ot(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return e.then(e=>{e instanceof IDBCursor&&J.set(e,t)}).catch(()=>{}),nt.set(e,t),e}(t);if(et.has(t))return et.get(t);const e=st(t);return e!==t&&(et.set(t,e),nt.set(e,t)),e}const at=t=>nt.get(t);const lt=["get","getKey","getAll","getAllKeys","count"],ct=["put","add","delete","clear"],ut=new Map;function ht(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(ut.get(e))return ut.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=ct.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!lt.includes(n))return;const s=async function(t){const e=this.transaction(t,r?"readwrite":"readonly");let s=e.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&e.done]))[0]};return ut.set(e,s),s}!function(t){it=t(it)}(t=>a(a({},t),{},{get:(e,n,i)=>ht(e,n)||t.get(e,n,i),has:(e,n)=>!!ht(e,n)||t.has(e,n)}));class dt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null}).filter(t=>t).join(" ")}}const ft="@firebase/app",pt="0.13.2",gt=new Y("@firebase/app"),mt="@firebase/app-compat",yt="@firebase/analytics-compat",vt="@firebase/analytics",bt="@firebase/app-check-compat",_t="@firebase/app-check",wt="@firebase/auth",xt="@firebase/auth-compat",St="@firebase/database",Et="@firebase/data-connect",kt="@firebase/database-compat",Tt="@firebase/functions",Ct="@firebase/functions-compat",It="@firebase/installations",At="@firebase/installations-compat",Pt="@firebase/messaging",Nt="@firebase/messaging-compat",Dt="@firebase/performance",Ot="@firebase/performance-compat",Rt="@firebase/remote-config",Mt="@firebase/remote-config-compat",Lt="@firebase/storage",Ft="@firebase/storage-compat",jt="@firebase/firestore",Vt="@firebase/ai",zt="@firebase/firestore-compat",Ut="firebase",Bt="[DEFAULT]",Ht={[ft]:"fire-core",[mt]:"fire-core-compat",[vt]:"fire-analytics",[yt]:"fire-analytics-compat",[_t]:"fire-app-check",[bt]:"fire-app-check-compat",[wt]:"fire-auth",[xt]:"fire-auth-compat",[St]:"fire-rtdb",[Et]:"fire-data-connect",[kt]:"fire-rtdb-compat",[Tt]:"fire-fn",[Ct]:"fire-fn-compat",[It]:"fire-iid",[At]:"fire-iid-compat",[Pt]:"fire-fcm",[Nt]:"fire-fcm-compat",[Dt]:"fire-perf",[Ot]:"fire-perf-compat",[Rt]:"fire-rc",[Mt]:"fire-rc-compat",[Lt]:"fire-gcs",[Ft]:"fire-gcs-compat",[jt]:"fire-fst",[zt]:"fire-fst-compat",[Vt]:"fire-vertex","fire-js":"fire-js",[Ut]:"fire-js-all"},Wt=new Map,qt=new Map,Kt=new Map;function Gt(t,e){try{t.container.addComponent(e)}catch(n){gt.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function Qt(t){const e=t.name;if(Kt.has(e))return gt.debug("There were multiple attempts to register component ".concat(e,".")),!1;Kt.set(e,t);for(const n of Wt.values())Gt(n,t);for(const n of qt.values())Gt(n,t);return!0}function Yt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xt(t){return null!==t&&void 0!==t&&void 0!==t.settings}const $t=new M("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Jt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new V("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}}const Zt="11.10.0";function te(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:Bt,automaticDataCollectionEnabled:!0},e),r=i.name;if("string"!==typeof r||!r)throw $t.create("bad-app-name",{appName:String(r)});if(n||(n=D()),!n)throw $t.create("no-options");const s=Wt.get(r);if(s){if(F(n,s.options)&&F(i,s.config))return s;throw $t.create("duplicate-app",{appName:r})}const o=new B(r);for(const l of Kt.values())o.addComponent(l);const a=new Jt(n,i,o);return Wt.set(r,a),a}function ee(t,e,n){var i;let r=null!==(i=Ht[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return s&&t.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&t.push("and"),o&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void gt.warn(t.join(" "))}Qt(new V("".concat(r,"-version"),()=>({library:r,version:e}),"VERSION"))}const ne="firebase-heartbeat-store";let ie=null;function re(){return ie||(ie=function(t,e){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(t,e),a=ot(o);return i&&o.addEventListener("upgradeneeded",t=>{i(ot(o.result),t.oldVersion,t.newVersion,ot(o.transaction),t)}),n&&o.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),a.then(t=>{s&&t.addEventListener("close",()=>s()),r&&t.addEventListener("versionchange",t=>r(t.oldVersion,t.newVersion,t))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(ne)}catch(n){console.warn(n)}}}).catch(t=>{throw $t.create("idb-open",{originalErrorMessage:t.message})})),ie}async function se(t,e){try{const n=(await re()).transaction(ne,"readwrite"),i=n.objectStore(ne);await i.put(e,oe(t)),await n.done}catch(n){if(n instanceof R)gt.warn(n.message);else{const t=$t.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});gt.warn(t.message)}}}function oe(t){return"".concat(t.name,"!").concat(t.options.appId)}class ae{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ce(e),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=le();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(t=>t.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const t=function(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){gt.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=le(),{heartbeatsToSend:n,unsentEntries:i}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=t.slice();for(const r of t){const t=n.find(t=>t.agent===r.agent);if(t){if(t.dates.push(r.date),ue(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ue(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=I(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return gt.warn(e),""}}}function le(){return(new Date).toISOString().substring(0,10)}class ce{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(t){return!1}}()&&new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await re()).transaction(ne),n=await e.objectStore(ne).get(oe(t));return await e.done,n}catch(e){if(e instanceof R)gt.warn(e.message);else{const t=$t.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});gt.warn(t.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function ue(t){return I(JSON.stringify({version:2,heartbeats:t})).length}var he;he="",Qt(new V("platform-logger",t=>new dt(t),"PRIVATE")),Qt(new V("heartbeat",t=>new ae(t),"PRIVATE")),ee(ft,pt,he),ee(ft,pt,"esm2017"),ee("fire-js","");ee("firebase","11.10.0","app");const de=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(de(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new pe;const l=e<<2|s>>4;if(i.push(l),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ge=function(t){try{return fe.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const me=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ye=()=>{try{return me()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/mandarin-trainer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyC-pDvc9tXpHkqxX-kR2FAl225GcNmmDW0",REACT_APP_FIREBASE_AUTH_DOMAIN:"mandarintrainer-26164.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"mandarintrainer-26164",REACT_APP_FIREBASE_STORAGE_BUCKET:"mandarintrainer-26164.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"391352347469",REACT_APP_FIREBASE_APP_ID:"1:391352347469:web:0d8e92faddb6367f156504",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-9EN5HCGTLJ"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&ge(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},ve=t=>{var e,n;return null===(n=null===(e=ye())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},be=t=>{var e;return null===(e=ye())||void 0===e?void 0:e["_".concat(t)]};function _e(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch(e){return!1}}const we={};let xe=!1;function Se(t,e){if("undefined"===typeof window||"undefined"===typeof document||!_e(window.location.host)||we[t]===e||we[t]||xe)return;function n(t){return"__firebase__banner__".concat(t)}we[t]=e;const i="__firebase__banner",r=function(){const t={prod:[],emulator:[]};for(const e of Object.keys(we))we[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function s(){const t=document.createElement("span");return t.style.cursor="pointer",t.style.marginLeft="16px",t.style.fontSize="24px",t.innerHTML=" &times;",t.onclick=()=>{xe=!0,function(){const t=document.getElementById(i);t&&t.remove()}()},t}function o(){const t=function(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(i),e=n("text"),o=document.getElementById(e)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(t.created){const e=t.element;!function(t){t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center"}(e),function(t,e){t.setAttribute("id",e),t.innerText="Learn more",t.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",t.setAttribute("target","__blank"),t.style.paddingLeft="5px",t.style.textDecoration="underline"}(l,a);const n=s();!function(t,e){t.setAttribute("width","24"),t.setAttribute("id",e),t.setAttribute("height","24"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none"),t.style.marginLeft="-6px"}(u,c),e.append(u,o,l,n),document.body.appendChild(e)}r?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",e)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Ee(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}class ke extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Te.prototype.create)}}class Te{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(Ce,(t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,e):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new ke(n,s,e)}}const Ce=/\{\$([^}]+)}/g;function Ie(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(Ae(n)&&Ae(s)){if(!Ie(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ae(t){return null!==t&&"object"===typeof t}function Pe(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ne(t){const e={};return t.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}}),e}function De(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class Oe{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=Re),void 0===i.error&&(i.error=Re),void 0===i.complete&&(i.complete=Re);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}}),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Re(){}function Me(t){return t&&t._delegate?t._delegate:t}function Le(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class Fe{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ve=je,ze=new Te("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ue=new Y("@firebase/auth");function Be(t){if(Ue.logLevel<=W.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];Ue.error("Auth (".concat(Zt,"): ").concat(t),...n)}}function He(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw Qe(t,...n)}function We(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Qe(t,...n)}function qe(t,e,n){const i=Object.assign(Object.assign({},Ve()),{[e]:n});return new Te("auth","Firebase",i).create(e,{appName:t.name})}function Ke(t){return qe(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ge(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&He(t,"argument-error"),qe(t,"argument-error","Type of ".concat(e.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Qe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if("string"!==typeof t){const e=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(e,...i)}return ze.create(t,...n)}function Ye(t,e){if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw Qe(e,...i)}}function Xe(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Be(e),new Error(e)}function $e(t,e){t||Xe(e)}function Je(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Ze(){return"http:"===tn()||"https:"===tn()}function tn(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function en(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ze()||function(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class nn{constructor(t,e){this.shortDelay=t,this.longDelay=e,$e(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return en()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rn(t,e){$e(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}class sn{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},an=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ln=new nn(3e4,6e4);function cn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function un(t,e,n,i){return hn(t,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=Pe(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:a},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&_e(t.emulatorConfig.host)&&(l.credentials="include"),sn.fetch()(await fn(t,t.config.apiHost,n,o),l)})}async function hn(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},on),e);try{const e=new gn(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw mn(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw mn(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw mn(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw mn(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw qe(t,a,o);He(t,a)}}catch(r){if(r instanceof ke)throw r;He(t,"network-request-failed",{message:String(r)})}}async function dn(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await un(t,e,n,i,r);return"mfaPendingCredential"in s&&He(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function fn(t,e,n,i){const r="".concat(e).concat(n,"?").concat(i),s=t,o=s.config.emulator?rn(t.config,r):"".concat(t.config.apiScheme,"://").concat(r);if(an.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function pn(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gn{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((t,e)=>{this.timer=setTimeout(()=>e(We(this.auth,"network-request-failed")),ln.get())})}}function mn(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=We(t,e,i);return r.customData._tokenResponse=n,r}function yn(t){return void 0!==t&&void 0!==t.enterprise}class vn{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return pn(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bn(t,e){return un(t,"GET","/v2/recaptchaConfig",cn(t,e))}async function _n(t,e){return un(t,"POST","/v1/accounts:lookup",e)}function wn(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function xn(t){return 1e3*Number(t)}function Sn(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Be("JWT malformed, contained fewer than 3 sections"),null;try{const t=ge(n);return t?JSON.parse(t):(Be("Failed to decode base64 JWT payload"),null)}catch(r){return Be("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function En(t){const e=Sn(t);return Ye(e,"internal-error"),Ye("undefined"!==typeof e.exp,"internal-error"),Ye("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}async function kn(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return e;try{return await e}catch(n){throw n instanceof ke&&function(t){let{code:e}=t;return e==="auth/".concat("user-disabled")||e==="auth/".concat("user-token-expired")}(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}class Tn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void((null===t||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Cn{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=wn(this.lastLoginAt),this.creationTime=wn(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function In(t){var e;const n=t.auth,i=await t.getIdToken(),r=await kn(t,_n(n,{idToken:i}));Ye(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?An(s.providerUserInfo):[],a=(l=t.providerData,c=o,[...l.filter(t=>!c.some(e=>e.providerId===t.providerId)),...c]);var l,c;const u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cn(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}function An(t){return t.map(t=>{var{providerId:e}=t,n=Le(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ye(t.idToken,"internal-error"),Ye("undefined"!==typeof t.idToken,"internal-error"),Ye("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):En(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Ye(0!==t.length,"internal-error");const e=En(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ye(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await hn(t,{},async()=>{const n=Pe({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=await fn(t,i,"/v1/token","key=".concat(r)),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return t.emulatorConfig&&_e(t.emulatorConfig.host)&&(a.credentials="include"),sn.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new Pn;return n&&(Ye("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Ye("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(Ye("number"===typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Pn,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function Nn(t,e){Ye("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class Dn{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=Le(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Cn(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await kn(this,this.stsTokenManager.getToken(this.auth,t));return Ye(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Me(t),i=await n.getIdToken(e),r=Sn(i);Ye(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:wn(xn(r.auth_time)),issuedAtTime:wn(xn(r.iat)),expirationTime:wn(xn(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=Me(t);await In(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Ye(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(t=>Object.assign({},t)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Dn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await In(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xt(this.auth.app))return Promise.reject(Ke(this.auth));const t=await this.getIdToken();return await kn(this,async function(t,e){return un(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,l,c;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=e.createdAt)&&void 0!==l?l:void 0,y=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:x}=e;Ye(v&&x,t,"internal-error");const S=Pn.fromJSON(this.name,x);Ye("string"===typeof v,t,"internal-error"),Nn(u,t.name),Nn(h,t.name),Ye("boolean"===typeof b,t,"internal-error"),Ye("boolean"===typeof _,t,"internal-error"),Nn(d,t.name),Nn(f,t.name),Nn(p,t.name),Nn(g,t.name),Nn(m,t.name),Nn(y,t.name);const E=new Dn({uid:v,auth:t,email:h,emailVerified:b,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map(t=>Object.assign({},t))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new Pn;i.updateFromServerResponse(e);const r=new Dn({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await In(r),r}static async _fromGetAccountInfoResponse(t,e,n){const i=e.users[0];Ye(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?An(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),o=new Pn;o.updateFromIdToken(n);const a=new Dn({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Cn(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(a,l),a}}const On=new Map;function Rn(t){$e(t instanceof Function,"Expected a class definition");let e=On.get(t);return e?($e(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,On.set(t,e),e)}class Mn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Mn.type="NONE";const Ln=Mn;function Fn(t,e,n){return"firebase".concat(":",t,":").concat(e,":").concat(n)}class jn{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Fn(this.userKey,i.apiKey,r),this.fullPersistenceKey=Fn("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if("string"===typeof t){const e=await _n(this.auth,{idToken:t}).catch(()=>{});return e?Dn._fromGetAccountInfoResponse(this.auth,e,t):null}return Dn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!e.length)return new jn(Rn(Ln),t,n);const i=(await Promise.all(e.map(async t=>{if(await t._isAvailable())return t}))).filter(t=>t);let r=i[0]||Rn(Ln);const s=Fn(n,t.config.apiKey,t.name);let o=null;for(const c of e)try{const e=await c._get(s);if(e){let n;if("string"===typeof e){const i=await _n(t,{idToken:e}).catch(()=>{});if(!i)break;n=await Dn._fromGetAccountInfoResponse(t,i,e)}else n=Dn._fromJSON(t,e);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter(t=>t._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map(async t=>{if(t!==r)try{await t._remove(s)}catch(l){}})),new jn(r,t,n)):new jn(r,t,n)}}function Vn(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hn(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zn(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qn(e))return"Blackberry";if(Kn(e))return"Webos";if(Un(e))return"Safari";if((e.includes("chrome/")||Bn(e))&&!e.includes("edge/"))return"Chrome";if(Wn(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function zn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();return/firefox\//i.test(t)}function Un(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee()).toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Bn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();return/crios\//i.test(t)}function Hn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();return/iemobile/i.test(t)}function Wn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();return/android/i.test(t)}function qn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();return/blackberry/i.test(t)}function Kn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();return/webos/i.test(t)}function Gn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Qn(){return function(){const t=Ee();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}function Yn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();return Gn(t)||Wn(t)||Kn(t)||qn(t)||/windows phone/i.test(t)||Hn(t)}function Xn(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case"Browser":e=Vn(Ee());break;case"Worker":e="".concat(Vn(Ee()),"-").concat(t);break;default:e=t}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(e,"/","JsCore","/").concat(Zt,"/").concat(i)}class $n{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise((n,i)=>{try{n(t(e))}catch(r){i(r)}});n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Jn{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class Zn{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ei(this),this.idTokenSubscription=new ei(this),this.beforeStateQueue=new $n(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(t=>this._resolvePersistenceManagerAvailable=t)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Rn(e)),this._initializationPromise=this.queue(async()=>{var n,i,r;if(!this._deleted&&(this.persistenceManager=await jn.create(this,t),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(i=this._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUserFromIdToken(t){try{const e=await _n(this,{idToken:t}),n=await Dn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Xt(this.app)){const t=this.app.settings.authIdToken;return t?new Promise(e=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(t).then(e,e))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await In(t)}catch(e){if((null===e||void 0===e?void 0:e.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Xt(this.app))return Promise.reject(Ke(this));const e=t?Me(t):null;return e&&Ye(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return t&&Ye(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Xt(this.app)?Promise.reject(Ke(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Xt(this.app)?Promise.reject(Ke(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rn(t))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t){return un(t,"GET","/v2/passwordPolicy",cn(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),e=new Jn(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Te("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return un(t,"POST","/v2/accounts:revokeToken",cn(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Rn(t)||this._popupRedirectResolver;Ye(e,this,"argument-error"),this.redirectPersistenceManager=await jn.create(this,[Rn(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"===typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(o,this,"internal-error"),o.then(()=>{s||r(this.currentUser)}),"function"===typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Xn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null===e||void 0===e?void 0:e.error)&&function(t){if(Ue.logLevel<=W.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];Ue.warn("Auth (".concat(Zt,"): ").concat(t),...n)}}("Error while retrieving App Check token: ".concat(e.error)),null===e||void 0===e?void 0:e.token}}function ti(t){return Me(t)}class ei{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new Oe(t,e);return n.subscribe.bind(n)}(t=>this.observer=t)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ni={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ii(t){return ni.loadJS(t)}function ri(t){return"__".concat(t).concat(Math.floor(1e6*Math.random()))}class si{constructor(){this.enterprise=new oi}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class oi{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const ai="NO_RECAPTCHA";class li{constructor(t){this.type="recaptcha-enterprise",this.auth=ti(t)}async verify(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e,n,i){const r=window.grecaptcha;yn(r)?r.enterprise.ready(()=>{r.enterprise.execute(e,{action:t}).then(t=>{n(t)}).catch(()=>{n(ai)})}):i(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new si).execute("siteKey",{action:"verify"})}return new Promise((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise(async(e,n)=>{bn(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new vn(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(t=>{n(t)})})})(this.auth).then(r=>{if(!e&&yn(window.grecaptcha))n(r,t,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let e=ni.recaptchaEnterpriseScript;0!==e.length&&(e+=r),ii(e).then(()=>{n(r,t,i)}).catch(t=>{i(t)})}}).catch(t=>{i(t)})})}}async function ci(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new li(t);let o;if(r)o=ai;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},e);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const t=a.phoneEnrollmentInfo.phoneNumber,e=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const t=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ui(t,e,n,i,r){var s,o;if("EMAIL_PASSWORD_PROVIDER"===r){if(null===(s=t._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await ci(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await ci(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)})}if("PHONE_PROVIDER"===r){if(null===(o=t._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const r=await ci(t,e,n);return i(t,r).catch(async r=>{var s;if("AUDIT"===(null===(s=t._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(r.code==="auth/".concat("missing-recaptcha-token")||r.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const r=await ci(t,e,n,!1,!0);return i(t,r)}return Promise.reject(r)})}{const r=await ci(t,e,n,!1,!0);return i(t,r)}}return Promise.reject(r+" provider is not supported.")}async function hi(t){const e=ti(t),n=await bn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new vn(n);if(null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()){new li(e).verify()}}function di(t,e,n){const i=ti(t);Ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=fi(e),{host:o,port:a}=function(t){const e=fi(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:pi(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:pi(e)}}}(e),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator)return Ye(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),void Ye(Ie(c,i.config.emulator)&&Ie(u,i.emulatorConfig),i,"emulator-config-failed");i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,_e(o)?(!async function(t){(await fetch(t,{credentials:"include"})).ok}("".concat(s,"//").concat(o).concat(l)),Se("Auth",!0)):r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function fi(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pi(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class gi{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Xe("not implemented")}_getIdTokenResponse(t){return Xe("not implemented")}_linkToIdToken(t,e){return Xe("not implemented")}_getReauthenticationResolver(t){return Xe("not implemented")}}async function mi(t,e){return un(t,"POST","/v1/accounts:signUp",e)}async function yi(t,e){return dn(t,"POST","/v1/accounts:signInWithPassword",cn(t,e))}class vi extends gi{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new vi(t,e,"password")}static _fromEmailAndCode(t,e){return new vi(t,e,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return ui(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",yi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(t,e){return dn(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,e))}(t,{email:this._email,oobCode:this._password});default:He(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return ui(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(t,e){return dn(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:He(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function bi(t,e){return dn(t,"POST","/v1/accounts:signInWithIdp",cn(t,e))}class _i extends gi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new _i(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):He("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=Le(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new _i(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return bi(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,bi(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,bi(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Pe(e)}return t}}async function wi(t,e){return un(t,"POST","/v1/accounts:sendVerificationCode",cn(t,e))}const xi={USER_NOT_FOUND:"user-not-found"};class Si extends gi{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Si({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Si({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return dn(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await dn(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,e));if(n.temporaryProof)throw mn(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return dn(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),xi)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Si({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Ei{constructor(t){var e,n,i,r,s,o;const a=Ne(De(t)),l=null!==(e=a.apiKey)&&void 0!==e?e:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Ye(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=Ne(De(t)).link,n=e?Ne(De(e)).deep_link_id:null,i=Ne(De(t)).deep_link_id;return(i?Ne(De(i)).link:null)||i||n||e||t}(t);try{return new Ei(e)}catch(n){return null}}}class ki{constructor(){this.providerId=ki.PROVIDER_ID}static credential(t,e){return vi._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Ei.parseLink(e);return Ye(n,"argument-error"),vi._fromEmailAndCode(t,n.code,n.tenantId)}}ki.PROVIDER_ID="password",ki.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ki.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ti{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ci extends Ti{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Ii extends Ci{constructor(){super("facebook.com")}static credential(t){return _i._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ii.credentialFromTaggedObject(t)}static credentialFromError(t){return Ii.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch(n){return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ii.PROVIDER_ID="facebook.com";class Ai extends Ci{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return _i._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ai.credentialFromTaggedObject(t)}static credentialFromError(t){return Ai.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ai.credential(n,i)}catch(r){return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com",Ai.PROVIDER_ID="google.com";class Pi extends Ci{constructor(){super("github.com")}static credential(t){return _i._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pi.credentialFromTaggedObject(t)}static credentialFromError(t){return Pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch(n){return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com",Pi.PROVIDER_ID="github.com";class Ni extends Ci{constructor(){super("twitter.com")}static credential(t,e){return _i._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ni.credentialFromTaggedObject(t)}static credentialFromError(t){return Ni.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ni.credential(n,i)}catch(r){return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com",Ni.PROVIDER_ID="twitter.com";class Di{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await Dn._fromIdTokenResponse(t,n,i),s=Oi(n);return new Di({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Oi(n);return new Di({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Oi(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ri extends ke{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ri.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Ri(t,e,n,i)}}function Mi(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ri._fromErrorAndOperation(t,n,e,i);throw n})}async function Li(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await kn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Di._forOperation(t,"link",i)}async function Fi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=t;if(Xt(i.app))return Promise.reject(Ke(i));const r="reauthenticate";try{const s=await kn(t,Mi(i,r,e,t),n);Ye(s.idToken,i,"internal-error");const o=Sn(s.idToken);Ye(o,i,"internal-error");const{sub:a}=o;return Ye(t.uid===a,i,"user-mismatch"),Di._forOperation(t,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&He(i,"user-mismatch"),s}}async function ji(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Xt(t.app))return Promise.reject(Ke(t));const i="signIn",r=await Mi(t,i,e),s=await Di._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function Vi(t,e){return un(t,"POST","/v2/accounts/mfaEnrollment:start",cn(t,e))}new WeakMap;const zi="__sak";class Ui{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(zi,"1"),this.storage.removeItem(zi),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Bi extends Ui{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Yn(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.key)return void this.forAllChangedKeys((t,e,n)=>{this.notifyListeners(t,n)});const n=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);Qn()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Bi.type="LOCAL";const Hi=Bi;function Wi(t){var e,n;const i=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=RegExp("".concat(i,"=([^;]+)"));return null!==(n=null===(e=document.cookie.match(r))||void 0===e?void 0:e[1])&&void 0!==n?n:null}function qi(t){const e="http:"===window.location.protocol;return"".concat(e?"__dev_":"__HOST-","FIREBASE_").concat(t.split(":")[3])}class Ki{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(t){if(void 0===typeof window)return t;const e=new URL("".concat(window.location.origin,"/__cookies__"));return e.searchParams.set("finalTarget",t),e}async _isAvailable(){var t;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(t=navigator.cookieEnabled)||void 0===t||t))}async _set(t,e){}async _get(t){if(!this._isAvailable())return null;const e=qi(t);if(window.cookieStore){const t=await window.cookieStore.get(e);return null===t||void 0===t?void 0:t.value}return Wi(e)}async _remove(t){if(!this._isAvailable())return;if(!await this._get(t))return;const e=qi(t);document.cookie="".concat(e,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(t,e){if(!this._isAvailable())return;const n=qi(t);if(window.cookieStore){const t=t=>{const i=t.changed.find(t=>t.name===n);i&&e(i.value);t.deleted.find(t=>t.name===n)&&e(null)},i=()=>window.cookieStore.removeEventListener("change",t);return this.listenerUnsubscribes.set(e,i),window.cookieStore.addEventListener("change",t)}let i=Wi(n);const r=setInterval(()=>{const t=Wi(n);t!==i&&(e(t),i=t)},1e3);this.listenerUnsubscribes.set(e,()=>clearInterval(r))}_removeListener(t,e){const n=this.listenerUnsubscribes.get(e);n&&(n(),this.listenerUnsubscribes.delete(e))}}Ki.type="COOKIE";class Gi extends Ui{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Gi.type="SESSION";const Qi=Gi;class Yi{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(e=>e.isListeningto(t));if(e)return e;const n=new Yi(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async t=>t(e.origin,r)),a=await function(t){return Promise.all(t.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Xi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}Yi.receivers=[];class $i{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const l=Xi("",20);i.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Ji(){return window}function Zi(){return"undefined"!==typeof Ji().WorkerGlobalScope&&"function"===typeof Ji().importScripts}const tr="firebaseLocalStorageDb",er="firebaseLocalStorage",nr="fbase_key";class ir{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function rr(t,e){return t.transaction([er],e?"readwrite":"readonly").objectStore(er)}function sr(){const t=indexedDB.open(tr,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const e=t.result;try{e.createObjectStore(er,{keyPath:nr})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(er)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(tr);return new ir(t).toPromise()}(),e(await sr()))})})}async function or(t,e,n){const i=rr(t,!0).put({[nr]:e,value:n});return new ir(i).toPromise()}function ar(t,e){const n=rr(t,!0).delete(e);return new ir(n).toPromise()}class lr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await sr()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yi._getInstance(Zi()?self:null),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new $i(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await sr();return await or(t,zi,"1"),await ar(t,zi),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>or(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(e=>async function(t,e){const n=rr(t,!1).get(e),i=await new ir(n).toPromise();return void 0===i?null:i.value}(e,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>ar(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(t=>{const e=rr(t,!1).getAll();return new ir(e).toPromise()});if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}lr.type="LOCAL";const cr=lr;function ur(t,e){return un(t,"POST","/v2/accounts/mfaSignIn:start",cn(t,e))}ri("rcb"),new nn(3e4,6e4);const hr="recaptcha";async function dr(t,e,n){var i;if(!t._getRecaptchaConfig())try{await hi(t)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof e?{phoneNumber:e}:e,"session"in r){const e=r.session;if("phoneNumber"in r){Ye("enroll"===e.type,t,"internal-error");const i={idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=ui(t,i,"mfaSmsEnrollment",async(t,e)=>{if(e.phoneEnrollmentInfo.captchaResponse===ai){Ye((null===n||void 0===n?void 0:n.type)===hr,t,"argument-error");return Vi(t,await fr(t,e,n))}return Vi(t,e)},"PHONE_PROVIDER");return(await s.catch(t=>Promise.reject(t))).phoneSessionInfo.sessionInfo}{Ye("signin"===e.type,t,"internal-error");const s=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;Ye(s,t,"missing-multi-factor-info");const o={mfaPendingCredential:e.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=ui(t,o,"mfaSmsSignIn",async(t,e)=>{if(e.phoneSignInInfo.captchaResponse===ai){Ye((null===n||void 0===n?void 0:n.type)===hr,t,"argument-error");return ur(t,await fr(t,e,n))}return ur(t,e)},"PHONE_PROVIDER");return(await a.catch(t=>Promise.reject(t))).phoneResponseInfo.sessionInfo}}{const e={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=ui(t,e,"sendVerificationCode",async(t,e)=>{if(e.captchaResponse===ai){Ye((null===n||void 0===n?void 0:n.type)===hr,t,"argument-error");return wi(t,await fr(t,e,n))}return wi(t,e)},"PHONE_PROVIDER");return(await i.catch(t=>Promise.reject(t))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function fr(t,e,n){Ye(n.type===hr,t,"argument-error");const i=await n.verify();Ye("string"===typeof i,t,"argument-error");const r=Object.assign({},e);if("phoneEnrollmentInfo"in r){const t=r.phoneEnrollmentInfo.phoneNumber,e=r.phoneEnrollmentInfo.captchaResponse,n=r.phoneEnrollmentInfo.clientType,s=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:i,captchaResponse:e,clientType:n,recaptchaVersion:s}}),r}if("phoneSignInInfo"in r){const t=r.phoneSignInInfo.captchaResponse,e=r.phoneSignInInfo.clientType,n=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:t,clientType:e,recaptchaVersion:n}}),r}return Object.assign(r,{recaptchaToken:i}),r}class pr{constructor(t){this.providerId=pr.PROVIDER_ID,this.auth=ti(t)}verifyPhoneNumber(t,e){return dr(this.auth,t,Me(e))}static credential(t,e){return Si._fromVerification(t,e)}static credentialFromResult(t){const e=t;return pr.credentialFromTaggedObject(e)}static credentialFromError(t){return pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Si._fromTokenResponse(n,i):null}}function gr(t,e){return e?Rn(e):(Ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}pr.PROVIDER_ID="phone",pr.PHONE_SIGN_IN_METHOD="phone";class mr extends gi{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return bi(t,this._buildIdpRequest())}_linkToIdToken(t,e){return bi(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return bi(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function yr(t){return ji(t.auth,new mr(t),t.bypassAuthState)}function vr(t){const{auth:e,user:n}=t;return Ye(n,e,"internal-error"),Fi(n,new mr(t),t.bypassAuthState)}async function br(t){const{auth:e,user:n}=t;return Ye(n,e,"internal-error"),Li(n,new mr(t),t.bypassAuthState)}class _r{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return yr;case"linkViaPopup":case"linkViaRedirect":return br;case"reauthViaPopup":case"reauthViaRedirect":return vr;default:He(this.auth,"internal-error")}}resolve(t){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wr=new nn(2e3,1e4);class xr extends _r{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,xr.currentPopupAction&&xr.currentPopupAction.cancel(),xr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ye(t,this.auth,"internal-error"),t}async onExecution(){$e(1===this.filter.length,"Popup operations only handle one event");const t=Xi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(We(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(We(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(We(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(t,wr.get())};t()}}xr.currentPopupAction=null;const Sr=new Map;class Er extends _r{constructor(t,e){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let t=Sr.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=Cr(e),i=Tr(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Sr.set(this.auth._key(),t)}return this.bypassAuthState||Sr.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function kr(t,e){Sr.set(t._key(),e)}function Tr(t){return Rn(t._redirectPersistence)}function Cr(t){return Fn("pendingRedirect",t.config.apiKey,t.name)}async function Ir(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Xt(t.app))return Promise.reject(Ke(t));const i=ti(t),r=gr(i,e),s=new Er(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Ar{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nr(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Nr(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(We(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pr(t))}saveEventToCache(t){this.cachedEventUids.add(Pr(t)),this.lastProcessedEventTime=Date.now()}}function Pr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(t=>t).join("-")}function Nr(t){let{type:e,error:n}=t;return"unknown"===e&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Or=/^https?/;async function Rr(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t){return un(t,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(t);for(const i of e)try{if(Mr(i))return}catch(n){}He(t,"unauthorized-domain")}function Mr(t){const e=Je(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Or.test(n))return!1;if(Dr.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Lr=new nn(3e4,6e4);function Fr(){const t=Ji().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function jr(t){return new Promise((e,n)=>{var i,r,s;function o(){Fr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fr(),n(We(t,"network-request-failed"))},timeout:Lr.get()})}if(null===(r=null===(i=Ji().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Ji().gapi)||void 0===s?void 0:s.load)){const e=ri("iframefcb");return Ji()[e]=()=>{gapi.load?o():n(We(t,"network-request-failed"))},ii("".concat(ni.gapiScript,"?onload=").concat(e)).catch(t=>n(t))}o()}}).catch(t=>{throw Vr=null,t})}let Vr=null;const zr=new nn(5e3,15e3),Ur={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Br=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hr(t){const e=t.config;Ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rn(e,"emulator/auth/iframe"):"https://".concat(t.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:e.apiKey,appName:t.name,v:Zt},r=Br.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(Pe(i).slice(1))}async function Wr(t){const e=await function(t){return Vr=Vr||jr(t),Vr}(t),n=Ji().gapi;return Ye(n,t,"internal-error"),e.open({where:document.body,url:Hr(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ur,dontclear:!0},e=>new Promise(async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=We(t,"network-request-failed"),s=Ji().setTimeout(()=>{i(r)},zr.get());function o(){Ji().clearTimeout(s),n(e)}e.ping(o).then(o,()=>{i(r)})}))}const qr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Gr(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qr),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Ee().toLowerCase();n&&(a=Bn(c)?"_blank":n),zn(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((t,e)=>{let[n,i]=e;return"".concat(t).concat(n,"=").concat(i,",")},"");if(function(){var t;return Gn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee())&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new Kr(null);const h=window.open(e||"",a,u);Ye(h,t,"popup-blocked");try{h.focus()}catch(d){}return new Kr(h)}const Qr="__/auth/handler",Yr="emulator/auth/handler",Xr=encodeURIComponent("fac");async function $r(t,e,n,i,r,s){Ye(t.config.authDomain,t,"auth-domain-config-required"),Ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Zt,eventId:r};if(e instanceof Ti){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof Ci){const t=e.getScopes().filter(t=>""!==t);t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await t._getAppCheckToken(),c=l?"#".concat(Xr,"=").concat(encodeURIComponent(l)):"";return"".concat(function(t){let{config:e}=t;if(!e.emulator)return"https://".concat(e.authDomain,"/").concat(Qr);return rn(e,Yr)}(t),"?").concat(Pe(a).slice(1)).concat(c)}const Jr="webStorageSupport";const Zr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qi,this._completeRedirectFn=Ir,this._overrideRedirectResult=kr}async _openPopup(t,e,n,i){var r;$e(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Gr(t,await $r(t,e,n,Je(),i),Xi())}async _openRedirect(t,e,n,i){await this._originValidation(t);return function(t){Ji().location.href=t}(await $r(t,e,n,Je(),i)),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):($e(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}async initAndGetManager(t){const e=await Wr(t),n=new Ar(t);return e.register("authEvent",e=>{Ye(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Jr,{type:Jr},n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Jr];void 0!==r&&e(!!r),He(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Rr(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Yn()||Un()||Gn()}};var ts="@firebase/auth",es="1.10.8";class ns{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const is=be("authIdTokenMaxAge")||300;let rs=null;var ss,os;ss={loadJS:t=>new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=We("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ni=ss,os="Browser",Qt(new Fe("auth",(t,e)=>{let{options:n}=e;const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Ye(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:os,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xn(os)},c=new Zn(i,r,s,l);return function(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Rn);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),Qt(new Fe("auth-internal",t=>(t=>new ns(t))(ti(t.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ee(ts,es,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(os)),ee(ts,es,"esm2017");const as=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},ls={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(as(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new cs;const l=e<<2|s>>4;if(i.push(l),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const us=function(t){try{return ls.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hs(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const ds=()=>{try{return hs().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/mandarin-trainer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyC-pDvc9tXpHkqxX-kR2FAl225GcNmmDW0",REACT_APP_FIREBASE_AUTH_DOMAIN:"mandarintrainer-26164.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"mandarintrainer-26164",REACT_APP_FIREBASE_STORAGE_BUCKET:"mandarintrainer-26164.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"391352347469",REACT_APP_FIREBASE_APP_ID:"1:391352347469:web:0d8e92faddb6367f156504",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-9EN5HCGTLJ"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&us(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}};function fs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function ps(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function gs(){var t;const e=null===(t=ds())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function ms(){return!gs()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class ys extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vs.prototype.create)}}class vs{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(bs,(t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,e):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new ys(n,s,e)}}const bs=/\{\$([^}]+)}/g;function _s(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(ws(n)&&ws(s)){if(!_s(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ws(t){return null!==t&&"object"===typeof t}function xs(t){return t&&t._delegate?t._delegate:t}class Ss{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}var Es,ks,Ts="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Cs={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function i(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,r=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=i;)n(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(r[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<e;)if(r[s++]=t[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var r={};function s(t){return-128<=t&&128>t?function(t,e){var n=r;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(t){return new i([0|t],0>t?-1:0)}):new i([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return d(o(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new i(e,0)}var a=s(0),l=s(1),c=s(16777216);function u(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new i(n,~t.h).add(l)}function f(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function g(t,e){this.g=t,this.h=e}function m(t,e){if(u(e))throw Error("division by zero");if(u(t))return new g(a,a);if(h(t))return e=m(d(t),e),new g(d(e.g),d(e.h));if(h(e))return e=m(t,d(e)),new g(d(e.g),e.h);if(30<t.g.length){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=e;0>=i.l(t);)n=y(n),i=y(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!u(i);){var c=s.add(i);0>=c.l(t)&&(r=r.add(n),s=c),i=v(i,1),n=v(n,1)}return e=f(t,r.j(e)),new g(r,e)}for(r=a;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(s=o(n)).j(e);h(c)||0<c.l(t);)c=(s=o(n-=i)).j(e);u(s)&&(s=l),r=r.add(s),t=f(t,c)}return new g(r,t)}function y(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new i(n,t.h)}function v(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],o=0;o<r;o++)s[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new i(s,t.h)}(t=i.prototype).m=function(){if(h(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.i(n);t+=(0<=i?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(u(this))return"0";if(h(this))return"-"+d(this).toString(t);for(var e=o(Math.pow(t,6)),n=this,i="";;){var r=m(n,e).g,s=((0<(n=f(n,r.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=f(this,t))?-1:u(t)?0:1},t.abs=function(){return h(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var o=r+(65535&this.i(s))+(65535&t.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(u(this)||u(t))return a;if(h(this))return h(t)?d(this).j(d(t)):d(d(this).j(t));if(h(t))return d(this.j(d(t)));if(0>this.l(c)&&0>t.l(c))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),g=t.i(s)>>>16,m=65535&t.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=l*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*g,p(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new i(n,0)},t.A=function(t){return m(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new i(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new i(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,ks=Cs.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),r=r.j(l).add(o(c))):r=(r=r.j(i)).add(o(c))}return r},Es=Cs.Integer=i}).apply("undefined"!==typeof Ts?Ts:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Is,As,Ps,Ns,Ds,Os,Rs,Ms,Ls="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Fs={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ls&&Ls];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,i){if(i)t:{var r=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in r))break t;r=r[o]}(i=i(s=r[t=t[t.length-1]]))!=s&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,r={next:function(){if(!i&&n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,function(t,e){return e})}});var i=i||{},r=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function c(t,e,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function f(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(s(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function p(t){return/^[\s\xa0]*$/.test(t)}function g(){var t=r.navigator;return t&&(t=t.userAgent)?t:""}function m(t){return m[" "](t),t}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function b(t){const e={};for(const n in t)e[n]=t[n];return e}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<_.length;e++)n=_[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function x(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function S(t){r.setTimeout(()=>{throw t},0)}function E(){var t=A;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var k=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new T,t=>t.reset());class T{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let C,I=!1,A=new class{constructor(){this.h=this.g=null}add(t,e){const n=k.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const t=r.Promise.resolve(void 0);C=()=>{t.then(N)}};var N=()=>{for(var t;t=E();){try{t.h.call(t.g)}catch(n){S(n)}var e=k;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}I=!1};function D(){this.s=this.s,this.C=this.C}function O(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};r.addEventListener("test",t,e),r.removeEventListener("test",t,e)}catch(n){}return t}();function M(t,e){if(O.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y){t:{try{m(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:L[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&M.aa.h.call(this)}}h(M,O);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function V(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++j,this.da=this.fa=!1}function z(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function U(t){this.src=t,this.g={},this.h=0}function B(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Array.prototype.indexOf.call(r,e,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(z(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function H(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}U.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=H(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new V(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var W="closure_lm_"+(1e6*Math.random()|0),q={};function K(t,e,n,i,r){if(i&&i.once)return Q(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)K(t,e[s],n,i,r);return null}return n=et(n),t&&t[F]?t.K(e,n,o(i)?!!i.capture:!!i,r):G(t,e,n,!1,i,r)}function G(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,l=Z(t);if(l||(t[W]=l=new U(t)),(n=l.add(e,n,i,a,s)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=J;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)R||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent($(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Q(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Q(t,e[s],n,i,r);return null}return n=et(n),t&&t[F]?t.L(e,n,o(i)?!!i.capture:!!i,r):G(t,e,n,!0,i,r)}function Y(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Y(t,e[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=et(n),t&&t[F]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=H(s=t.g[e],n,i,r))&&(z(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=Z(t))&&(e=t.g[e.toString()],t=-1,e&&(t=H(e,n,i,r)),(n=-1<t?e[t]:null)&&X(n))}function X(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[F])B(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent($(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Z(e))?(B(n,t),0==n.h&&(n.src=null,e[W]=null)):z(t)}}}function $(t){return t in q?q[t]:q[t]="on"+t}function J(t,e){if(t.da)t=!0;else{e=new M(e,this);var n=t.listener,i=t.ha||t.src;t.fa&&X(t),t=n.call(i,e)}return t}function Z(t){return(t=t[W])instanceof U?t:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(t){return"function"===typeof t?t:(t[tt]||(t[tt]=function(e){return t.handleEvent(e)}),t[tt])}function nt(){D.call(this),this.i=new U(this),this.M=this,this.F=null}function it(t,e){var n,i=t.F;if(i)for(n=[];i;i=i.F)n.push(i);if(t=t.M,i=e.type||e,"string"===typeof e)e=new O(e,t);else if(e instanceof O)e.target=e.target||t;else{var r=e;w(e=new O(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=rt(o,i,!0,e)&&r}if(r=rt(o=e.g=t,i,!0,e)&&r,r=rt(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=rt(o=e.g=n[s],i,!1,e)&&r}function rt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(t.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}function st(t,e,n){if("function"===typeof t)n&&(t=c(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=c(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function ot(t){t.g=st(()=>{t.g=null,t.i&&(t.i=!1,ot(t))},t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(nt,D),nt.prototype[F]=!0,nt.prototype.removeEventListener=function(t,e,n,i){Y(this,t,e,n,i)},nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)z(n[i]);delete e.g[t],e.h--}}this.F=null},nt.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},nt.prototype.L=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class at extends D{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(t){D.call(this),this.h=t,this.g={}}h(lt,D);var ct=[];function ut(t){v(t.g,function(t,e){this.g.hasOwnProperty(e)&&X(t)},t),t.g={}}lt.prototype.N=function(){lt.aa.N.call(this),ut(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=r.JSON.stringify,dt=r.JSON.parse,ft=class{stringify(t){return r.JSON.stringify(t,void 0)}parse(t){return r.JSON.parse(t,void 0)}};function pt(){}function gt(t){return t.h||(t.h=t.i())}function mt(){}pt.prototype.h=null;var yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vt(){O.call(this,"d")}function bt(){O.call(this,"c")}h(vt,O),h(bt,O);var _t={},wt=null;function xt(){return wt=wt||new nt}function St(t){O.call(this,_t.La,t)}function Et(t){const e=xt();it(e,new St(e))}function kt(t,e){O.call(this,_t.STAT_EVENT,t),this.stat=e}function Tt(t){const e=xt();it(e,new kt(e,t))}function Ct(t,e){O.call(this,_t.Ma,t),this.size=e}function It(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){t()},e)}function At(){this.g=!0}function Pt(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ht(n)}catch(a){return e}}(t,n)+(i?" "+i:"")})}_t.La="serverreachability",h(St,O),_t.STAT_EVENT="statevent",h(kt,O),_t.Ma="timingevent",h(Ct,O),At.prototype.xa=function(){this.g=!1},At.prototype.info=function(){};var Nt,Dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ot={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Rt(){}function Mt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.R=i||1,this.U=new lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lt}function Lt(){this.i=null,this.g="",this.h=!1}h(Rt,pt),Rt.prototype.g=function(){return new XMLHttpRequest},Rt.prototype.i=function(){return{}},Nt=new Rt;var Ft={},jt={};function Vt(t,e,n){t.L=1,t.v=he(oe(e)),t.m=n,t.P=!0,zt(t,null)}function zt(t,e){t.F=Date.now(),Ht(t),t.A=oe(t.v);var n=t.A,i=t.R;Array.isArray(i)||(i=[String(i)]),ke(n.i,"t",i),t.C=0,n=t.j.J,t.h=new Lt,t.g=fn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new at(c(t.Y,t,t.g),t.O)),e=t.U,n=t.g,i=t.ca;var r="readystatechange";Array.isArray(r)||(r&&(ct[0]=r.toString()),r=ct);for(var s=0;s<r.length;s++){var o=K(n,r[s],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?b(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Et(),function(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o})}(t.i,t.u,t.A,t.l,t.R,t.m)}function Ut(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function Bt(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?jt:(n=Number(e.substring(n,i)),isNaN(n)?Ft:(i+=1)+n>e.length?jt:(e=e.slice(i,i+n),t.C=i+n,e))}function Ht(t){t.S=Date.now()+t.I,Wt(t,t.I)}function Wt(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=It(c(t.ba,t),e)}function qt(t){t.B&&(r.clearTimeout(t.B),t.B=null)}function Kt(t){0==t.j.G||t.J||ln(t.j,t)}function Gt(t){qt(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ut(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Qt(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||Zt(n.h,t)))if(!t.K&&Zt(n.h,t)&&3==n.G){try{var i=n.Da.g.parse(e)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;an(n),Xe(n)}rn(n),Tt(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=It(c(n.Za,n),6e3));if(1>=Jt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((t.K||n.g==t)&&an(n),!p(e))for(r=n.Da.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const e=c[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(te(s,s.h),s.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.ya=t,ue(i.I,i.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((i=n).qa=dn(i,i.J?i.ia:null,i.W),o.K){ee(i.h,o);var a=o,l=i.L;l&&(a.I=l),a.B&&(qt(a),Ht(a)),i.g=o}else nn(i);0<n.i.length&&Je(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Ye(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Et()}catch(u){}}Mt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==qe(t)?e.j():this.Y(t)},Mt.prototype.Y=function(t){try{if(t==this.g)t:{const d=qe(this.g);var e=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ke(this.g)))){this.J||4!=d||7==e||Et(),qt(this);var n=this.g.Z();this.X=n;e:if(Ut(this)){var i=Ke(this.g);t="";var s=i.length,o=4==qe(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Gt(this),Kt(this);var a="";break e}this.h.i=new r.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:!(o&&e==s-1)});i.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break e}}u=null}if(!(n=u)){this.o=!1,this.s=3,Tt(12),Gt(this),Kt(this);break t}Pt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qt(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=Bt(this,a),t==jt){4==d&&(this.s=4,Tt(14),n=!1),Pt(this.i,this.l,null,"[Incomplete Response]");break}if(t==Ft){this.s=4,Tt(15),Pt(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pt(this.i,this.l,t,null),Qt(this,t)}if(Ut(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Tt(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Tt(11))}}else Pt(this.i,this.l,a,"[Invalid Chunked Response]"),Gt(this),Kt(this)}else Pt(this.i,this.l,a,null),Qt(this,a);4==d&&Gt(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,Ht(this)))}else(function(t){const e={};t=(t.g&&2<=qe(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(p(t[i]))continue;var n=x(t[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(t){return t.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Gt(this),Kt(this)}}}catch(d){}},Mt.prototype.cancel=function(){this.J=!0,Gt(this)},Mt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.i,this.A),2!=this.L&&(Et(),Tt(17)),Gt(this),this.s=2,Kt(this)):Wt(this,this.S-t)};var Yt=class{constructor(t,e){this.g=t,this.map=e}};function Xt(t){this.l=t||10,r.PerformanceNavigationTiming?t=0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $t(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Jt(t){return t.h?1:t.g?t.g.size:0}function Zt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function te(t,e){t.g?t.g.add(e):t.h=e}function ee(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ne(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(s(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}Xt.prototype.cancel=function(){if(this.i=ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function se(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof se){this.h=t.h,ae(this,t.j),this.o=t.o,this.g=t.g,le(this,t.s),this.l=t.l;var e=t.i,n=new we;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ce(this,n),this.m=t.m}else t&&(e=String(t).match(re))?(this.h=!1,ae(this,e[1]||"",!0),this.o=de(e[2]||""),this.g=de(e[3]||"",!0),le(this,e[4]),this.l=de(e[5]||"",!0),ce(this,e[6]||"",!0),this.m=de(e[7]||"")):(this.h=!1,this.i=new we(null,this.h))}function oe(t){return new se(t)}function ae(t,e,n){t.j=n?de(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function ce(t,e,n){e instanceof we?(t.i=e,function(t,e){e&&!t.j&&(xe(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Se(this,e),ke(this,n,t))},t)),t.j=e}(t.i,t.h)):(n||(e=fe(e,be)),t.i=new we(e,t.h))}function ue(t,e,n){t.i.set(e,n)}function he(t){return ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function de(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fe(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,pe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}se.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fe(e,me,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(fe(e,me,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(fe(n,"/"==n.charAt(0)?ve:ye,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",fe(n,_e)),t.join("")};var ge,me=/[#\/\?@]/g,ye=/[#\?:]/g,ve=/[#\?]/g,be=/[#\?@]/g,_e=/#/g;function we(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xe(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Se(t,e){xe(t),e=Te(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ee(t,e){return xe(t),e=Te(t,e),t.g.has(e)}function ke(t,e,n){Se(t,e),0<n.length&&(t.i=null,t.g.set(Te(t,e),d(n)),t.h+=n.length)}function Te(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ce(t,e,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function Ie(){this.g=new ft}function Ae(t,e,n){const i=n||"";try{ie(t,function(t,n){let r=t;o(t)&&(r=ht(t)),e.push(i+n+"="+encodeURIComponent(r))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Pe(t){this.l=t.Ub||null,this.j=t.eb||!1}function Ne(t,e){nt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function De(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function Oe(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Re(t)}function Re(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Me(t){let e="";return v(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function Le(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Me(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):ue(t,e,n))}function Fe(t){nt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=we.prototype).add=function(t,e){xe(this),this.i=null,t=Te(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){xe(this),this.g.forEach(function(n,i){n.forEach(function(n){t.call(e,n,i,this)},this)},this)},t.na=function(){xe(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},t.V=function(t){xe(this);let e=[];if("string"===typeof t)Ee(this,t)&&(e=e.concat(this.g.get(Te(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return xe(this),this.i=null,Ee(this,t=Te(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")},h(Pe,pt),Pe.prototype.g=function(){return new Ne(this.l,this.j)},Pe.prototype.i=(ge={},function(){return ge}),h(Ne,nt),(t=Ne.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Re(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||r).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oe(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Re(this)),this.g&&(this.readyState=3,Re(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;De(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Oe(this):Re(this),3==this.readyState&&De(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,Oe(this))},t.Qa=function(t){this.g&&(this.response=t,Oe(this))},t.ga=function(){this.g&&Oe(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ne.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Fe,nt);var je=/^https?$/i,Ve=["POST","PUT"];function ze(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Ue(t),He(t)}function Ue(t){t.A||(t.A=!0,it(t,"complete"),it(t,"error"))}function Be(t){if(t.h&&"undefined"!=typeof i&&(!t.v[1]||4!=qe(t)||2!=t.Z()))if(t.u&&4==qe(t))st(t.Ea,0,t);else if(it(t,"readystatechange"),4==qe(t)){t.h=!1;try{const i=t.Z();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===i){var o=String(t.D).match(re)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!je.test(o?o.toLowerCase():"")}n=s}if(n)it(t,"complete"),it(t,"success");else{t.m=6;try{var a=2<qe(t)?t.g.statusText:""}catch(l){a=""}t.l=a+" ["+t.Z()+"]",Ue(t)}}finally{He(t)}}}function He(t,e){if(t.g){We(t);const i=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||it(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function We(t){t.I&&(r.clearTimeout(t.I),t.I=null)}function qe(t){return t.g?t.g.readyState:0}function Ke(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ge(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qe(t){this.Aa=0,this.i=[],this.j=new At,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ge("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ge("baseRetryDelayMs",5e3,t),this.cb=Ge("retryDelaySeedMs",1e4,t),this.Wa=Ge("forwardChannelMaxRetries",2,t),this.wa=Ge("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new Xt(t&&t.concurrentRequestLimit),this.Da=new Ie,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ye(t){if($e(t),3==t.G){var e=t.U++,n=oe(t.I);if(ue(n,"SID",t.K),ue(n,"RID",e),ue(n,"TYPE","terminate"),tn(t,n),(e=new Mt(t,t.j,e)).L=2,e.v=he(oe(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=e.v,n=!0),n||(e.g=fn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),Ht(e)}hn(t)}function Xe(t){t.g&&(sn(t),t.g.cancel(),t.g=null)}function $e(t){Xe(t),t.u&&(r.clearTimeout(t.u),t.u=null),an(t),t.h.cancel(),t.s&&("number"===typeof t.s&&r.clearTimeout(t.s),t.s=null)}function Je(t){if(!$t(t.h)&&!t.s){t.s=!0;var e=t.Ga;C||P(),I||(C(),I=!0),A.add(e,t),t.B=0}}function Ze(t,e){var n;n=e?e.l:t.U++;const i=oe(t.I);ue(i,"SID",t.K),ue(i,"RID",n),ue(i,"AID",t.T),tn(t,i),t.m&&t.o&&Le(i,t.m,t.o),n=new Mt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=en(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),te(t.h,n),Vt(n,i,e)}function tn(t,e){t.H&&v(t.H,function(t,n){ue(e,n,t)}),t.l&&ie({},function(t,n){ue(e,n,t)})}function en(t,e,n){n=Math.min(t.i.length,n);var i=t.l?c(t.l.Na,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),o=!1;else try{Ae(l,t,"req"+n+"_")}catch(s){i&&i(l)}}if(o){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function nn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;C||P(),I||(C(),I=!0),A.add(e,t),t.v=0}}function rn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=It(c(t.Fa,t),cn(t,t.v)),t.v++,!0)}function sn(t){null!=t.A&&(r.clearTimeout(t.A),t.A=null)}function on(t){t.g=new Mt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=oe(t.qa);ue(e,"RID","rpc"),ue(e,"SID",t.K),ue(e,"AID",t.T),ue(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&ue(e,"TO",t.ja),ue(e,"TYPE","xmlhttp"),tn(t,e),t.m&&t.o&&Le(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=he(oe(e)),n.m=null,n.P=!0,zt(n,t)}function an(t){null!=t.C&&(r.clearTimeout(t.C),t.C=null)}function ln(t,e){var n=null;if(t.g==e){an(t),sn(t),t.g=null;var i=2}else{if(!Zt(t.h,e))return;n=e.D,ee(t.h,e),i=1}if(0!=t.G)if(e.o)if(1==i){n=e.m?e.m.length:0,e=Date.now()-e.F;var r=t.B;it(i=xt(),new Ct(i,n)),Je(t)}else nn(t);else if(3==(r=e.s)||0==r&&0<e.X||!(1==i&&function(t,e){return!(Jt(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=It(c(t.Ga,t,e),cn(t,t.B)),t.B++,!0))}(t,e)||2==i&&rn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:un(t,5);break;case 4:un(t,10);break;case 3:un(t,6);break;default:un(t,2)}}function cn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function un(t,e){if(t.j.info("Error code "+e),2==e){var n=c(t.fb,t),i=t.Xa;const e=!i;i=new se(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||ae(i,"https"),he(i),e?function(t,e){const n=new At;if(r.Image){const i=new Image;i.onload=u(Ce,n,"TestLoadImage: loaded",!0,e,i),i.onerror=u(Ce,n,"TestLoadImage: error",!1,e,i),i.onabort=u(Ce,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=u(Ce,n,"TestLoadImage: timeout",!1,e,i),r.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new At;const n=new AbortController,i=setTimeout(()=>{n.abort(),Ce(0,0,!1,e)},1e4);fetch(t,{signal:n.signal}).then(t=>{clearTimeout(i),t.ok?Ce(0,0,!0,e):Ce(0,0,!1,e)}).catch(()=>{clearTimeout(i),Ce(0,0,!1,e)})}(i.toString(),n)}else Tt(2);t.G=0,t.l&&t.l.sa(e),hn(t),$e(t)}function hn(t){if(t.G=0,t.ka=[],t.l){const e=ne(t.h);0==e.length&&0==t.i.length||(f(t.ka,e),f(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function dn(t,e,n){var i=n instanceof se?oe(n):new se(n);if(""!=i.g)e&&(i.g=e+"."+i.g),le(i,i.s);else{var s=r.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new se(null);i&&ae(o,i),e&&(o.g=e),s&&le(o,s),n&&(o.l=n),i=o}return n=t.D,e=t.ya,n&&e&&ue(i,n,e),ue(i,"VER",t.la),tn(t,i),i}function fn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Fe(new Pe({eb:n})):new Fe(t.pa)).Ha(t.J),e}function pn(){}function gn(){}function mn(t,e){nt.call(this),this.g=new Qe(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!p(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new bn(this)}function yn(t){vt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function vn(){bt.call(this),this.status=1}function bn(t){this.g=t}(t=Fe.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nt.g(),this.v=this.o?gt(this.o):gt(Nt),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void ze(this,o)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find(t=>"content-type"==t.toLowerCase()),s=r.FormData&&t instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Ve,e,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{We(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){ze(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,it(this,"complete"),it(this,"abort"),He(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),He(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Be(this):this.bb())},t.bb=function(){Be(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<qe(this)?this.g.status:-1}catch(ge){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(ge){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=Qe.prototype).la=8,t.G=1,t.connect=function(t,e,n,i){Tt(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=dn(this,null,this.W),Je(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Mt(this,this.j,t);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=en(this,r,e),ue(n=oe(this.I),"RID",t),ue(n,"CVER",22),this.D&&ue(n,"X-HTTP-Session-Id",this.D),tn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Me(s)))+"&"+e:this.m&&Le(n,this.m,s)),te(this.h,r),this.Ua&&ue(n,"TYPE","init"),this.P?(ue(n,"$req",e),ue(n,"SID","null"),r.T=!0,Vt(r,n,null)):Vt(r,n,e),this.G=2}}else 3==this.G&&(t?Ze(this,t):0==this.i.length||$t(this.h)||Ze(this))},t.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=It(c(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Xe(this),on(this))},t.Za=function(){null!=this.C&&(this.C=null,Xe(this),rn(this),Tt(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=pn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},gn.prototype.g=function(t,e){return new mn(t,e)},h(mn,nt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Ye(this.g)},mn.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=ht(t),t=n);e.i.push(new Yt(e.Ya++,t)),3==e.G&&Je(e)},mn.prototype.N=function(){this.g.l=null,delete this.j,Ye(this.g),delete this.g,mn.aa.N.call(this)},h(yn,vt),h(vn,bt),h(bn,pn),bn.prototype.ua=function(){it(this.g,"a")},bn.prototype.ta=function(t){it(this.g,new yn(t))},bn.prototype.sa=function(t){it(this.g,new vn)},bn.prototype.ra=function(){it(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Ms=Fs.createWebChannelTransport=function(){return new gn},Rs=Fs.getStatEventTarget=function(){return xt()},Os=Fs.Event=_t,Ds=Fs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,Ns=Fs.ErrorCode=Dt,Ot.COMPLETE="complete",Ps=Fs.EventType=Ot,mt.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",nt.prototype.listen=nt.prototype.K,As=Fs.WebChannel=mt,Fs.FetchXmlHttpFactory=Pe,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Is=Fs.XhrIo=Fe}).apply("undefined"!==typeof Ls?Ls:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const js="@firebase/firestore",Vs="4.8.0";class zs{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}zs.UNAUTHENTICATED=new zs(null),zs.GOOGLE_CREDENTIALS=new zs("google-credentials-uid"),zs.FIRST_PARTY=new zs("first-party-uid"),zs.MOCK_USER=new zs("mock-user");let Us="11.10.0";const Bs=new Y("@firebase/firestore");function Hs(){return Bs.logLevel}function Ws(t){if(Bs.logLevel<=W.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Gs);Bs.debug("Firestore (".concat(Us,"): ").concat(t),...r)}}function qs(t){if(Bs.logLevel<=W.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Gs);Bs.error("Firestore (".concat(Us,"): ").concat(t),...r)}}function Ks(t){if(Bs.logLevel<=W.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Gs);Bs.warn("Firestore (".concat(Us,"): ").concat(t),...r)}}function Gs(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Qs(t,e,n){let i="Unexpected state";"string"==typeof e?i=e:n=e,Ys(t,i,n)}function Ys(t,e,n){let i="FIRESTORE (".concat(Us,") INTERNAL ASSERTION FAILED: ").concat(e," (ID: ").concat(t.toString(16),")");if(void 0!==n)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(t){i+=" CONTEXT: "+n}throw qs(i),new Error(i)}function Xs(t,e,n,i){let r="Unexpected state";"string"==typeof n?r=n:i=n,t||Ys(e,r,i)}function $s(t,e){return t}const Js={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zs extends ys{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class to{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class eo{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class no{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(zs.UNAUTHENTICATED))}shutdown(){}}class io{constructor(t){this.t=t,this.currentUser=zs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Xs(void 0===this.o,42304);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new to;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new to,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const e=r;t.enqueueRetryable(async()=>{await e.promise,await i(this.currentUser)})},o=t=>{Ws("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(t=>o(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ws("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new to)}},0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(Ws("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Xs("string"==typeof e.accessToken,31837,{l:e}),new eo(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Xs(null===t||"string"==typeof t,2055,{h:t}),new zs(t)}}class ro{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=zs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class so{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new ro(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(zs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oo{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ao{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xt(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Xs(void 0===this.o,3512);const n=t=>{null!=t.error&&Ws("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.m;return this.m=t.token,Ws("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable(()=>n(e))};const i=t=>{Ws("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(t=>i(t)),setTimeout(()=>{if(!this.appCheck){const t=this.V.getImmediate({optional:!0});t?i(t):Ws("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oo(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?(Xs("string"==typeof t.token,44558,{tokenResult:t}),this.m=t.token,new oo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lo(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}function co(){return new TextEncoder}class uo{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=lo(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function ho(t,e){return t<e?-1:t>e?1:0}function fo(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return ho(i,r);{const s=co(),o=go(s.encode(po(t,n)),s.encode(po(e,n)));return 0!==o?o:ho(i,r)}}n+=i>65535?2:1}return ho(t.length,e.length)}function po(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function go(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ho(t[n],e[n]);return ho(t.length,e.length)}function mo(t,e,n){return t.length===e.length&&t.every((t,i)=>n(t,e[i]))}const yo="__name__";class vo{constructor(t,e,n){void 0===e?e=0:e>t.length&&Qs(637,{offset:e,range:t.length}),void 0===n?n=t.length-e:n>t.length-e&&Qs(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===vo.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof vo?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=vo.compareSegments(t.get(i),e.get(i));if(0!==n)return n}return ho(t.length,e.length)}static compareSegments(t,e){const n=vo.isNumericId(t),i=vo.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?vo.extractNumericId(t).compare(vo.extractNumericId(e)):fo(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Es.fromString(t.substring(4,t.length-2))}}class bo extends vo{construct(t,e,n){return new bo(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Zs(Js.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter(t=>t.length>0))}return new bo(t)}static emptyPath(){return new bo([])}}const _o=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wo extends vo{construct(t,e,n){return new wo(t,e,n)}static isValidIdentifier(t){return _o.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===yo}static keyField(){return new wo([yo])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Zs(Js.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Zs(Js.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Zs(Js.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Zs(Js.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new wo(e)}static emptyPath(){return new wo([])}}class xo{constructor(t){this.path=t}static fromPath(t){return new xo(bo.fromString(t))}static fromName(t){return new xo(bo.fromString(t).popFirst(5))}static empty(){return new xo(bo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===bo.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return bo.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xo(new bo(t.slice()))}}function So(t,e,n){if(!n)throw new Zs(Js.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function Eo(t){if(!xo.isDocumentKey(t))throw new Zs(Js.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function ko(t){if(xo.isDocumentKey(t))throw new Zs(Js.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function To(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Co(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":Qs(12329,{type:typeof t})}function Io(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Zs(Js.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Co(t);throw new Zs(Js.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}function Ao(t,e){if(e<=0)throw new Zs(Js.INVALID_ARGUMENT,"Function ".concat(t,"() requires a positive number, but it was: ").concat(e,"."))}function Po(t,e){const n={typeString:t};return e&&(n.value=e),n}function No(t,e){if(!To(t))throw new Zs(Js.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n="JSON missing required field: '".concat(i,"'");break}const o=t[i];if(r&&typeof o!==r){n="JSON field '".concat(i,"' must be a ").concat(r,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(i,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Zs(Js.INVALID_ARGUMENT,n);return!0}const Do=-62135596800,Oo=1e6;class Ro{static now(){return Ro.fromMillis(Date.now())}static fromDate(t){return Ro.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*Oo);return new Ro(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Zs(Js.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Zs(Js.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Do)throw new Zs(Js.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Zs(Js.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Oo}_compareTo(t){return this.seconds===t.seconds?ho(this.nanoseconds,t.nanoseconds):ho(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ro._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(No(t,Ro._jsonSchema))return new Ro(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Do;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ro._jsonSchemaVersion="firestore/timestamp/1.0",Ro._jsonSchema={type:Po("string",Ro._jsonSchemaVersion),seconds:Po("number"),nanoseconds:Po("number")};class Mo{static fromTimestamp(t){return new Mo(t)}static min(){return new Mo(new Ro(0,0))}static max(){return new Mo(new Ro(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Lo=-1;class Fo{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}Fo.UNKNOWN_ID=-1;function jo(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Mo.fromTimestamp(1e9===i?new Ro(n+1,0):new Ro(n,i));return new zo(r,xo.empty(),e)}function Vo(t){return new zo(t.readTime,t.key,Lo)}class zo{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new zo(Mo.min(),xo.empty(),Lo)}static max(){return new zo(Mo.max(),xo.empty(),Lo)}}function Uo(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=xo.comparator(t.documentKey,e.documentKey),0!==n?n:ho(t.largestBatchId,e.largestBatchId))}const Bo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ho{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}async function Wo(t){if(t.code!==Js.FAILED_PRECONDITION||t.message!==Bo)throw t;Ws("LocalStore","Unexpectedly lost primary lease")}class qo{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Qs(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new qo((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof qo?e:qo.resolve(e)}catch(t){return qo.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):qo.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):qo.reject(e)}static resolve(t){return new qo((e,n)=>{e(t)})}static reject(t){return new qo((e,n)=>{n(t)})}static waitFor(t){return new qo((e,n)=>{let i=0,r=0,s=!1;t.forEach(t=>{++i,t.next(()=>{++r,s&&r===i&&e()},t=>n(t))}),s=!0,r===i&&e()})}static or(t){let e=qo.resolve(!1);for(const n of t)e=e.next(t=>t?qo.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,i)=>{n.push(e.call(this,t,i))}),this.waitFor(n)}static mapArray(t,e){return new qo((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;e(t[l]).next(t=>{s[l]=t,++o,o===r&&n(s)},t=>i(t))}})}static doWhile(t,e){return new qo((n,i)=>{const r=()=>{!0===t()?e().next(()=>{r()},i):n()};r()})}}function Ko(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Go(t){return"IndexedDbTransactionError"===t.name}class Qo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this._e(t),this.ae=t=>e.writeSequenceNumber(t))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Qo.ue=-1;const Yo=-1;function Xo(t){return null==t}function $o(t){return 0===t&&1/t==-1/0}function Jo(t){return"number"==typeof t&&Number.isInteger(t)&&!$o(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Zo="\x01";function ta(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=na(e)),e=ea(t.get(n),e);return na(e)}function ea(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="\x01\x10";break;case Zo:n+="\x01\x11";break;default:n+=e}}return n}function na(t){return t+Zo+"\x01"}const ia="remoteDocuments",ra="owner",sa="mutationQueues",oa="mutations";const aa="documentMutations",la="remoteDocumentsV14",ca="remoteDocumentGlobal",ua="targets",ha="targetDocuments",da="targetGlobal",fa="collectionParents",pa="clientMetadata",ga="bundles",ma="namedQueries",ya="indexConfiguration",va="indexState",ba="indexEntries",_a="documentOverlays",wa="globals",xa=[sa,oa,aa,ia,ua,ra,da,ha,pa,ca,fa,ga,ma],Sa=[sa,oa,aa,la,ua,ra,da,ha,pa,ca,fa,ga,ma,_a],Ea=Sa,ka=[...Ea,ya,va,ba];function Ta(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ca(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ia(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Aa{constructor(t,e){this.comparator=t,this.root=e||Na.EMPTY}insert(t,e){return new Aa(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Na.BLACK,null,null))}remove(t){return new Aa(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Na.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push("".concat(e,":").concat(n)),!1)),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Pa(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Pa(this.root,t,this.comparator,!1)}getReverseIterator(){return new Pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Pa(this.root,t,this.comparator,!0)}}class Pa{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Na{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Na.RED,this.left=null!=i?i:Na.EMPTY,this.right=null!=r?r:Na.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Na(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Na.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Na.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Na.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Na.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qs(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qs(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Qs(27949);return t+(this.isRed()?0:1)}}Na.EMPTY=null,Na.RED=!0,Na.BLACK=!1,Na.EMPTY=new class{constructor(){this.size=0}get key(){throw Qs(57766)}get value(){throw Qs(16141)}get color(){throw Qs(16727)}get left(){throw Qs(29726)}get right(){throw Qs(36894)}copy(t,e,n,i,r){return this}insert(t,e,n){return new Na(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Da{constructor(t){this.comparator=t,this.data=new Aa(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Oa(this.data.getIterator())}getIteratorFrom(t){return new Oa(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof Da))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Da(this.comparator);return e.data=t,e}}class Oa{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ra{constructor(t){this.fields=t,t.sort(wo.comparator)}static empty(){return new Ra([])}unionWith(t){let e=new Da(wo.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ra(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return mo(this.fields,t.fields,(t,e)=>t.isEqual(e))}}class Ma extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class La{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Ma("Invalid base64 string: "+t):t}}(t);return new La(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new La(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ho(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}La.EMPTY_BYTE_STRING=new La("");const Fa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(t){if(Xs(!!t,39018),"string"==typeof t){let e=0;const n=Fa.exec(t);if(Xs(!!n,46558,{timestamp:t}),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Va(t.seconds),nanos:Va(t.nanos)}}function Va(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function za(t){return"string"==typeof t?La.fromBase64String(t):La.fromUint8Array(t)}const Ua="server_timestamp",Ba="__type__",Ha="__previous_value__",Wa="__local_write_time__";function qa(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[Ba])||void 0===n?void 0:n.stringValue)===Ua}function Ka(t){const e=t.mapValue.fields[Ha];return qa(e)?Ka(e):e}function Ga(t){const e=ja(t.mapValue.fields[Wa].timestampValue);return new Ro(e.seconds,e.nanos)}class Qa{constructor(t,e,n,i,r,s,o,a,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Ya="(default)";class Xa{constructor(t,e){this.projectId=t,this.database=e||Ya}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database===Ya}isEqual(t){return t instanceof Xa&&t.projectId===this.projectId&&t.database===this.database}}const $a="__type__",Ja="__max__",Za={mapValue:{fields:{__type__:{stringValue:Ja}}}},tl="__vector__",el="value";function nl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qa(t)?4:bl(t)?9007199254740991:yl(t)?10:11:Qs(28295,{value:t})}function il(t,e){if(t===e)return!0;const n=nl(t);if(n!==nl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ga(t).isEqual(Ga(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ja(t.timestampValue),i=ja(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return za(t.bytesValue).isEqual(za(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Va(t.geoPointValue.latitude)===Va(e.geoPointValue.latitude)&&Va(t.geoPointValue.longitude)===Va(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Va(t.integerValue)===Va(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Va(t.doubleValue),i=Va(e.doubleValue);return n===i?$o(n)===$o(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return mo(t.arrayValue.values||[],e.arrayValue.values||[],il);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Ta(n)!==Ta(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!il(n[r],i[r])))return!1;return!0}(t,e);default:return Qs(52216,{left:t})}}function rl(t,e){return void 0!==(t.values||[]).find(t=>il(t,e))}function sl(t,e){if(t===e)return 0;const n=nl(t),i=nl(e);if(n!==i)return ho(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ho(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Va(t.integerValue||t.doubleValue),i=Va(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ol(t.timestampValue,e.timestampValue);case 4:return ol(Ga(t),Ga(e));case 5:return fo(t.stringValue,e.stringValue);case 6:return function(t,e){const n=za(t),i=za(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=ho(n[r],i[r]);if(0!==t)return t}return ho(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=ho(Va(t.latitude),Va(e.latitude));return 0!==n?n:ho(Va(t.longitude),Va(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return al(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,r,s;const o=t.fields||{},a=e.fields||{},l=null===(n=o[el])||void 0===n?void 0:n.arrayValue,c=null===(i=a[el])||void 0===i?void 0:i.arrayValue,u=ho((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:al(l,c)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===Za.mapValue&&e===Za.mapValue)return 0;if(t===Za.mapValue)return 1;if(e===Za.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=fo(i[o],s[o]);if(0!==t)return t;const e=sl(n[i[o]],r[s[o]]);if(0!==e)return e}return ho(i.length,s.length)}(t.mapValue,e.mapValue);default:throw Qs(23264,{le:n})}}function ol(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ho(t,e);const n=ja(t),i=ja(e),r=ho(n.seconds,i.seconds);return 0!==r?r:ho(n.nanos,i.nanos)}function al(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=sl(n[r],i[r]);if(t)return t}return ho(n.length,i.length)}function ll(t){return cl(t)}function cl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ja(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return za(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return xo.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=cl(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+="".concat(r,":").concat(cl(t.fields[r]));return n+"}"}(t.mapValue):Qs(61005,{value:t})}function ul(t){switch(nl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ka(t);return e?16+ul(e):16;case 5:return 2*t.stringValue.length;case 6:return za(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(t){return(t.values||[]).reduce((t,e)=>t+ul(e),0)}(t.arrayValue);case 10:case 11:return function(t){let e=0;return Ca(t.fields,(t,n)=>{e+=t.length+ul(n)}),e}(t.mapValue);default:throw Qs(13486,{value:t})}}function hl(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function dl(t){return!!t&&"integerValue"in t}function fl(t){return!!t&&"arrayValue"in t}function pl(t){return!!t&&"nullValue"in t}function gl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ml(t){return!!t&&"mapValue"in t}function yl(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[$a])||void 0===n?void 0:n.stringValue)===tl}function vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ca(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=vl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bl(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Ja}class _l{constructor(t){this.value=t}static empty(){return new _l({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ml(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=vl(e)}setAll(t){let e=wo.emptyPath(),n={},i=[];t.forEach((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=vl(t):i.push(r.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());ml(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return il(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];ml(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Ca(e,(e,n)=>t[e]=n);for(const i of n)delete t[i]}clone(){return new _l(vl(this.value))}}function wl(t){const e=[];return Ca(t.fields,(t,n)=>{const i=new wo([t]);if(ml(n)){const t=wl(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)}),new Ra(e)}class xl{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new xl(t,0,Mo.min(),Mo.min(),Mo.min(),_l.empty(),0)}static newFoundDocument(t,e,n,i){return new xl(t,1,e,Mo.min(),n,i,0)}static newNoDocument(t,e){return new xl(t,2,e,Mo.min(),Mo.min(),_l.empty(),0)}static newUnknownDocument(t,e){return new xl(t,3,e,Mo.min(),Mo.min(),_l.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Mo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_l.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_l.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mo.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof xl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new xl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Sl{constructor(t,e){this.position=t,this.inclusive=e}}function El(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?xo.comparator(xo.fromName(o.referenceValue),n.key):sl(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function kl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!il(t.position[n],e.position[n]))return!1;return!0}class Tl{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function Cl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Il{}class Al extends Il{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Fl(t,e,n):"array-contains"===e?new Ul(t,n):"in"===e?new Bl(t,n):"not-in"===e?new Hl(t,n):"array-contains-any"===e?new Wl(t,n):new Al(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new jl(t,n):new Vl(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&void 0===e.nullValue&&this.matchesComparison(sl(e,this.value)):null!==e&&nl(this.value)===nl(e)&&this.matchesComparison(sl(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Qs(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pl extends Il{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new Pl(t,e)}matches(t){return Nl(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Nl(t){return"and"===t.op}function Dl(t){return Ol(t)&&Nl(t)}function Ol(t){for(const e of t.filters)if(e instanceof Pl)return!1;return!0}function Rl(t){if(t instanceof Al)return t.field.canonicalString()+t.op.toString()+ll(t.value);if(Dl(t))return t.filters.map(t=>Rl(t)).join(",");{const e=t.filters.map(t=>Rl(t)).join(",");return"".concat(t.op,"(").concat(e,")")}}function Ml(t,e){return t instanceof Al?function(t,e){return e instanceof Al&&t.op===e.op&&t.field.isEqual(e.field)&&il(t.value,e.value)}(t,e):t instanceof Pl?function(t,e){return e instanceof Pl&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce((t,n,i)=>t&&Ml(n,e.filters[i]),!0)}(t,e):void Qs(19439)}function Ll(t){return t instanceof Al?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(ll(t.value))}(t):t instanceof Pl?function(t){return t.op.toString()+" {"+t.getFilters().map(Ll).join(" ,")+"}"}(t):"Filter"}class Fl extends Al{constructor(t,e,n){super(t,e,n),this.key=xo.fromName(n.referenceValue)}matches(t){const e=xo.comparator(t.key,this.key);return this.matchesComparison(e)}}class jl extends Al{constructor(t,e){super(t,"in",e),this.keys=zl("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Vl extends Al{constructor(t,e){super(t,"not-in",e),this.keys=zl("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function zl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>xo.fromName(t.referenceValue))}class Ul extends Al{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return fl(e)&&rl(e.arrayValue,this.value)}}class Bl extends Al{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&rl(this.value.arrayValue,e)}}class Hl extends Al{constructor(t,e){super(t,"not-in",e)}matches(t){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&void 0===e.nullValue&&!rl(this.value.arrayValue,e)}}class Wl extends Al{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!fl(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>rl(this.value.arrayValue,t))}}class ql{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.Pe=null}}function Kl(t){return new ql(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Gl(t){const e=$s(t);if(null===e.Pe){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>Rl(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>function(t){return t.field.canonicalString()+t.dir}(t)).join(","),Xo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(t=>ll(t)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(t=>ll(t)).join(",")),e.Pe=t}return e.Pe}function Ql(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Cl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ml(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kl(t.startAt,e.startAt)&&kl(t.endAt,e.endAt)}function Yl(t){return xo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Xl{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function $l(t,e,n,i,r,s,o,a){return new Xl(t,e,n,i,r,s,o,a)}function Jl(t){return new Xl(t)}function Zl(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function tc(t){return null!==t.collectionGroup}function ec(t){const e=$s(t);if(null===e.Te){e.Te=[];const t=new Set;for(const r of e.explicitOrderBy)e.Te.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Da(wo.comparator);return t.filters.forEach(t=>{t.getFlattenedFilters().forEach(t=>{t.isInequality()&&(e=e.add(t.field))})}),e}(e);i.forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Tl(i,n))}),t.has(wo.keyField().canonicalString())||e.Te.push(new Tl(wo.keyField(),n))}return e.Te}function nc(t){const e=$s(t);return e.Ie||(e.Ie=ic(e,ec(t))),e.Ie}function ic(t,e){if("F"===t.limitType)return Kl(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(t=>{const e="desc"===t.dir?"asc":"desc";return new Tl(t.field,e)});const n=t.endAt?new Sl(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Sl(t.startAt.position,t.startAt.inclusive):null;return Kl(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function rc(t,e){const n=t.filters.concat([e]);return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sc(t,e,n){return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oc(t,e){return Ql(nc(t),nc(e))&&t.limitType===e.limitType}function ac(t){return"".concat(Gl(nc(t)),"|lt:").concat(t.limitType)}function lc(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map(t=>Ll(t)).join(", "),"]")),Xo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map(t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t)).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(t=>ll(t)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(t=>ll(t)).join(",")),"Target(".concat(e,")")}(nc(t)),"; limitType=").concat(t.limitType,")")}function cc(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):xo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of ec(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=El(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,ec(t),e))&&!(t.endAt&&!function(t,e,n){const i=El(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,ec(t),e))}(t,e)}function uc(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hc(t){return(e,n)=>{let i=!1;for(const r of ec(t)){const t=dc(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function dc(t,e,n){const i=t.field.isKeyField()?xo.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?sl(i,r):Qs(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Qs(19790,{direction:t.dir})}}class fc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ca(this.inner,(e,n)=>{for(const[i,r]of n)t(i,r)})}isEmpty(){return Ia(this.inner)}size(){return this.innerSize}}const pc=new Aa(xo.comparator);function gc(){return pc}const mc=new Aa(xo.comparator);function yc(){let t=mc;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.insert(r.key,r);return t}function vc(t){let e=mc;return t.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function bc(){return wc()}function _c(){return wc()}function wc(){return new fc(t=>t.toString(),(t,e)=>t.isEqual(e))}const xc=new Aa(xo.comparator),Sc=new Da(xo.comparator);function Ec(){let t=Sc;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.add(r);return t}const kc=new Da(ho);function Tc(){return kc}function Cc(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$o(e)?"-0":e}}function Ic(t){return{integerValue:""+t}}function Ac(t,e){return Jo(e)?Ic(e):Cc(t,e)}class Pc{constructor(){this._=void 0}}function Nc(t,e,n){return t instanceof Rc?function(t,e){const n={fields:{[Ba]:{stringValue:Ua},[Wa]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&qa(e)&&(e=Ka(e)),e&&(n.fields[Ha]=e),{mapValue:n}}(n,e):t instanceof Mc?Lc(t,e):t instanceof Fc?jc(t,e):function(t,e){const n=Oc(t,e),i=zc(n)+zc(t.Ee);return dl(n)&&dl(t.Ee)?Ic(i):Cc(t.serializer,i)}(t,e)}function Dc(t,e,n){return t instanceof Mc?Lc(t,e):t instanceof Fc?jc(t,e):n}function Oc(t,e){return t instanceof Vc?function(t){return dl(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Rc extends Pc{}class Mc extends Pc{constructor(t){super(),this.elements=t}}function Lc(t,e){const n=Uc(e);for(const i of t.elements)n.some(t=>il(t,i))||n.push(i);return{arrayValue:{values:n}}}class Fc extends Pc{constructor(t){super(),this.elements=t}}function jc(t,e){let n=Uc(e);for(const i of t.elements)n=n.filter(t=>!il(t,i));return{arrayValue:{values:n}}}class Vc extends Pc{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function zc(t){return Va(t.integerValue||t.doubleValue)}function Uc(t){return fl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Bc{constructor(t,e){this.version=t,this.transformResults=e}}class Hc{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Hc}static exists(t){return new Hc(void 0,t)}static updateTime(t){return new Hc(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Wc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class qc{}function Kc(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new nu(t.key,Hc.none()):new $c(t.key,t.data,Hc.none());{const n=t.data,i=_l.empty();let r=new Da(wo.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Jc(t.key,i,new Ra(r.toArray()),Hc.none())}}function Gc(t,e,n){t instanceof $c?function(t,e,n){const i=t.value.clone(),r=tu(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Jc?function(t,e,n){if(!Wc(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=tu(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Zc(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Qc(t,e,n,i){return t instanceof $c?function(t,e,n,i){if(!Wc(t.precondition,e))return n;const r=t.value.clone(),s=eu(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Jc?function(t,e,n,i){if(!Wc(t.precondition,e))return n;const r=eu(t.fieldTransforms,i,e),s=e.data;return s.setAll(Zc(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(t=>t.field))}(t,e,n,i):function(t,e,n){return Wc(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Yc(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Oc(i.transform,t||null);null!=r&&(null===n&&(n=_l.empty()),n.set(i.field,r))}return n||null}function Xc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&mo(t,e,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Mc&&e instanceof Mc||t instanceof Fc&&e instanceof Fc?mo(t.elements,e.elements,il):t instanceof Vc&&e instanceof Vc?il(t.Ee,e.Ee):t instanceof Rc&&e instanceof Rc}(t.transform,e.transform)}(t,e))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $c extends qc{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jc extends qc{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Zc(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function tu(t,e,n){const i=new Map;Xs(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Dc(o,a,n[r]))}return i}function eu(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Nc(t,s,e))}return i}class nu extends qc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iu extends qc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ru{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&Gc(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Qc(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Qc(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=_c();return this.mutations.forEach(i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Kc(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Mo.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ec())}isEqual(t){return this.batchId===t.batchId&&mo(this.mutations,t.mutations,(t,e)=>Xc(t,e))&&mo(this.baseMutations,t.baseMutations,(t,e)=>Xc(t,e))}}class su{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Xs(t.mutations.length===n.length,58842,{Ve:t.mutations.length,me:n.length});let i=xc;const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new su(t,e,n,i)}}class ou{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class au{constructor(t,e){this.count=t,this.unchangedNames=e}}var lu,cu;function uu(t){switch(t){case Js.OK:return Qs(64938);case Js.CANCELLED:case Js.UNKNOWN:case Js.DEADLINE_EXCEEDED:case Js.RESOURCE_EXHAUSTED:case Js.INTERNAL:case Js.UNAVAILABLE:case Js.UNAUTHENTICATED:return!1;case Js.INVALID_ARGUMENT:case Js.NOT_FOUND:case Js.ALREADY_EXISTS:case Js.PERMISSION_DENIED:case Js.FAILED_PRECONDITION:case Js.ABORTED:case Js.OUT_OF_RANGE:case Js.UNIMPLEMENTED:case Js.DATA_LOSS:return!0;default:return Qs(15467,{code:t})}}function hu(t){if(void 0===t)return qs("GRPC error has no .code"),Js.UNKNOWN;switch(t){case lu.OK:return Js.OK;case lu.CANCELLED:return Js.CANCELLED;case lu.UNKNOWN:return Js.UNKNOWN;case lu.DEADLINE_EXCEEDED:return Js.DEADLINE_EXCEEDED;case lu.RESOURCE_EXHAUSTED:return Js.RESOURCE_EXHAUSTED;case lu.INTERNAL:return Js.INTERNAL;case lu.UNAVAILABLE:return Js.UNAVAILABLE;case lu.UNAUTHENTICATED:return Js.UNAUTHENTICATED;case lu.INVALID_ARGUMENT:return Js.INVALID_ARGUMENT;case lu.NOT_FOUND:return Js.NOT_FOUND;case lu.ALREADY_EXISTS:return Js.ALREADY_EXISTS;case lu.PERMISSION_DENIED:return Js.PERMISSION_DENIED;case lu.FAILED_PRECONDITION:return Js.FAILED_PRECONDITION;case lu.ABORTED:return Js.ABORTED;case lu.OUT_OF_RANGE:return Js.OUT_OF_RANGE;case lu.UNIMPLEMENTED:return Js.UNIMPLEMENTED;case lu.DATA_LOSS:return Js.DATA_LOSS;default:return Qs(39323,{code:t})}}(cu=lu||(lu={}))[cu.OK=0]="OK",cu[cu.CANCELLED=1]="CANCELLED",cu[cu.UNKNOWN=2]="UNKNOWN",cu[cu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cu[cu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cu[cu.NOT_FOUND=5]="NOT_FOUND",cu[cu.ALREADY_EXISTS=6]="ALREADY_EXISTS",cu[cu.PERMISSION_DENIED=7]="PERMISSION_DENIED",cu[cu.UNAUTHENTICATED=16]="UNAUTHENTICATED",cu[cu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cu[cu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cu[cu.ABORTED=10]="ABORTED",cu[cu.OUT_OF_RANGE=11]="OUT_OF_RANGE",cu[cu.UNIMPLEMENTED=12]="UNIMPLEMENTED",cu[cu.INTERNAL=13]="INTERNAL",cu[cu.UNAVAILABLE=14]="UNAVAILABLE",cu[cu.DATA_LOSS=15]="DATA_LOSS";let du=null;const fu=new Es([4294967295,4294967295],0);function pu(t){const e=co().encode(t),n=new ks;return n.update(e),new Uint8Array(n.digest())}function gu(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Es([n,i],0),new Es([r,s],0)]}class mu{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new yu("Invalid padding: ".concat(e));if(n<0)throw new yu("Invalid hash count: ".concat(n));if(t.length>0&&0===this.hashCount)throw new yu("Invalid hash count: ".concat(n));if(0===t.length&&0!==e)throw new yu("Invalid padding when bitmap length is 0: ".concat(e));this.fe=8*t.length-e,this.ge=Es.fromNumber(this.fe)}pe(t,e,n){let i=t.add(e.multiply(Es.fromNumber(n)));return 1===i.compare(fu)&&(i=new Es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.fe)return!1;const e=pu(t),[n,i]=gu(e);for(let r=0;r<this.hashCount;r++){const t=this.pe(n,i,r);if(!this.ye(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new mu(r,i,e);return n.forEach(t=>s.insert(t)),s}insert(t){if(0===this.fe)return;const e=pu(t),[n,i]=gu(e);for(let r=0;r<this.hashCount;r++){const t=this.pe(n,i,r);this.we(t)}}we(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vu{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,bu.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new vu(Mo.min(),i,new Aa(ho),gc(),Ec())}}class bu{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new bu(n,e,Ec(),Ec(),Ec())}}class _u{constructor(t,e,n,i){this.Se=t,this.removedTargetIds=e,this.key=n,this.be=i}}class wu{constructor(t,e){this.targetId=t,this.De=e}}class xu{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:La.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Su{constructor(){this.ve=0,this.Ce=Tu(),this.Fe=La.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Ec(),e=Ec(),n=Ec();return this.Ce.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Qs(38017,{changeType:r})}}),new bu(this.Fe,this.Me,t,e,n)}ke(){this.xe=!1,this.Ce=Tu()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Xs(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Eu{constructor(t){this.We=t,this.Ge=new Map,this.ze=gc(),this.je=ku(),this.Je=ku(),this.He=new Aa(ho)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const n=this.tt(e);switch(t.state){case 0:this.nt(e)&&n.Be(t.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(t.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(n.Ke(),n.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),n.Be(t.resumeToken));break;default:Qs(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((t,n)=>{this.nt(n)&&e(n)})}it(t){const e=t.targetId,n=t.De.count,i=this.st(e);if(i){const r=i.target;if(Yl(r))if(0===n){const t=new xo(r.path);this.Xe(e,t,xl.newNoDocument(t,Mo.min()))}else Xs(1===n,20013,{expectedCount:n});else{const i=this.ot(e);if(i!==n){const n=this._t(t),r=n?this.ut(n,t,i):1;if(0!==r){this.rt(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,t)}null==du||du.ct(function(t,e,n,i,r){var s,o,a,l,c,u;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},d=e.unchangedNames;return d&&(h.bloomFilter={applied:0===r,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:t=>{var e;return null!==(e=null==i?void 0:i.mightContain(t))&&void 0!==e&&e}}),h}(i,t.De,this.We.lt(),n,r))}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=za(n).toUint8Array()}catch(t){if(t instanceof Ma)return Ks("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new mu(s,i,r)}catch(t){return Ks(t instanceof yu?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.fe?null:o}ut(t,e,n){return e.De.count===n-this.ht(t,e.targetId)?0:2}ht(t,e){const n=this.We.getRemoteKeysForTarget(e);let i=0;return n.forEach(n=>{const r=this.We.lt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());t.mightContain(s)||(this.Xe(e,n,null),i++)}),i}Pt(t){const e=new Map;this.Ge.forEach((n,i)=>{const r=this.st(i);if(r){if(n.current&&Yl(r.target)){const e=new xo(r.target.path);this.Tt(e).has(i)||this.It(i,e)||this.Xe(i,e,xl.newNoDocument(e,t))}n.Ne&&(e.set(i,n.Le()),n.ke())}});let n=Ec();this.Je.forEach((t,e)=>{let i=!0;e.forEachWhile(t=>{const e=this.st(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)}),i&&(n=n.add(t))}),this.ze.forEach((e,n)=>n.setReadTime(t));const i=new vu(t,e,this.He,this.ze,n);return this.ze=gc(),this.je=ku(),this.Je=ku(),this.He=new Aa(ho),i}Ze(t,e){if(!this.nt(t))return;const n=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,n),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,n){if(!this.nt(t))return;const i=this.tt(t);this.It(t,e)?i.qe(e,1):i.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),n&&(this.ze=this.ze.insert(e,n))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new Su,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new Da(ho),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new Da(ho),this.je=this.je.insert(t,e)),e}nt(t){const e=null!==this.st(t);return e||Ws("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new Su),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function ku(){return new Aa(xo.comparator)}function Tu(){return new Aa(xo.comparator)}const Cu={asc:"ASCENDING",desc:"DESCENDING"},Iu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Au={and:"AND",or:"OR"};class Pu{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Nu(t,e){return t.useProto3Json||Xo(e)?e:{value:e}}function Du(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ou(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ru(t,e){return Du(t,e.toTimestamp())}function Mu(t){return Xs(!!t,49232),Mo.fromTimestamp(function(t){const e=ja(t);return new Ro(e.seconds,e.nanos)}(t))}function Lu(t,e){return Fu(t,e).canonicalString()}function Fu(t,e){const n=function(t){return new bo(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function ju(t){const e=bo.fromString(t);return Xs(rh(e),10190,{key:e.toString()}),e}function Vu(t,e){return Lu(t.databaseId,e.path)}function zu(t,e){const n=ju(e);if(n.get(1)!==t.databaseId.projectId)throw new Zs(Js.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Zs(Js.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xo(Wu(n))}function Uu(t,e){return Lu(t.databaseId,e)}function Bu(t){const e=ju(t);return 4===e.length?bo.emptyPath():Wu(e)}function Hu(t){return new bo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wu(t){return Xs(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function qu(t,e,n){return{name:Vu(t,e),fields:n.value.mapValue.fields}}function Ku(t,e){let n;if(e instanceof $c)n={update:qu(t,e.key,e.value)};else if(e instanceof nu)n={delete:Vu(t,e.key)};else if(e instanceof Jc)n={update:qu(t,e.key,e.data),updateMask:ih(e.fieldMask)};else{if(!(e instanceof iu))return Qs(16599,{Rt:e.type});n={verify:Vu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof Rc)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mc)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fc)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vc)return{fieldPath:e.field.canonicalString(),increment:n.Ee};throw Qs(20930,{transform:e.transform})}(0,t))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ru(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Qs(27497)}(t,e.precondition)),n}function Gu(t,e){return{documents:[Uu(t,e.path)]}}function Qu(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Uu(t,r);const s=function(t){if(0!==t.length)return nh(Pl.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map(t=>function(t){return{field:th(t.field),direction:$u(t.dir)}}(t))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Nu(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{Vt:n,parent:r}}function Yu(t){let e=Bu(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Xs(1===i,65062);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Xu(t);return e instanceof Pl&&Dl(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map(t=>function(t){return new Tl(eh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Xo(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new Sl(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new Sl(n,e)}(n.endAt)),$l(e,r,o,s,a,"F",l,c)}function Xu(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=eh(t.unaryFilter.field);return Al.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=eh(t.unaryFilter.field);return Al.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=eh(t.unaryFilter.field);return Al.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=eh(t.unaryFilter.field);return Al.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qs(61313);default:return Qs(60726)}}(t):void 0!==t.fieldFilter?function(t){return Al.create(eh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qs(58110);default:return Qs(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Pl.create(t.compositeFilter.filters.map(t=>Xu(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Qs(1026)}}(t.compositeFilter.op))}(t):Qs(30097,{filter:t})}function $u(t){return Cu[t]}function Ju(t){return Iu[t]}function Zu(t){return Au[t]}function th(t){return{fieldPath:t.canonicalString()}}function eh(t){return wo.fromServerFormat(t.fieldPath)}function nh(t){return t instanceof Al?function(t){if("=="===t.op){if(gl(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NAN"}};if(pl(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gl(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NOT_NAN"}};if(pl(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:th(t.field),op:Ju(t.op),value:t.value}}}(t):t instanceof Pl?function(t){const e=t.getFilters().map(t=>nh(t));return 1===e.length?e[0]:{compositeFilter:{op:Zu(t.op),filters:e}}}(t):Qs(54877,{filter:t})}function ih(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class sh{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mo.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Mo.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:La.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new sh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new sh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new sh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new sh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class oh{constructor(t){this.gt=t}}function ah(t){const e=Yu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?sc(e,e.limit,"L"):e}class lh{constructor(){}bt(t,e){this.Dt(t,e),e.vt()}Dt(t,e){if("nullValue"in t)this.Ct(e,5);else if("booleanValue"in t)this.Ct(e,10),e.Ft(t.booleanValue?1:0);else if("integerValue"in t)this.Ct(e,15),e.Ft(Va(t.integerValue));else if("doubleValue"in t){const n=Va(t.doubleValue);isNaN(n)?this.Ct(e,13):(this.Ct(e,15),$o(n)?e.Ft(0):e.Ft(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Ct(e,20),"string"==typeof n&&(n=ja(n)),e.Mt("".concat(n.seconds||"")),e.Ft(n.nanos||0)}else if("stringValue"in t)this.xt(t.stringValue,e),this.Ot(e);else if("bytesValue"in t)this.Ct(e,30),e.Nt(za(t.bytesValue)),this.Ot(e);else if("referenceValue"in t)this.Bt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Ct(e,45),e.Ft(n.latitude||0),e.Ft(n.longitude||0)}else"mapValue"in t?bl(t)?this.Ct(e,Number.MAX_SAFE_INTEGER):yl(t)?this.Lt(t.mapValue,e):(this.kt(t.mapValue,e),this.Ot(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Ot(e)):Qs(19022,{Qt:t})}xt(t,e){this.Ct(e,25),this.$t(t,e)}$t(t,e){e.Mt(t)}kt(t,e){const n=t.fields||{};this.Ct(e,55);for(const i of Object.keys(n))this.xt(i,e),this.Dt(n[i],e)}Lt(t,e){var n,i;const r=t.fields||{};this.Ct(e,53);const s=el,o=(null===(i=null===(n=r[s].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.Ct(e,15),e.Ft(Va(o)),this.xt(s,e),this.Dt(r[s],e)}qt(t,e){const n=t.values||[];this.Ct(e,50);for(const i of n)this.Dt(i,e)}Bt(t,e){this.Ct(e,37),xo.fromName(t).path.forEach(t=>{this.Ct(e,60),this.$t(t,e)})}Ct(t,e){t.Ft(e)}Ot(t){t.Ft(2)}}lh.Ut=new lh;class ch{constructor(){this.Dn=new uh}addToCollectionParentIndex(t,e){return this.Dn.add(e),qo.resolve()}getCollectionParents(t,e){return qo.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return qo.resolve()}deleteFieldIndex(t,e){return qo.resolve()}deleteAllFieldIndexes(t){return qo.resolve()}createTargetIndexes(t,e){return qo.resolve()}getDocumentsMatchingTarget(t,e){return qo.resolve(null)}getIndexType(t,e){return qo.resolve(0)}getFieldIndexes(t,e){return qo.resolve([])}getNextCollectionGroupToUpdate(t){return qo.resolve(null)}getMinOffset(t,e){return qo.resolve(zo.min())}getMinOffsetFromCollectionGroup(t,e){return qo.resolve(zo.min())}updateCollectionGroup(t,e,n){return qo.resolve()}updateIndexEntries(t,e){return qo.resolve()}}class uh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Da(bo.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Da(bo.comparator)).toArray()}}new Uint8Array(0);const hh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dh=41943040;class fh{static withCacheSize(t){return new fh(t,fh.DEFAULT_COLLECTION_PERCENTILE,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}fh.DEFAULT_COLLECTION_PERCENTILE=10,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fh.DEFAULT=new fh(dh,fh.DEFAULT_COLLECTION_PERCENTILE,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fh.DISABLED=new fh(-1,0,0);class ph{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new ph(0)}static ur(){return new ph(-1)}}const gh="LruGarbageCollector",mh=1048576;function yh(t,e){let[n,i]=t,[r,s]=e;const o=ho(n,r);return 0===o?ho(i,s):o}class vh{constructor(t){this.Tr=t,this.buffer=new Da(yh),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();yh(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class bh{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(t){Ws(gh,"Garbage collection scheduled in ".concat(t,"ms")),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Go(t)?Ws(gh,"Ignoring IndexedDB error during garbage collection: ",t):await Wo(t)}await this.Rr(3e5)})}}class _h{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(t=>Math.floor(e/100*t))}nthSequenceNumber(t,e){if(0===e)return qo.resolve(Qo.ue);const n=new vh(e);return this.Vr.forEachTarget(t,t=>n.Er(t.sequenceNumber)).next(()=>this.Vr.gr(t,t=>n.Er(t))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.Vr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ws("LruGarbageCollector","Garbage collection skipped; disabled"),qo.resolve(hh)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ws("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),hh):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let n,i,r,s,o,a,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(e=>(e>this.params.maximumSequenceNumbersToCollect?(Ws("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(e)),i=this.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),this.nthSequenceNumber(t,i))).next(i=>(n=i,o=Date.now(),this.removeTargets(t,n,e))).next(e=>(r=e,a=Date.now(),this.removeOrphanedDocuments(t,n))).next(t=>(l=Date.now(),Hs()<=W.DEBUG&&Ws("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(i," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(r," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(t," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),qo.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t})))}}function wh(t,e){return new _h(t,e)}class xh{constructor(){this.changes=new fc(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,xl.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?qo.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Sh{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Eh{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,e))).next(t=>(null!==n&&Qc(n.mutation,t,Ra.empty(),Ro.now()),t))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.getLocalViewOfDocuments(t,e,Ec()).next(()=>e))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ec();const i=bc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,n).next(t=>{let e=yc();return t.forEach((t,n)=>{e=e.insert(t,n.overlayedDocument)}),e}))}getOverlayedDocuments(t,e){const n=bc();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,Ec()))}populateOverlays(t,e,n){const i=[];return n.forEach(t=>{e.has(t)||i.push(t)}),this.documentOverlayCache.getOverlays(t,i).next(t=>{t.forEach((t,n)=>{e.set(t,n)})})}computeViews(t,e,n,i){let r=gc();const s=wc(),o=wc();return e.forEach((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof Jc)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Qc(o.mutation,e,o.mutation.getFieldMask(),Ro.now())):s.set(e.key,Ra.empty())}),this.recalculateAndSaveOverlays(t,r).next(t=>(t.forEach((t,e)=>s.set(t,e)),e.forEach((t,e)=>{var n;return o.set(t,new Sh(e,null!==(n=s.get(t))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(t,e){const n=wc();let i=new Aa((t,e)=>t-e),r=Ec();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>{for(const r of t)r.keys().forEach(t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ra.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Ec()).add(t);i=i.insert(r.batchId,a)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=_c();l.forEach(t=>{if(!r.has(t)){const i=Kc(e.get(t),n.get(t));null!==i&&c.set(t,i),r=r.add(t)}}),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return qo.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.recalculateAndSaveOverlays(t,e))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return xo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):tc(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):qo.resolve(bc());let o=Lo,a=r;return s.next(e=>qo.forEach(e,(e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?qo.resolve():this.remoteDocumentCache.getEntry(t,e).next(t=>{a=a.insert(e,t)}))).next(()=>this.populateOverlays(t,e,r)).next(()=>this.computeViews(t,a,e,Ec())).next(t=>({batchId:o,changes:vc(t)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new xo(e)).next(t=>{let e=yc();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=yc();return this.indexManager.getCollectionParents(t,r).next(o=>qo.forEach(o,o=>{const a=function(t,e){return new Xl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next(t=>{t.forEach((t,e)=>{s=s.insert(t,e)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i))).next(t=>{r.forEach((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,xl.newInvalidDocument(i)))});let n=yc();return t.forEach((t,i)=>{const s=r.get(t);void 0!==s&&Qc(s.mutation,i,Ra.empty(),Ro.now()),cc(e,i)&&(n=n.insert(t,i))}),n})}}class kh{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return qo.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Mu(t.createTime)}}(e)),qo.resolve()}getNamedQuery(t,e){return qo.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(t){return{name:t.name,query:ah(t.bundledQuery),readTime:Mu(t.readTime)}}(e)),qo.resolve()}}class Th{constructor(){this.overlays=new Aa(xo.comparator),this.kr=new Map}getOverlay(t,e){return qo.resolve(this.overlays.get(e))}getOverlays(t,e){const n=bc();return qo.forEach(e,e=>this.getOverlay(t,e).next(t=>{null!==t&&n.set(e,t)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((n,i)=>{this.wt(t,e,i)}),qo.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.kr.get(n);return void 0!==i&&(i.forEach(t=>this.overlays=this.overlays.remove(t)),this.kr.delete(n)),qo.resolve()}getOverlaysForCollection(t,e,n){const i=bc(),r=e.length+1,s=new xo(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return qo.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Aa((t,e)=>t-e);const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=bc(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=bc(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((t,e)=>o.set(t,e)),!(o.size()>=i)););return qo.resolve(o)}wt(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.kr.get(i.largestBatchId).delete(n.key);this.kr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new ou(e,n));let r=this.kr.get(e);void 0===r&&(r=Ec(),this.kr.set(e,r)),this.kr.set(e,r.add(n.key))}}class Ch{constructor(){this.sessionToken=La.EMPTY_BYTE_STRING}getSessionToken(t){return qo.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,qo.resolve()}}class Ih{constructor(){this.qr=new Da(Ah.Qr),this.$r=new Da(Ah.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const n=new Ah(t,e);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.Wr(new Ah(t,e))}Gr(t,e){t.forEach(t=>this.removeReference(t,e))}zr(t){const e=new xo(new bo([])),n=new Ah(e,t),i=new Ah(e,t+1),r=[];return this.$r.forEachInRange([n,i],t=>{this.Wr(t),r.push(t.key)}),r}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new xo(new bo([])),n=new Ah(e,t),i=new Ah(e,t+1);let r=Ec();return this.$r.forEachInRange([n,i],t=>{r=r.add(t.key)}),r}containsKey(t){const e=new Ah(t,0),n=this.qr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ah{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return xo.comparator(t.key,e.key)||ho(t.Hr,e.Hr)}static Ur(t,e){return ho(t.Hr,e.Hr)||xo.comparator(t.key,e.key)}}class Ph{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new Da(Ah.Qr)}checkEmpty(t){return qo.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ru(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new Ah(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return qo.resolve(s)}lookupMutationBatch(t,e){return qo.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Xr(n),r=i<0?0:i;return qo.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return qo.resolve(0===this.mutationQueue.length?Yo:this.er-1)}getAllMutationBatches(t){return qo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ah(e,0),i=new Ah(e,Number.POSITIVE_INFINITY),r=[];return this.Yr.forEachInRange([n,i],t=>{const e=this.Zr(t.Hr);r.push(e)}),qo.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Da(ho);return e.forEach(t=>{const e=new Ah(t,0),i=new Ah(t,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([e,i],t=>{n=n.add(t.Hr)})}),qo.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;xo.isDocumentKey(r)||(r=r.child(""));const s=new Ah(new xo(r),0);let o=new Da(ho);return this.Yr.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.Hr)),!0)},s),qo.resolve(this.ei(o))}ei(t){const e=[];return t.forEach(t=>{const n=this.Zr(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){Xs(0===this.ti(e.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return qo.forEach(e.mutations,i=>{const r=new Ah(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=n})}rr(t){}containsKey(t,e){const n=new Ah(e,0),i=this.Yr.firstAfterOrEqual(n);return qo.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,qo.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Nh{constructor(t){this.ni=t,this.docs=new Aa(xo.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.ni(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return qo.resolve(n?n.document.mutableCopy():xl.newInvalidDocument(e))}getEntries(t,e){let n=gc();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():xl.newInvalidDocument(t))}),qo.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=gc();const s=e.path,o=new xo(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Uo(Vo(o),n)<=0||(i.has(o.key)||cc(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return qo.resolve(r)}getAllFromCollectionGroup(t,e,n,i){Qs(9500)}ri(t,e){return qo.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new Dh(this)}getSize(t){return qo.resolve(this.size)}}class Dh extends xh{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?e.push(this.Or.addEntry(t,i)):this.Or.removeEntry(n)}),qo.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}class Oh{constructor(t){this.persistence=t,this.ii=new fc(t=>Gl(t),Ql),this.lastRemoteSnapshotVersion=Mo.min(),this.highestTargetId=0,this.si=0,this.oi=new Ih,this.targetCount=0,this._i=ph.ar()}forEachTarget(t,e){return this.ii.forEach((t,n)=>e(n)),qo.resolve()}getLastRemoteSnapshotVersion(t){return qo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return qo.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),qo.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.si&&(this.si=e),qo.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new ph(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,qo.resolve()}updateTargetData(t,e){return this.hr(e),qo.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,qo.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.ii.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),qo.waitFor(r).next(()=>i)}getTargetCount(t){return qo.resolve(this.targetCount)}getTargetData(t,e){const n=this.ii.get(e)||null;return qo.resolve(n)}addMatchingKeys(t,e,n){return this.oi.Kr(e,n),qo.resolve()}removeMatchingKeys(t,e,n){this.oi.Gr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(e=>{r.push(i.markPotentiallyOrphaned(t,e))}),qo.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),qo.resolve()}getMatchingKeysForTargetId(t,e){const n=this.oi.Jr(e);return qo.resolve(n)}containsKey(t,e){return qo.resolve(this.oi.containsKey(e))}}class Rh{constructor(t,e){this.ai={},this.overlays={},this.ui=new Qo(0),this.ci=!1,this.ci=!0,this.li=new Ch,this.referenceDelegate=t(this),this.hi=new Oh(this),this.indexManager=new ch,this.remoteDocumentCache=function(t){return new Nh(t)}(t=>this.referenceDelegate.Pi(t)),this.serializer=new oh(e),this.Ti=new kh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Th,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ai[t.toKey()];return n||(n=new Ph(e,this.referenceDelegate),this.ai[t.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,n){Ws("MemoryPersistence","Starting transaction:",t);const i=new Mh(this.ui.next());return this.referenceDelegate.Ii(),n(i).next(t=>this.referenceDelegate.di(i).next(()=>t)).toPromise().then(t=>(i.raiseOnCommittedEvent(),t))}Ei(t,e){return qo.or(Object.values(this.ai).map(n=>()=>n.containsKey(t,e)))}}class Mh extends Ho{constructor(t){super(),this.currentSequenceNumber=t}}class Lh{constructor(t){this.persistence=t,this.Ai=new Ih,this.Ri=null}static Vi(t){return new Lh(t)}get mi(){if(this.Ri)return this.Ri;throw Qs(60996)}addReference(t,e,n){return this.Ai.addReference(n,e),this.mi.delete(n.toString()),qo.resolve()}removeReference(t,e,n){return this.Ai.removeReference(n,e),this.mi.add(n.toString()),qo.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),qo.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(t=>this.mi.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.mi.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qo.forEach(this.mi,n=>{const i=xo.fromPath(n);return this.fi(t,i).next(t=>{t||e.removeEntry(i,Mo.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(t=>{t?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return qo.or([()=>qo.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Fh{constructor(t,e){this.persistence=t,this.gi=new fc(t=>ta(t.path),(t,e)=>t.isEqual(e)),this.garbageCollector=wh(this,e)}static Vi(t,e){return new Fh(t,e)}Ii(){}di(t){return qo.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(t=>e.next(e=>t+e))}yr(t){let e=0;return this.gr(t,t=>{e++}).next(()=>e)}gr(t,e){return qo.forEach(this.gi,(n,i)=>this.Sr(t,n,i).next(t=>t?qo.resolve():e(i)))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ri(t,i=>this.Sr(t,i,e).next(t=>{t||(n++,r.removeEntry(i,Mo.min()))})).next(()=>r.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),qo.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.gi.set(n,t.currentSequenceNumber),qo.resolve()}removeReference(t,e,n){return this.gi.set(n,t.currentSequenceNumber),qo.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),qo.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ul(t.data.value)),e}Sr(t,e,n){return qo.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.gi.get(e);return qo.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class jh{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Is=n,this.ds=i}static Es(t,e){let n=Ec(),i=Ec();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new jh(t,e.fromCache,n,i)}}class Vh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class zh{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=ms()?8:Ko(ps())>0?6:4}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ps(t,e).next(t=>{r.result=t}).next(()=>{if(!r.result)return this.ys(t,e,i,n).next(t=>{r.result=t})}).next(()=>{if(r.result)return;const n=new Vh;return this.ws(t,e,n).next(i=>{if(r.result=i,this.Rs)return this.Ss(t,e,n,i.size)})}).next(()=>r.result)}Ss(t,e,n,i){return n.documentReadCount<this.Vs?(Hs()<=W.DEBUG&&Ws("QueryEngine","SDK will not create cache indexes for query:",lc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),qo.resolve()):(Hs()<=W.DEBUG&&Ws("QueryEngine","Query:",lc(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.fs*i?(Hs()<=W.DEBUG&&Ws("QueryEngine","The SDK decides to create cache indexes for query:",lc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,nc(e))):qo.resolve())}ps(t,e){if(Zl(e))return qo.resolve(null);let n=nc(e);return this.indexManager.getIndexType(t,n).next(i=>0===i?null:(null!==e.limit&&1===i&&(e=sc(e,null,"F"),n=nc(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(i=>{const r=Ec(...i);return this.gs.getDocuments(t,r).next(i=>this.indexManager.getMinOffset(t,n).next(n=>{const s=this.bs(e,i);return this.Ds(e,s,r,n.readTime)?this.ps(t,sc(e,null,"F")):this.vs(t,s,e,n)}))})))}ys(t,e,n,i){return Zl(e)||i.isEqual(Mo.min())?qo.resolve(null):this.gs.getDocuments(t,n).next(r=>{const s=this.bs(e,r);return this.Ds(e,s,n,i)?qo.resolve(null):(Hs()<=W.DEBUG&&Ws("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lc(e)),this.vs(t,s,e,jo(i,Lo)).next(t=>t))})}bs(t,e){let n=new Da(hc(t));return e.forEach((e,i)=>{cc(t,i)&&(n=n.add(i))}),n}Ds(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ws(t,e,n){return Hs()<=W.DEBUG&&Ws("QueryEngine","Using full collection scan to execute query:",lc(e)),this.gs.getDocumentsMatchingQuery(t,e,zo.min(),n)}vs(t,e,n,i){return this.gs.getDocumentsMatchingQuery(t,n,i).next(t=>(e.forEach(e=>{t=t.insert(e.key,e)}),t))}}const Uh="LocalStore";class Bh{constructor(t,e,n,i){this.persistence=t,this.Cs=e,this.serializer=i,this.Fs=new Aa(ho),this.Ms=new fc(t=>Gl(t),Ql),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(n)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Eh(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function Hh(t,e,n,i){return new Bh(t,e,n,i)}async function Wh(t,e){const n=$s(t);return await n.persistence.runTransaction("Handle user change","readonly",t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next(r=>(i=r,n.Ns(e),n.mutationQueue.getAllMutationBatches(t))).next(e=>{const r=[],s=[];let o=Ec();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next(t=>({Bs:t,removedBatchIds:r,addedBatchIds:s}))})})}function qh(t){const e=$s(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Kh(t,e,n){let i=Ec(),r=Ec();return n.forEach(t=>i=i.add(t)),e.getEntries(t,i).next(t=>{let i=gc();return n.forEach((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Mo.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):Ws(Uh,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ls:i,ks:r}})}function Gh(t,e){const n=$s(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=Yo),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)))}function Qh(t,e){const n=$s(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let i;return n.hi.getTargetData(t,e).next(r=>r?(i=r,qo.resolve(i)):n.hi.allocateTargetId(t).next(r=>(i=new sh(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.hi.addTargetData(t,i).next(()=>i))))}).then(t=>{const i=n.Fs.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(t.targetId,t),n.Ms.set(e,t.targetId)),t})}async function Yh(t,e,n){const i=$s(t),r=i.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,t=>i.persistence.referenceDelegate.removeTarget(t,r))}catch(t){if(!Go(t))throw t;Ws(Uh,"Failed to update sequence numbers for target ".concat(e,": ").concat(t))}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function Xh(t,e,n){const i=$s(t);let r=Mo.min(),s=Ec();return i.persistence.runTransaction("Execute query","readwrite",t=>function(t,e,n){const i=$s(t),r=i.Ms.get(n);return void 0!==r?qo.resolve(i.Fs.get(r)):i.hi.getTargetData(e,n)}(i,t,nc(e)).next(e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(t,e.targetId).next(t=>{s=t})}).next(()=>i.Cs.getDocumentsMatchingQuery(t,e,n?r:Mo.min(),n?s:Ec())).next(t=>($h(i,uc(e),t),{documents:t,qs:s})))}function $h(t,e,n){let i=t.xs.get(e)||Mo.min();n.forEach((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)}),t.xs.set(e,i)}class Jh{constructor(){this.activeTargetIds=Tc()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Zh{constructor(){this.Fo=new Jh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,n){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new Jh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class td{xo(t){}shutdown(){}}const ed="ConnectivityMonitor";class nd{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ws(ed,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){Ws(ed,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let id=null;function rd(){return null===id?id=268435456+Math.round(2147483648*Math.random()):id++,"0x"+id.toString(16)}const sd="RestConnection",od={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ad{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo="projects/".concat(n,"/databases/").concat(i),this.Ko=this.databaseId.database===Ya?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}Wo(t,e,n,i,r){const s=rd(),o=this.Go(t,e.toUriEncodedString());Ws(sd,"Sending RPC '".concat(t,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,i,r);const{host:l}=new URL(o),c=fs(l);return this.jo(t,o,a,n,c).then(e=>(Ws(sd,"Received RPC '".concat(t,"' ").concat(s,": "),e),e),e=>{throw Ks(sd,"RPC '".concat(t,"' ").concat(s," failed with error: "),e,"url: ",o,"request:",n),e})}Jo(t,e,n,i,r,s){return this.Wo(t,e,n,i,r)}zo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Us,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}Go(t,e){const n=od[t];return"".concat(this.$o,"/v1/").concat(e,":").concat(n)}terminate(){}}class ld{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}const cd="WebChannelConnection";class ud extends ad{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,n,i,r){const s=rd();return new Promise((r,o)=>{const a=new Is;a.setWithCredentials(!0),a.listenOnce(Ps.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ns.NO_ERROR:const e=a.getResponseJson();Ws(cd,"XHR for RPC '".concat(t,"' ").concat(s," received:"),JSON.stringify(e)),r(e);break;case Ns.TIMEOUT:Ws(cd,"RPC '".concat(t,"' ").concat(s," timed out")),o(new Zs(Js.DEADLINE_EXCEEDED,"Request time out"));break;case Ns.HTTP_ERROR:const n=a.getStatus();if(Ws(cd,"RPC '".concat(t,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Js).indexOf(e)>=0?e:Js.UNKNOWN}(e.status);o(new Zs(t,e.message))}else o(new Zs(Js.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Zs(Js.UNAVAILABLE,"Connection failed."));break;default:Qs(9055,{c_:t,streamId:s,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{Ws(cd,"RPC '".concat(t,"' ").concat(s," completed."))}});const l=JSON.stringify(i);Ws(cd,"RPC '".concat(t,"' ").concat(s," sending request:"),i),a.send(e,"POST",l,n,15)})}P_(t,e,n){const i=rd(),r=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Ms(),o=Rs(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Ws(cd,"Creating RPC '".concat(t,"' stream ").concat(i,": ").concat(c),a);const u=s.createWebChannel(c,a);this.T_(u);let h=!1,d=!1;const f=new ld({Ho:e=>{d?Ws(cd,"Not sending because RPC '".concat(t,"' stream ").concat(i," is closed:"),e):(h||(Ws(cd,"Opening RPC '".concat(t,"' stream ").concat(i," transport.")),u.open(),h=!0),Ws(cd,"RPC '".concat(t,"' stream ").concat(i," sending:"),e),u.send(e))},Yo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,As.EventType.OPEN,()=>{d||(Ws(cd,"RPC '".concat(t,"' stream ").concat(i," transport opened.")),f.s_())}),p(u,As.EventType.CLOSE,()=>{d||(d=!0,Ws(cd,"RPC '".concat(t,"' stream ").concat(i," transport closed")),f.__(),this.I_(u))}),p(u,As.EventType.ERROR,e=>{d||(d=!0,Ks(cd,"RPC '".concat(t,"' stream ").concat(i," transport errored. Name:"),e.name,"Message:",e.message),f.__(new Zs(Js.UNAVAILABLE,"The operation could not be completed")))}),p(u,As.EventType.MESSAGE,e=>{var n;if(!d){const r=e.data[0];Xs(!!r,16349);const s=r,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ws(cd,"RPC '".concat(t,"' stream ").concat(i," received error:"),o);const e=o.status;let n=function(t){const e=lu[t];if(void 0!==e)return hu(e)}(e),r=o.message;void 0===n&&(n=Js.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.__(new Zs(n,r)),u.close()}else Ws(cd,"RPC '".concat(t,"' stream ").concat(i," received:"),r),f.a_(r)}}),p(o,Os.STAT_EVENT,e=>{e.stat===Ds.PROXY?Ws(cd,"RPC '".concat(t,"' stream ").concat(i," detected buffering proxy")):e.stat===Ds.NOPROXY&&Ws(cd,"RPC '".concat(t,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function hd(){return"undefined"!=typeof document?document:null}function dd(t){return new Pu(t,!0)}class fd{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=t,this.timerId=e,this.d_=n,this.E_=i,this.A_=r,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),i=Math.max(0,e-n);i>0&&Ws("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const pd="PersistentStream";class gd{constructor(t,e,n,i,r,s,o,a){this.Fi=t,this.w_=n,this.S_=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fd(t,e)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==t?this.F_.reset():e&&e.code===Js.RESOURCE_EXHAUSTED?(qs(e.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===Js.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(t=>{let[n,i]=t;this.b_===e&&this.W_(n,i)},e=>{t(()=>{const t=new Zs(Js.UNKNOWN,"Fetching auth token failed: "+e.message);return this.G_(t)})})}W_(t,e){const n=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(t=>{n(()=>this.G_(t))}),this.stream.onMessage(t=>{n(()=>1==++this.C_?this.j_(t):this.onNext(t))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return Ws(pd,"close with error: ".concat(t)),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(Ws(pd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class md extends gd{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Qs(39313,{state:t})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(Xs(void 0===e||"string"==typeof e,58123),La.fromBase64String(e||"")):(Xs(void 0===e||e instanceof Buffer||e instanceof Uint8Array,16193),La.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Js.UNKNOWN:hu(t.code);return new Zs(e,t.message||"")}(o);n=new xu(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=zu(t,i.document.name),s=Mu(i.document.updateTime),o=i.document.createTime?Mu(i.document.createTime):Mo.min(),a=new _l({mapValue:{fields:i.document.fields}}),l=xl.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new _u(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=zu(t,i.document),s=i.readTime?Mu(i.readTime):Mo.min(),o=xl.newNoDocument(r,s),a=i.removedTargetIds||[];n=new _u([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=zu(t,i.document),s=i.removedTargetIds||[];n=new _u([],s,r,null)}else{if(!("filter"in e))return Qs(11601,{At:e});{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new au(i,r),o=t.targetId;n=new wu(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Mo.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Mo.min():e.readTime?Mu(e.readTime):Mo.min()}(t);return this.listener.J_(e,n)}H_(t){const e={};e.database=Hu(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=Yl(i)?{documents:Gu(t,i)}:{query:Qu(t,i).Vt},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Ou(t,e.resumeToken);const i=Nu(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(Mo.min())>0){n.readTime=Du(t,e.snapshotVersion.toTimestamp());const i=Nu(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qs(28987,{purpose:t})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.k_(e)}Y_(t){const e={};e.database=Hu(this.serializer),e.removeTarget=t,this.k_(e)}}class yd extends gd{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Xs(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Xs(!t.writeResults||0===t.writeResults.length,55816),this.listener.ea()}onNext(t){Xs(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=function(t,e){return t&&t.length>0?(Xs(void 0!==e,14353),t.map(t=>function(t,e){let n=t.updateTime?Mu(t.updateTime):Mu(e);return n.isEqual(Mo.min())&&(n=Mu(e)),new Bc(n,t.transformResults||[])}(t,e))):[]}(t.writeResults,t.commitTime),n=Mu(t.commitTime);return this.listener.ta(n,e)}na(){const t={};t.database=Hu(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>Ku(this.serializer,t))};this.k_(e)}}class vd{}class bd extends vd{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Zs(Js.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,n,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,o]=r;return this.connection.Wo(t,Fu(e,n),i,s,o)}).catch(t=>{throw"FirebaseError"===t.name?(t.code===Js.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Zs(Js.UNKNOWN,t.toString())})}Jo(t,e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Jo(t,Fu(e,n),i,o,a,r)}).catch(t=>{throw"FirebaseError"===t.name?(t.code===Js.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Zs(Js.UNKNOWN,t.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class _d{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.ua("Offline")))}set(t){this.ha(),this.sa=0,"Online"===t&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(qs(e),this._a=!1):Ws("OnlineStateTracker",e)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const wd="RemoteStore";class xd{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=r,this.Ea.xo(t=>{n.enqueueAndForget(async()=>{Nd(this)&&(Ws(wd,"Restarting streams for network reachability change."),await async function(t){const e=$s(t);e.Ia.add(4),await Ed(e),e.Aa.set("Unknown"),e.Ia.delete(4),await Sd(e)}(this))})}),this.Aa=new _d(n,i)}}async function Sd(t){if(Nd(t))for(const e of t.da)await e(!0)}async function Ed(t){for(const e of t.da)await e(!1)}function kd(t,e){const n=$s(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Pd(n)?Ad(n):Xd(n).x_()&&Cd(n,e))}function Td(t,e){const n=$s(t),i=Xd(n);n.Ta.delete(e),i.x_()&&Id(n,e),0===n.Ta.size&&(i.x_()?i.B_():Nd(n)&&n.Aa.set("Unknown"))}function Cd(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Mo.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xd(t).H_(e)}function Id(t,e){t.Ra.$e(e),Xd(t).Y_(e)}function Ad(t){t.Ra=new Eu({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Xd(t).start(),t.Aa.aa()}function Pd(t){return Nd(t)&&!Xd(t).M_()&&t.Ta.size>0}function Nd(t){return 0===$s(t).Ia.size}function Dd(t){t.Ra=void 0}async function Od(t){t.Aa.set("Online")}async function Rd(t){t.Ta.forEach((e,n)=>{Cd(t,e)})}async function Md(t,e){Dd(t),Pd(t)?(t.Aa.la(e),Ad(t)):t.Aa.set("Unknown")}async function Ld(t,e,n){if(t.Aa.set("Online"),e instanceof xu&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.Ta.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.Ta.delete(i),t.Ra.removeTarget(i))}(t,e)}catch(n){Ws(wd,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Fd(t,n)}else if(e instanceof _u?t.Ra.Ye(e):e instanceof wu?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Mo.min()))try{const e=await qh(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Ra.Pt(e);return n.targetChanges.forEach((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.Ta.get(i);r&&t.Ta.set(i,r.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach((e,n)=>{const i=t.Ta.get(e);if(!i)return;t.Ta.set(e,i.withResumeToken(La.EMPTY_BYTE_STRING,i.snapshotVersion)),Id(t,e);const r=new sh(i.target,e,n,i.sequenceNumber);Cd(t,r)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Ws(wd,"Failed to raise snapshot:",e),await Fd(t,e)}}async function Fd(t,e,n){if(!Go(e))throw e;t.Ia.add(1),await Ed(t),t.Aa.set("Offline"),n||(n=()=>qh(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ws(wd,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Sd(t)})}function jd(t,e){return e().catch(n=>Fd(t,n,e))}async function Vd(t){const e=$s(t),n=$d(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Yo;for(;zd(e);)try{const t=await Gh(e.localStore,i);if(null===t){0===e.Pa.length&&n.B_();break}i=t.batchId,Ud(e,t)}catch(t){await Fd(e,t)}Bd(e)&&Hd(e)}function zd(t){return Nd(t)&&t.Pa.length<10}function Ud(t,e){t.Pa.push(e);const n=$d(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Bd(t){return Nd(t)&&!$d(t).M_()&&t.Pa.length>0}function Hd(t){$d(t).start()}async function Wd(t){$d(t).na()}async function qd(t){const e=$d(t);for(const n of t.Pa)e.X_(n.mutations)}async function Kd(t,e,n){const i=t.Pa.shift(),r=su.from(i,e,n);await jd(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Vd(t)}async function Gd(t,e){e&&$d(t).Z_&&await async function(t,e){if(function(t){return uu(t)&&t!==Js.ABORTED}(e.code)){const n=t.Pa.shift();$d(t).N_(),await jd(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),await Vd(t)}}(t,e),Bd(t)&&Hd(t)}async function Qd(t,e){const n=$s(t);n.asyncQueue.verifyOperationInProgress(),Ws(wd,"RemoteStore received new credentials");const i=Nd(n);n.Ia.add(3),await Ed(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Sd(n)}async function Yd(t,e){const n=$s(t);e?(n.Ia.delete(2),await Sd(n)):e||(n.Ia.add(2),await Ed(n),n.Aa.set("Unknown"))}function Xd(t){return t.Va||(t.Va=function(t,e,n){const i=$s(t);return i.ia(),new md(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Zo:Od.bind(null,t),e_:Rd.bind(null,t),n_:Md.bind(null,t),J_:Ld.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Pd(t)?Ad(t):t.Aa.set("Unknown")):(await t.Va.stop(),Dd(t))})),t.Va}function $d(t){return t.ma||(t.ma=function(t,e,n){const i=$s(t);return i.ia(),new yd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Wd.bind(null,t),n_:Gd.bind(null,t),ea:qd.bind(null,t),ta:Kd.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Vd(t)):(await t.ma.stop(),t.Pa.length>0&&(Ws(wd,"Stopping write stream with ".concat(t.Pa.length," pending writes")),t.Pa=[]))})),t.ma}class Jd{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new to,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new Jd(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zs(Js.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zd(t,e){if(qs("AsyncQueue","".concat(e,": ").concat(t)),Go(t))return new Zs(Js.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class tf{static emptySet(t){return new tf(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||xo.comparator(e.key,n.key):(t,e)=>xo.comparator(t.key,e.key),this.keyedMap=yc(),this.sortedSet=new Aa(this.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof tf))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new tf;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class ef{constructor(){this.fa=new Aa(xo.comparator)}track(t){const e=t.doc.key,n=this.fa.get(e);n?0!==t.type&&3===n.type?this.fa=this.fa.insert(e,t):3===t.type&&1!==n.type?this.fa=this.fa.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.fa=this.fa.remove(e):1===t.type&&2===n.type?this.fa=this.fa.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):Qs(63341,{At:t,ga:n}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,n)=>{t.push(n)}),t}}class nf{constructor(t,e,n,i,r,s,o,a,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach(t=>{s.push({type:0,doc:t})}),new nf(t,e,tf.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&oc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class rf{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class sf{constructor(){this.queries=of(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(t,e){const n=$s(t),i=n.queries;n.queries=of(),i.forEach((t,n)=>{for(const i of n.wa)i.onError(e)})}(this,new Zs(Js.ABORTED,"Firestore shutting down"))}}function of(){return new fc(t=>ac(t),oc)}async function af(t,e){const n=$s(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new rf,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await n.onListen(r,!0);break;case 1:s.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(t){const n=Zd(t,"Initialization of query '".concat(lc(e.query),"' failed"));return void e.onError(n)}n.queries.set(r,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&hf(n)}async function lf(t,e){const n=$s(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const t=s.wa.indexOf(e);t>=0&&(s.wa.splice(t,1),0===s.wa.length?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function cf(t,e){const n=$s(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.wa)t.Ca(r)&&(i=!0);e.ya=r}}i&&hf(n)}function uf(t,e,n){const i=$s(t),r=i.queries.get(e);if(r)for(const s of r.wa)s.onError(n);i.queries.delete(e)}function hf(t){t.Da.forEach(t=>{t.next()})}var df,ff;(ff=df||(df={})).Fa="default",ff.Cache="cache";class pf{constructor(t,e,n){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new nf(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==e;return(!this.options.ka||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}La(t){t=nf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==df.Cache}}class gf{constructor(t){this.key=t}}class mf{constructor(t){this.key=t}}class yf{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ec(),this.mutatedKeys=Ec(),this.Xa=hc(t),this.eu=new tf(this.Xa)}get tu(){return this.Ha}nu(t,e){const n=e?e.ru:new ef,i=e?e.eu:this.eu;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((t,e)=>{const c=i.get(t),u=cc(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.iu(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Xa(u,a)>0||l&&this.Xa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{eu:s,ru:n,Ds:o,mutatedKeys:r}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const s=t.ru.pa();s.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qs(20277,{At:t})}};return n(t)-n(e)}(t.type,e.type)||this.Xa(t.doc,e.doc)),this.su(n),i=null!=i&&i;const o=e&&!i?this.ou():[],a=0===this.Za.size&&this.current&&!i?1:0,l=a!==this.Ya;return this.Ya=a,0!==s.length||l?{snapshot:new nf(this.query,t.eu,r,s,t.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ef,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Ec(),this.eu.forEach(t=>{this.au(t.key)&&(this.Za=this.Za.add(t.key))});const e=[];return t.forEach(t=>{this.Za.has(t)||e.push(new mf(t))}),this.Za.forEach(n=>{t.has(n)||e.push(new gf(n))}),e}uu(t){this.Ha=t.qs,this.Za=Ec();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return nf.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const vf="SyncEngine";class bf{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class _f{constructor(t){this.key=t,this.lu=!1}}class wf{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new fc(t=>ac(t),oc),this.Tu=new Map,this.Iu=new Set,this.du=new Aa(xo.comparator),this.Eu=new Map,this.Au=new Ih,this.Ru={},this.Vu=new Map,this.mu=ph.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function xf(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Hf(t);let r;const s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await Ef(i,e,n,!0),r}async function Sf(t,e){const n=Hf(t);await Ef(n,e,!0,!1)}async function Ef(t,e,n,i){const r=await Qh(t.localStore,nc(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await kf(t,e,s,"current"===o,r.resumeToken)),t.isPrimaryClient&&n&&kd(t.remoteStore,r),a}async function kf(t,e,n,i,r){t.gu=(e,n,i)=>async function(t,e,n,i){let r=e.view.nu(n);r.Ds&&(r=await Xh(t.localStore,e.query,!1).then(t=>{let{documents:n}=t;return e.view.nu(n,r)}));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return Ff(t,e.targetId,a._u),a.snapshot}(t,e,n,i);const s=await Xh(t.localStore,e,!0),o=new yf(e,s.qs),a=o.nu(s.documents),l=bu.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),c=o.applyChanges(a,t.isPrimaryClient,l);Ff(t,n,c._u);const u=new bf(e,n,o);return t.Pu.set(e,u),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function Tf(t,e,n){const i=$s(t),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(t=>!oc(t,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Yh(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Td(i.remoteStore,r.targetId),Mf(i,r.targetId)}).catch(Wo)):(Mf(i,r.targetId),await Yh(i.localStore,r.targetId,!0))}async function Cf(t,e){const n=$s(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Td(n.remoteStore,i.targetId))}async function If(t,e){const n=$s(t);try{const t=await function(t,e){const n=$s(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const o=[];e.targetChanges.forEach((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.hi.removeMatchingKeys(t,s.removedDocuments,a).next(()=>n.hi.addMatchingKeys(t,s.addedDocuments,a)));let c=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(La.EMPTY_BYTE_STRING,Mo.min()).withLastLimboFreeSnapshotVersion(Mo.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.hi.updateTargetData(t,c))});let a=gc(),l=Ec();if(e.documentUpdates.forEach(i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))}),o.push(Kh(t,s,e.documentUpdates).next(t=>{a=t.Ls,l=t.ks})),!i.isEqual(Mo.min())){const e=n.hi.getLastRemoteSnapshotVersion(t).next(e=>n.hi.setTargetsMetadata(t,t.currentSequenceNumber,i));o.push(e)}return qo.waitFor(o).next(()=>s.apply(t)).next(()=>n.localDocuments.getLocalViewOfDocuments(t,a,l)).next(()=>a)}).then(t=>(n.Fs=r,t))}(n.localStore,e);e.targetChanges.forEach((t,e)=>{const i=n.Eu.get(e);i&&(Xs(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,22616),t.addedDocuments.size>0?i.lu=!0:t.modifiedDocuments.size>0?Xs(i.lu,14607):t.removedDocuments.size>0&&(Xs(i.lu,42227),i.lu=!1))}),await zf(n,t,e)}catch(t){await Wo(t)}}function Af(t,e,n){const i=$s(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.Pu.forEach((n,i)=>{const r=i.view.va(e);r.snapshot&&t.push(r.snapshot)}),function(t,e){const n=$s(t);n.onlineState=e;let i=!1;n.queries.forEach((t,n)=>{for(const r of n.wa)r.va(e)&&(i=!0)}),i&&hf(n)}(i.eventManager,e),t.length&&i.hu.J_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Pf(t,e,n){const i=$s(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let t=new Aa(xo.comparator);t=t.insert(s,xl.newNoDocument(s,Mo.min()));const n=Ec().add(s),r=new vu(Mo.min(),new Map,new Aa(ho),t,n);await If(i,r),i.du=i.du.remove(s),i.Eu.delete(e),Vf(i)}else await Yh(i.localStore,e,!1).then(()=>Mf(i,e,n)).catch(Wo)}async function Nf(t,e){const n=$s(t),i=e.batch.batchId;try{const t=await function(t,e){const n=$s(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const i=e.batch.keys(),r=n.Os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=qo.resolve();return s.forEach(t=>{o=o.next(()=>i.getEntry(e,t)).next(e=>{const s=n.docVersions.get(t);Xs(null!==s,48541),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))})}),o.next(()=>t.mutationQueue.removeMutationBatch(e,r))}(n,t,e,r).next(()=>r.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Ec();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e))).next(()=>n.localDocuments.getDocuments(t,i))})}(n.localStore,e);Rf(n,i,null),Of(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await zf(n,t)}catch(t){await Wo(t)}}async function Df(t,e,n){const i=$s(t);try{const t=await function(t,e){const n=$s(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next(e=>(Xs(null!==e,37113),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e))).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i)).next(()=>n.localDocuments.getDocuments(t,i))})}(i.localStore,e);Rf(i,e,n),Of(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await zf(i,t)}catch(n){await Wo(n)}}function Of(t,e){(t.Vu.get(e)||[]).forEach(t=>{t.resolve()}),t.Vu.delete(e)}function Rf(t,e,n){const i=$s(t);let r=i.Ru[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function Mf(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(e=>{t.Au.containsKey(e)||Lf(t,e)})}function Lf(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&(Td(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Vf(t))}function Ff(t,e,n){for(const i of n)i instanceof gf?(t.Au.addReference(i.key,e),jf(t,i)):i instanceof mf?(Ws(vf,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||Lf(t,i.key)):Qs(19791,{yu:i})}function jf(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(Ws(vf,"New document in limbo: "+n),t.Iu.add(i),Vf(t))}function Vf(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new xo(bo.fromString(e)),i=t.mu.next();t.Eu.set(i,new _f(n)),t.du=t.du.insert(n,i),kd(t.remoteStore,new sh(nc(Jl(n.path)),i,"TargetPurposeLimboResolution",Qo.ue))}}async function zf(t,e,n){const i=$s(t),r=[],s=[],o=[];i.Pu.isEmpty()||(i.Pu.forEach((t,a)=>{o.push(i.gu(a,e,n).then(t=>{var e;if((t||n)&&i.isPrimaryClient){const r=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(t){r.push(t);const e=jh.Es(a.targetId,t);s.push(e)}}))}),await Promise.all(o),i.hu.J_(r),await async function(t,e){const n=$s(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>qo.forEach(e,e=>qo.forEach(e.Is,i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i)).next(()=>qo.forEach(e.ds,i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))}catch(t){if(!Go(t))throw t;Ws(Uh,"Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.Fs.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Fs=n.Fs.insert(t,r)}}}(i.localStore,s))}async function Uf(t,e){const n=$s(t);if(!n.currentUser.isEqual(e)){Ws(vf,"User change. New user:",e.toKey());const t=await Wh(n.localStore,e);n.currentUser=e,function(t,e){t.Vu.forEach(t=>{t.forEach(t=>{t.reject(new Zs(Js.CANCELLED,e))})}),t.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await zf(n,t.Bs)}}function Bf(t,e){const n=$s(t),i=n.Eu.get(e);if(i&&i.lu)return Ec().add(i.key);{let t=Ec();const i=n.Tu.get(e);if(!i)return t;for(const e of i){const i=n.Pu.get(e);t=t.unionWith(i.view.tu)}return t}}function Hf(t){const e=$s(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=If.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pf.bind(null,e),e.hu.J_=cf.bind(null,e.eventManager),e.hu.pu=uf.bind(null,e.eventManager),e}function Wf(t){const e=$s(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Df.bind(null,e),e}class qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=dd(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return Hh(this.persistence,new zh,t.initialUser,this.serializer)}Du(t){return new Rh(Lh.Vi,this.serializer)}bu(t){return new Zh}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qf.provider={build:()=>new qf};class Kf extends qf{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Xs(this.persistence.referenceDelegate instanceof Fh,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new bh(n,t.asyncQueue,e)}Du(t){const e=void 0!==this.cacheSizeBytes?fh.withCacheSize(this.cacheSizeBytes):fh.DEFAULT;return new Rh(t=>Fh.Vi(t,e),this.serializer)}}class Gf{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Af(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uf.bind(null,this.syncEngine),await Yd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new sf}createDatastore(t){const e=dd(t.databaseInfo.databaseId),n=function(t){return new ud(t)}(t.databaseInfo);return function(t,e,n,i){return new bd(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new xd(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,t=>Af(this.syncEngine,t,0),nd.C()?new nd:new td)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new wf(t,e,n,i,r,s);return o&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=$s(t);Ws(wd,"RemoteStore shutting down."),e.Ia.add(5),await Ed(e),e.Ea.shutdown(),e.Aa.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}Gf.provider={build:()=>new Gf};class Qf{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):qs("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}const Yf="FirestoreClient";class Xf{constructor(t,e,n,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=zs.UNAUTHENTICATED,this.clientId=uo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async t=>{Ws(Yf,"Received user=",t.uid),await this.authCredentialListener(t),this.user=t}),this.appCheckCredentials.start(n,t=>(Ws(Yf,"Received new app check token=",t),this.appCheckCredentialListener(t,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new to;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Zd(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function $f(t,e){t.asyncQueue.verifyOperationInProgress(),Ws(Yf,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async t=>{i.isEqual(t)||(await Wh(e.localStore,t),i=t)}),e.persistence.setDatabaseDeletedListener(()=>{Ks("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Ws("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(t=>{Ks("Terminating Firestore due to IndexedDb database deletion failed",t)})}),t._offlineComponents=e}async function Jf(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Zf(t);Ws(Yf,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(t=>Qd(e.remoteStore,t)),t.setAppCheckTokenChangeListener((t,n)=>Qd(e.remoteStore,n)),t._onlineComponents=e}async function Zf(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ws(Yf,"Using user provided OfflineComponentProvider");try{await $f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Js.FAILED_PRECONDITION||t.code===Js.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Ks("Error using user provided cache. Falling back to memory cache: "+n),await $f(t,new qf)}}else Ws(Yf,"Using default OfflineComponentProvider"),await $f(t,new Kf(void 0));return t._offlineComponents}async function tp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ws(Yf,"Using user provided OnlineComponentProvider"),await Jf(t,t._uninitializedComponentsProvider._online)):(Ws(Yf,"Using default OnlineComponentProvider"),await Jf(t,new Gf))),t._onlineComponents}function ep(t){return tp(t).then(t=>t.syncEngine)}async function np(t){const e=await tp(t),n=e.eventManager;return n.onListen=xf.bind(null,e.syncEngine),n.onUnlisten=Tf.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Sf.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Cf.bind(null,e.syncEngine),n}function ip(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new to;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,i,r){const s=new Qf({next:n=>{s.Ou(),e.enqueueAndForget(()=>lf(t,o)),n.fromCache&&"server"===i.source?r.reject(new Zs(Js.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new pf(n,s,{includeMetadataChanges:!0,ka:!0});return af(t,o)}(await np(t),t.asyncQueue,e,n,i)),i.promise}function rp(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const sp=new Map,op="firestore.googleapis.com",ap=!0;class lp{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Zs(Js.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=op,this.ssl=ap}else this.host=t.host,this.ssl=null!==(e=t.ssl)&&void 0!==e?e:ap;if(this.isUsingEmulator=void 0!==t.emulatorOptions,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=dh;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<mh)throw new Zs(Js.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new Zs(Js.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rp(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Zs(Js.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new Zs(Js.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new Zs(Js.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class cp{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Zs(Js.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Zs(Js.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lp(t),this._emulatorOptions=t.emulatorOptions||{},void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new no;switch(t.type){case"firstParty":return new so(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Zs(Js.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=sp.get(t);e&&(Ws("ComponentProvider","Removing Datastore"),sp.delete(t),e.terminate())}(this),Promise.resolve()}}class up{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new up(this.firestore,t,this._query)}}class hp{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dp(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new hp(this.firestore,t,this._key)}toJSON(){return{type:hp._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(No(e,hp._jsonSchema))return new hp(t,n||null,new xo(bo.fromString(e.referencePath)))}}hp._jsonSchemaVersion="firestore/documentReference/1.0",hp._jsonSchema={type:Po("string",hp._jsonSchemaVersion),referencePath:Po("string")};class dp extends up{constructor(t,e,n){super(t,e,Jl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new hp(this.firestore,null,new xo(t))}withConverter(t){return new dp(this.firestore,t,this._path)}}function fp(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=xs(t),So("collection","path",e),t instanceof cp){const n=bo.fromString(e,...i);return ko(n),new dp(t,null,n)}{if(!(t instanceof hp||t instanceof dp))throw new Zs(Js.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(bo.fromString(e,...i));return ko(n),new dp(t.firestore,null,n)}}function pp(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=xs(t),1===arguments.length&&(e=uo.newId()),So("doc","path",e),t instanceof cp){const n=bo.fromString(e,...i);return Eo(n),new hp(t,null,new xo(n))}{if(!(t instanceof hp||t instanceof dp))throw new Zs(Js.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(bo.fromString(e,...i));return Eo(n),new hp(t.firestore,t instanceof dp?t.converter:null,new xo(n))}}const gp="AsyncQueue";class mp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fd(this,"async_queue_retry"),this.oc=()=>{const t=hd();t&&Ws(gp,"Visibility state changed to "+t.visibilityState),this.F_.y_()},this._c=t;const e=hd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=hd();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new to;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Go(t))throw t;Ws(gp,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(t=>{throw this.tc=t,this.nc=!1,qs("INTERNAL UNHANDLED ERROR: ",yp(t)),t}).then(t=>(this.nc=!1,t))));return this._c=e,e}enqueueAfterDelay(t,e,n){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const i=Jd.createAndSchedule(this,t,e,n,t=>this.lc(t));return this.ec.push(i),i}ac(){this.tc&&Qs(47125,{hc:yp(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do{t=this._c,await t}while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function yp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class vp extends cp{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new mp,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mp(t),this._firestoreClient=void 0,await t}}}function bp(t){if(t._terminated)throw new Zs(Js.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_p(t),t._firestoreClient}function _p(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new Qa(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,rp(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Xf(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}class wp{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wp(La.fromBase64String(t))}catch(t){throw new Zs(Js.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new wp(La.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:wp._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(No(t,wp._jsonSchema))return wp.fromBase64String(t.bytes)}}wp._jsonSchemaVersion="firestore/bytes/1.0",wp._jsonSchema={type:Po("string",wp._jsonSchemaVersion),bytes:Po("string")};class xp{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new Zs(Js.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wo(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Sp{constructor(t){this._methodName=t}}class Ep{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Zs(Js.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Zs(Js.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ho(this._lat,t._lat)||ho(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ep._jsonSchemaVersion}}static fromJSON(t){if(No(t,Ep._jsonSchema))return new Ep(t.latitude,t.longitude)}}Ep._jsonSchemaVersion="firestore/geoPoint/1.0",Ep._jsonSchema={type:Po("string",Ep._jsonSchemaVersion),latitude:Po("number"),longitude:Po("number")};class kp{constructor(t){this._values=(t||[]).map(t=>t)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}toJSON(){return{type:kp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(No(t,kp._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(t=>"number"==typeof t))return new kp(t.vectorValues);throw new Zs(Js.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kp._jsonSchemaVersion="firestore/vectorValue/1.0",kp._jsonSchema={type:Po("string",kp._jsonSchemaVersion),vectorValues:Po("object")};const Tp=/^__.*__$/;class Cp{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Jc(t,this.data,this.fieldMask,e,this.fieldTransforms):new $c(t,this.data,e,this.fieldTransforms)}}class Ip{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Jc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ap(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qs(40011,{Ec:t})}}class Pp{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Ac(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Pp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Rc({path:n,mc:!1});return i.fc(t),i}gc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Rc({path:n,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return qp(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(0===t.length)throw this.wc("Document fields must not be empty");if(Ap(this.Ec)&&Tp.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class Np{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||dd(t)}Dc(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Pp({Ec:t,methodName:e,bc:n,path:wo.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dp(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new Np(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Op(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,r);Up("Data must be an object, but it was:",o,i);const a=Vp(i,o);let l,c;if(s.merge)l=new Ra(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Bp(e,i,n);if(!o.contains(r))throw new Zs(Js.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));Kp(t,r)||t.push(r)}l=new Ra(t),c=o.fieldTransforms.filter(t=>l.covers(t.field))}else l=null,c=o.fieldTransforms;return new Cp(new _l(a),l,c)}class Rp extends Sp{_toFieldTransform(t){if(2!==t.Ec)throw 1===t.Ec?t.wc("".concat(this._methodName,"() can only appear at the top level of your update data")):t.wc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Rp}}function Mp(t,e,n,i){const r=t.Dc(1,e,n);Up("Data must be an object, but it was:",r,i);const s=[],o=_l.empty();Ca(i,(t,i)=>{const a=Wp(e,t,n);i=xs(i);const l=r.gc(a);if(i instanceof Rp)s.push(a);else{const t=jp(i,l);null!=t&&(s.push(a),o.set(a,t))}});const a=new Ra(s);return new Ip(o,a,r.fieldTransforms)}function Lp(t,e,n,i,r,s){const o=t.Dc(1,e,n),a=[Bp(e,i,n)],l=[r];if(s.length%2!=0)throw new Zs(Js.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Bp(e,s[d])),l.push(s[d+1]);const c=[],u=_l.empty();for(let d=a.length-1;d>=0;--d)if(!Kp(c,a[d])){const t=a[d];let e=l[d];e=xs(e);const n=o.gc(t);if(e instanceof Rp)c.push(t);else{const i=jp(e,n);null!=i&&(c.push(t),u.set(t,i))}}const h=new Ra(c);return new Ip(u,h,o.fieldTransforms)}function Fp(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return jp(n,t.Dc(i?4:3,e))}function jp(t,e){if(zp(t=xs(t)))return Up("Unsupported field value:",e,t),Vp(t,e);if(t instanceof Sp)return function(t,e){if(!Ap(e.Ec))throw e.wc("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.wc("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&4!==e.Ec)throw e.wc("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=jp(r,e.yc(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=xs(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ac(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Ro.fromDate(t);return{timestampValue:Du(e.serializer,n)}}if(t instanceof Ro){const n=new Ro(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Du(e.serializer,n)}}if(t instanceof Ep)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wp)return{bytesValue:Ou(e.serializer,t._byteString)};if(t instanceof hp){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.wc("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Lu(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof kp)return function(t,e){return{mapValue:{fields:{[$a]:{stringValue:tl},[el]:{arrayValue:{values:t.toArray().map(t=>{if("number"!=typeof t)throw e.wc("VectorValues must only contain numeric values.");return Cc(e.serializer,t)})}}}}}}(t,e);throw e.wc("Unsupported field value: ".concat(Co(t)))}(t,e)}function Vp(t,e){const n={};return Ia(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(t,(t,i)=>{const r=jp(i,e.Vc(t));null!=r&&(n[t]=r)}),{mapValue:{fields:n}}}function zp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ro||t instanceof Ep||t instanceof wp||t instanceof hp||t instanceof Sp||t instanceof kp)}function Up(t,e,n){if(!zp(n)||!To(n)){const i=Co(n);throw"an object"===i?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function Bp(t,e,n){if((e=xs(e))instanceof xp)return e._internalPath;if("string"==typeof e)return Wp(t,e);throw qp("Field path arguments must be of type string or ",t,!1,void 0,n)}const Hp=new RegExp("[~\\*/\\[\\]]");function Wp(t,e,n){if(e.search(Hp)>=0)throw qp("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new xp(...e.split("."))._internalPath}catch(i){throw qp("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function qp(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new Zs(Js.INVALID_ARGUMENT,a+t+l)}function Kp(t,e){return t.some(t=>t.isEqual(e))}class Gp{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new hp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Qp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Yp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Qp extends Gp{data(){return super.data()}}function Yp(t,e){return"string"==typeof e?Wp(t,e):e instanceof xp?e._internalPath:e._delegate._internalPath}function Xp(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Zs(Js.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $p{}class Jp extends $p{}function Zp(t,e){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];e instanceof $p&&n.push(e),n=n.concat(r),function(t){const e=t.filter(t=>t instanceof ng).length,n=t.filter(t=>t instanceof tg).length;if(e>1||e>0&&n>0)throw new Zs(Js.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)t=o._apply(t);return t}class tg extends Jp{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new tg(t,e,n)}_apply(t){const e=this._parse(t);return og(t._query,e),new up(t.firestore,t.converter,rc(t._query,e))}_parse(t){const e=Dp(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Zs(Js.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){sg(o,s);const e=[];for(const n of o)e.push(rg(i,t,n));a={arrayValue:{values:e}}}else a=rg(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||sg(o,s),a=Fp(n,e,o,"in"===s||"not-in"===s);return Al.create(r,s,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function eg(t,e,n){const i=e,r=Yp("where",t);return tg._create(r,i,n)}class ng extends $p{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new ng(t,e)}_parse(t){const e=this._queryConstraints.map(e=>e._parse(t)).filter(t=>t.getFilters().length>0);return 1===e.length?e[0]:Pl.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)og(n,r),n=rc(n,r)}(t._query,e),new up(t.firestore,t.converter,rc(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ig extends Jp{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new ig(t,e,n)}_apply(t){return new up(t.firestore,t.converter,sc(t._query,this._limit,this._limitType))}}function rg(t,e,n){if("string"==typeof(n=xs(n))){if(""===n)throw new Zs(Js.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tc(e)&&-1!==n.indexOf("/"))throw new Zs(Js.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=e.path.child(bo.fromString(n));if(!xo.isDocumentKey(i))throw new Zs(Js.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return hl(t,new xo(i))}if(n instanceof hp)return hl(t,n._key);throw new Zs(Js.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Co(n),"."))}function sg(t,e){if(!Array.isArray(t)||0===t.length)throw new Zs(Js.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function og(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Zs(Js.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new Zs(Js.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ag{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(nl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Va(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(za(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Qs(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ca(t,(t,i)=>{n[t]=this.convertValue(i,e)}),n}convertVectorValue(t){var e,n,i;const r=null===(i=null===(n=null===(e=t.fields)||void 0===e?void 0:e[el].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.map(t=>Va(t.doubleValue));return new kp(r)}convertGeoPoint(t){return new Ep(Va(t.latitude),Va(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ka(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ga(t));default:return null}}convertTimestamp(t){const e=ja(t);return new Ro(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=bo.fromString(t);Xs(rh(n),9688,{name:t});const i=new Xa(n.get(1),n.get(3)),r=new xo(n.popFirst(5));return i.isEqual(e)||qs("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),r}}function lg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class cg{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ug extends Gp{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new hg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Zs(Js.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ug._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),t&&t.isValidDocument()&&t.isFoundDocument()?(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e):e}}ug._jsonSchemaVersion="firestore/documentSnapshot/1.0",ug._jsonSchema={type:Po("string",ug._jsonSchemaVersion),bundleSource:Po("string","DocumentSnapshot"),bundleName:Po("string"),bundle:Po("string")};class hg extends ug{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class dg{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new cg(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new hg(this._firestore,this._userDataWriter,n.key,n,new cg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Zs(Js.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>{const i=new hg(t._firestore,t._userDataWriter,n.doc.key,n.doc,new cg(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}})}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const i=new hg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new cg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:fg(e.type),doc:i,oldIndex:r,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Zs(Js.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=dg._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=uo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],i=[];return this.docs.forEach(t=>{null!==t._document&&(e.push(t._document),n.push(this._userDataWriter.convertObjectMap(t._document.data.value.mapValue.fields,"previous")),i.push(t.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function fg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qs(61501,{type:t})}}dg._jsonSchemaVersion="firestore/querySnapshot/1.0",dg._jsonSchema={type:Po("string",dg._jsonSchemaVersion),bundleSource:Po("string","QuerySnapshot"),bundleName:Po("string"),bundle:Po("string")};class pg extends ag{constructor(t){super(),this.firestore=t}convertBytes(t){return new wp(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new hp(this.firestore,null,e)}}function gg(t){t=Io(t,up);const e=Io(t.firestore,vp),n=bp(e),i=new pg(e);return Xp(t._query),ip(n,t._query).then(n=>new dg(e,i,t,n))}function mg(t,e,n){t=Io(t,hp);const i=Io(t.firestore,vp),r=Dp(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(e=xs(e))||e instanceof xp?Lp(r,"updateDoc",t._key,e,n,a):Mp(r,"updateDoc",t._key,e),yg(i,[s.toMutation(t._key,Hc.exists(!0))])}function yg(t,e){return function(t,e){const n=new to;return t.asyncQueue.enqueueAndForget(async()=>async function(t,e,n){const i=Wf(t);try{const t=await function(t,e){const n=$s(t),i=Ro.now(),r=e.reduce((t,e)=>t.add(e.key),Ec());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>{let a=gc(),l=Ec();return n.Os.getEntries(t,r).next(t=>{a=t,a.forEach((t,e)=>{e.isValidDocument()||(l=l.add(t))})}).next(()=>n.localDocuments.getOverlayedDocuments(t,a)).next(r=>{s=r;const o=[];for(const t of e){const e=Yc(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Jc(t.key,e,wl(e.value.mapValue),Hc.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)}).next(e=>{o=e;const i=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)})}).then(()=>({batchId:o.batchId,changes:vc(s)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Ru[t.currentUser.toKey()];i||(i=new Aa(ho)),i=i.insert(e,n),t.Ru[t.currentUser.toKey()]=i}(i,t.batchId,n),await zf(i,t.changes),await Vd(i.remoteStore)}catch(t){const e=Zd(t,"Failed to persist write");n.reject(e)}}(await ep(t),e,n)),n.promise}(bp(t),e)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){Us=t}(Zt),Qt(new Ss("firestore",(t,n)=>{let{instanceIdentifier:i,options:r}=n;const s=t.getProvider("app").getImmediate(),o=new vp(new io(t.getProvider("auth-internal")),new ao(s,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Zs(Js.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(t.options.projectId,e)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),ee(js,Vs,t),ee(js,Vs,"esm2017")}();const vg=te({apiKey:"AIzaSyC-pDvc9tXpHkqxX-kR2FAl225GcNmmDW0",authDomain:"mandarintrainer-26164.firebaseapp.com",projectId:"mandarintrainer-26164",storageBucket:"mandarintrainer-26164.firebasestorage.app",messagingSenderId:"391352347469",appId:"1:391352347469:web:0d8e92faddb6367f156504"}),bg=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;const e=Wt.get(t);if(!e&&t===Bt&&D())return te();if(!e)throw $t.create("no-app",{appName:t});return e}();const e=Yt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=Yt(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(Ie(n.getOptions(),null!==e&&void 0!==e?e:{}))return t;He(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Zr,persistence:[cr,Hi,Qi]}),i=be("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const t=new URL(i,location.origin);if(location.origin===t.origin){const e=(r=t.toString(),async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>is)return;const i=null===e||void 0===e?void 0:e.token;rs!==i&&(rs=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(t,e,n){Me(t).beforeAuthStateChanged(e,n)}(n,e,()=>e(n.currentUser)),function(t,e,n,i){Me(t).onIdTokenChanged(e,n,i)}(n,t=>e(t))}}var r;const s=ve("auth");return s&&di(n,"http://".concat(s)),n}(vg),_g=(new Ai,function(t,e,n){n||(n=Ya);const i=Yt(t,"firestore");if(i.isInitialized(n)){const t=i.getImmediate({identifier:n});if(_s(i.getOptions(n),e))return t;throw new Zs(Js.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==e.cacheSizeBytes&&void 0!==e.localCache)throw new Zs(Js.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==e.cacheSizeBytes&&-1!==e.cacheSizeBytes&&e.cacheSizeBytes<mh)throw new Zs(Js.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&fs(e.host)&&async function(t){(await fetch(t,{credentials:"include"})).ok}(e.host),i.initialize({options:e,instanceIdentifier:n})}(vg,{cacheSizeBytes:-1})),wg=200,xg="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",Sg=async()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e="";for(let n=0;n<t;n++)e+=xg.charAt(Math.floor(62*Math.random()));return e}();async function Eg(t,e,n){try{if((await kg(t)).length>=50)throw new Error("Maximum limit of ".concat(50," sets reached"));if(n.length>wg)throw new Error("Maximum limit of ".concat(wg," words per set reached"));const i=await Sg();return(await function(t,e){const n=Io(t.firestore,vp),i=pp(t),r=lg(t.converter,e);return yg(n,[Op(Dp(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Hc.exists(!1))]).then(()=>i)}(fp(_g,"vocabSets"),{userId:t,ownerId:t,setName:e,vocabItems:n,slug:i,isPublic:!0,createdAt:new Date,updatedAt:new Date})).id}catch(i){throw console.error("Error creating vocab set:",i),i}}async function kg(t){try{const n=Zp(fp(_g,"vocabSets"),eg("userId","==",t)),i=await gg(n),r=[];for(const s of i.docs){const n=s.data();let i=!1;const o={};if(n.ownerId||(o.ownerId=t,i=!0),void 0===n.isPublic&&(o.isPublic=!0,i=!0),n.slug||(o.slug=await Sg(),i=!0),i)try{await mg(pp(_g,"vocabSets",s.id),a(a({},o),{},{updatedAt:new Date}))}catch(e){console.error("Error backfilling set",s.id,e)}r.push(a(a({id:s.id},n),o))}return r}catch(n){throw console.error("Error fetching vocab sets:",n),n}}async function Tg(t){const e=await Sg(),n=pp(_g,"vocabSets",t);return await mg(n,{slug:e,updatedAt:new Date}),e}async function Cg(t){try{const n=Zp(fp(_g,"vocabSets"),eg("slug","==",t),(Ao("limit",e=1),ig._create("limit",e,"F"))),i=await gg(n);if(i.empty)return null;const r=i.docs[0];return a({id:r.id},r.data())}catch(n){throw console.error("Error fetching set by slug:",n),n}var e}async function Ig(t){try{await(e=pp(_g,"vocabSets",t),yg(Io(e.firestore,vp),[new nu(e._key,Hc.none())]))}catch(n){throw console.error("Error deleting vocab set:",n),n}var e}const Ag=(0,t.createContext)();function Pg(){return(0,t.useContext)(Ag)}function Ng(e){let{children:n}=e;const[i,r]=(0,t.useState)(null),[s,o]=(0,t.useState)(!0);(0,t.useEffect)(()=>{const t=function(t,e,n,i){return Me(t).onAuthStateChanged(e,n,i)}(bg,t=>{r(t),o(!1),t&&async function(t){try{const e=await kg(t);e&&0!==e.length?console.log("User already has sets, no need to create ExampleSet."):(await Eg(t,"Lesson 6 Vocabulary",[{character:"\u8003\u5377",pinyin:"kao3 juan4",definition:"Exam paper"},{character:"\u7ffb\u8b6f",pinyin:"fan1 yi4",definition:"Translate"},{character:"\u6263\u5206",pinyin:"kou4 fen1",definition:"Deduct points"},{character:"\u795d\u8a5e",pinyin:"zhu3 ci2",definition:"Sentence subject"},{character:"\u6587\u6cd5",pinyin:"wen2 fa3",definition:"Grammar"},{character:"\u6210",pinyin:"cheng2",definition:"To become"},{character:"\u4f4e",pinyin:"di1",definition:"To be low"},{character:"\u984c\u76ee",pinyin:"ti2 mu4",definition:"Subject"},{character:"\u7b97\u662f",pinyin:"suan4 shi4",definition:"To be considered as"},{character:"\u4e86\u89e3",pinyin:"liao3 jie3",definition:"To understand"},{character:"\u8907\u7fd2",pinyin:"fu4 xi2",definition:"Review"},{character:"\u8a18\u4f4f",pinyin:"ji4 zhu4",definition:"To remember"},{character:"\u8e22\u958b",pinyin:"ti1 kai1",definition:"To kick away"},{character:"\u5fc3\u7406\u5b78",pinyin:"xin1 li3 xue2",definition:"Psychology"},{character:"\u721b",pinyin:"lan4",definition:"To be worn out"},{character:"\u5012\u6963",pinyin:"dao3 mei2",definition:"To have bad luck"},{character:"\u9ad8\u4e2d",pinyin:"gao1 zhong1",definition:"High school"},{character:"\u81ea\u52d5\u81ea\u767c",pinyin:"zi4 dong4 zi4 fa1",definition:"Self-motivated"},{character:"\u5982\u679c",pinyin:"ru2 guo3",definition:"If"},{character:"\u8a0e\u8ad6",pinyin:"tao3 lun4",definition:"To discuss"},{character:"\u96e3\u904e",pinyin:"nan2 guo4",definition:"To be sad"},{character:"\u671f\u672b\u8003",pinyin:"qi2 mo4 kao3",definition:"Final Exam"},{character:"\u52a0\u6cb9",pinyin:"jia1 you2",definition:"Cheer on"},{character:"\u4f5c\u696d",pinyin:"zuo4 ye4",definition:"Homework"},{character:"\u81c9\u8272",pinyin:"lian3 se4",definition:"Facial Expression"},{character:"\u5831\u544a",pinyin:"bao4 gao4",definition:"To make report"},{character:"\u67e5",pinyin:"cha2",definition:"To check"},{character:"\u7576",pinyin:"dang1",definition:"To work as"},{character:"\u52a9\u6559",pinyin:"zhu4 jiao4",definition:"Teaching Assistant"},{character:"\u8f15\u9b06",pinyin:"qing1 song1",definition:"To be relaxed"},{character:"\u80cc\u66f8",pinyin:"bei4 shu1",definition:"To recite from memory"},{character:"\u53ca\u683c",pinyin:"ji2 ge2",definition:"To pass test"},{character:"\u53b2\u5bb3",pinyin:"li4 hai4",definition:"To be fierce"},{character:"\u6b7b\u5b9a\u4e86",pinyin:"si3 ding4 le",definition:"Will surely die"},{character:"\u5176\u5be6",pinyin:"qi2 shi2",definition:"Actually, in fact"},{character:"\u5be7\u53ef",pinyin:"ning2 ke3",definition:"Would sooner"},{character:"\u7121\u804a",pinyin:"wu2 liao2",definition:"To be bored"},{character:"\u975e\u3002\u3002\u3002\u4e0d\u53ef",pinyin:"fei1...bu4 ke3",definition:"Have to"},{character:"\u60f3\u767c",pinyin:"xiang3 fa3",definition:"Point of view"}]),console.log("Lesson 6 Vocabulary created for new user."))}catch(e){console.error("Error checking or creating Lesson 6 Vocabulary:",e)}}(t.uid)});return t},[]);const a={currentUser:i,signInWithGoogle:function(){const t=new Ai;return async function(t,e,n){if(Xt(t.app))return Promise.reject(We(t,"operation-not-supported-in-this-environment"));const i=ti(t);Ge(t,e,Ti);const r=gr(i,n);return new xr(i,"signInViaPopup",e,r).executeNotNull()}(bg,t)},logout:async function(){try{await function(t){return Me(t).signOut()}(bg)}catch(t){throw console.error("Failed to log out:",t),t}}};return(0,d.jsx)(Ag.Provider,{value:a,children:!s&&n})}const Dg=(0,t.createContext)();function Og(){return(0,t.useContext)(Dg)}function Rg(e){let{children:n}=e;const[i,r]=(0,t.useState)(()=>{const t=localStorage.getItem("darkMode");return!!t&&JSON.parse(t)});(0,t.useEffect)(()=>{localStorage.setItem("darkMode",JSON.stringify(i)),i?(document.body.style.backgroundColor="#1a1a1a",document.body.style.color="#ffffff"):(document.body.style.backgroundColor="#ffffff",document.body.style.color="#000000")},[i]);const s={isDarkMode:i,toggleDarkMode:()=>{r(t=>!t)}};return(0,d.jsx)(Dg.Provider,{value:s,children:n})}var Mg=/-(.)/g;const Lg=["className","bsPrefix","as"],Fg=t=>{return t[0].toUpperCase()+(e=t,e.replace(Mg,function(t,e){return e.toUpperCase()})).slice(1);var e};function jg(e){let{displayName:n=Fg(e),Component:i,defaultProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t.forwardRef((t,n)=>{let{className:s,bsPrefix:o,as:l=i||"div"}=t,u=c(t,Lg);const f=a(a({},r),u),p=v(o,e);return(0,d.jsx)(l,a({ref:n,className:h()(s,p)},f))});return s.displayName=n,s}const Vg=e=>t.forwardRef((t,n)=>(0,d.jsx)("div",a(a({},t),{},{ref:n,className:h()(t.className,e)}))),zg=["bsPrefix","className","variant","as"],Ug=t.forwardRef((t,e)=>{let{bsPrefix:n,className:i,variant:r,as:s="img"}=t,o=c(t,zg);const l=v(n,"card-img");return(0,d.jsx)(s,a({ref:e,className:h()(r?"".concat(l,"-").concat(r):l,i)},o))});Ug.displayName="CardImg";const Bg=Ug,Hg=t.createContext(null);Hg.displayName="CardHeaderContext";const Wg=Hg,qg=["bsPrefix","className","as"],Kg=t.forwardRef((e,n)=>{let{bsPrefix:i,className:r,as:s="div"}=e,o=c(e,qg);const l=v(i,"card-header"),u=(0,t.useMemo)(()=>({cardHeaderBsPrefix:l}),[l]);return(0,d.jsx)(Wg.Provider,{value:u,children:(0,d.jsx)(s,a(a({ref:n},o),{},{className:h()(r,l)}))})});Kg.displayName="CardHeader";const Gg=Kg,Qg=["bsPrefix","className","bg","text","border","body","children","as"],Yg=Vg("h5"),Xg=Vg("h6"),$g=jg("card-body"),Jg=jg("card-title",{Component:Yg}),Zg=jg("card-subtitle",{Component:Xg}),tm=jg("card-link",{Component:"a"}),em=jg("card-text",{Component:"p"}),nm=jg("card-footer"),im=jg("card-img-overlay"),rm=t.forwardRef((t,e)=>{let{bsPrefix:n,className:i,bg:r,text:s,border:o,body:l=!1,children:u,as:f="div"}=t,p=c(t,Qg);const g=v(n,"card");return(0,d.jsx)(f,a(a({ref:e},p),{},{className:h()(i,g,r&&"bg-".concat(r),s&&"text-".concat(s),o&&"border-".concat(o)),children:l?(0,d.jsx)($g,{children:u}):u}))});rm.displayName="Card";const sm=Object.assign(rm,{Img:Bg,Title:Jg,Subtitle:Zg,Body:$g,Link:tm,Text:em,Header:Gg,Footer:nm,ImgOverlay:im});function om(e,n){let i=0;return t.Children.map(e,e=>t.isValidElement(e)?n(e,i++):e)}const am=["min","now","max","label","visuallyHidden","striped","animated","className","style","variant","bsPrefix"],lm=["isChild"],cm=["min","now","max","label","visuallyHidden","striped","animated","bsPrefix","variant","className","children"];function um(t,e,n){const i=(t-e)/(n-e)*100;return Math.round(1e3*i)/1e3}function hm(t,e){let{min:n,now:i,max:r,label:s,visuallyHidden:o,striped:l,animated:u,className:f,style:p,variant:g,bsPrefix:m}=t,y=c(t,am);return(0,d.jsx)("div",a(a({ref:e},y),{},{role:"progressbar",className:h()(f,"".concat(m,"-bar"),{["bg-".concat(g)]:g,["".concat(m,"-bar-animated")]:u,["".concat(m,"-bar-striped")]:u||l}),style:a({width:"".concat(um(i,n,r),"%")},p),"aria-valuenow":i,"aria-valuemin":n,"aria-valuemax":r,children:o?(0,d.jsx)("span",{className:"visually-hidden",children:s}):s}))}const dm=t.forwardRef((e,n)=>{let{isChild:i=!1}=e;const r=a({min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1},c(e,lm));if(r.bsPrefix=v(r.bsPrefix,"progress"),i)return hm(r,n);const{min:s,now:o,max:l,label:u,visuallyHidden:f,striped:p,animated:g,bsPrefix:m,variant:y,className:b,children:_}=r,w=c(r,cm);return(0,d.jsx)("div",a(a({ref:n},w),{},{className:h()(b,m),children:_?om(_,e=>(0,t.cloneElement)(e,{isChild:!0})):hm({min:s,now:o,max:l,label:u,visuallyHidden:f,striped:p,animated:g,bsPrefix:m,variant:y},n)}))});dm.displayName="ProgressBar";const fm=dm;var pm=n(173),gm=n.n(pm);const mm=["className","variant","aria-label"],ym={"aria-label":gm().string,onClick:gm().func,variant:gm().oneOf(["white"])},vm=t.forwardRef((t,e)=>{let{className:n,variant:i,"aria-label":r="Close"}=t,s=c(t,mm);return(0,d.jsx)("button",a({ref:e,type:"button",className:h()("btn-close",i&&"btn-close-".concat(i),n),"aria-label":r},s))});vm.displayName="CloseButton",vm.propTypes=ym;const bm=vm,_m=["as","className","type","tooltip"],wm={type:gm().string,tooltip:gm().bool,as:gm().elementType},xm=t.forwardRef((t,e)=>{let{as:n="div",className:i,type:r="valid",tooltip:s=!1}=t,o=c(t,_m);return(0,d.jsx)(n,a(a({},o),{},{ref:e,className:h()(i,"".concat(r,"-").concat(s?"tooltip":"feedback"))}))});xm.displayName="Feedback",xm.propTypes=wm;const Sm=xm,Em=t.createContext({}),km=["id","bsPrefix","className","type","isValid","isInvalid","as"],Tm=t.forwardRef((e,n)=>{let{id:i,bsPrefix:r,className:s,type:o="checkbox",isValid:l=!1,isInvalid:u=!1,as:f="input"}=e,p=c(e,km);const{controlId:g}=(0,t.useContext)(Em);return r=v(r,"form-check-input"),(0,d.jsx)(f,a(a({},p),{},{ref:n,type:o,id:i||g,className:h()(s,r,l&&"is-valid",u&&"is-invalid")}))});Tm.displayName="FormCheckInput";const Cm=Tm,Im=["bsPrefix","className","htmlFor"],Am=t.forwardRef((e,n)=>{let{bsPrefix:i,className:r,htmlFor:s}=e,o=c(e,Im);const{controlId:l}=(0,t.useContext)(Em);return i=v(i,"form-check-label"),(0,d.jsx)("label",a(a({},o),{},{ref:n,htmlFor:s||l,className:h()(r,i)}))});Am.displayName="FormCheckLabel";const Pm=Am,Nm=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],Dm=t.forwardRef((e,n)=>{let{id:i,bsPrefix:r,bsSwitchPrefix:s,inline:o=!1,reverse:l=!1,disabled:u=!1,isValid:f=!1,isInvalid:p=!1,feedbackTooltip:g=!1,feedback:m,feedbackType:y,className:b,style:_,title:w="",type:x="checkbox",label:S,children:E,as:k="input"}=e,T=c(e,Nm);r=v(r,"form-check"),s=v(s,"form-switch");const{controlId:C}=(0,t.useContext)(Em),I=(0,t.useMemo)(()=>({controlId:i||C}),[C,i]),A=!E&&null!=S&&!1!==S||function(e,n){return t.Children.toArray(e).some(e=>t.isValidElement(e)&&e.type===n)}(E,Pm),P=(0,d.jsx)(Cm,a(a({},T),{},{type:"switch"===x?"checkbox":x,ref:n,isValid:f,isInvalid:p,disabled:u,as:k}));return(0,d.jsx)(Em.Provider,{value:I,children:(0,d.jsx)("div",{style:_,className:h()(b,A&&r,o&&"".concat(r,"-inline"),l&&"".concat(r,"-reverse"),"switch"===x&&s),children:E||(0,d.jsxs)(d.Fragment,{children:[P,A&&(0,d.jsx)(Pm,{title:w,children:S}),m&&(0,d.jsx)(Sm,{type:y,tooltip:g,children:m})]})})})});Dm.displayName="FormCheck";const Om=Object.assign(Dm,{Input:Cm,Label:Pm});n(440);const Rm=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],Mm=t.forwardRef((e,n)=>{let{bsPrefix:i,type:r,size:s,htmlSize:o,id:l,className:u,isValid:f=!1,isInvalid:p=!1,plaintext:g,readOnly:m,as:y="input"}=e,b=c(e,Rm);const{controlId:_}=(0,t.useContext)(Em);let w;return i=v(i,"form-control"),w=g?{["".concat(i,"-plaintext")]:!0}:{[i]:!0,["".concat(i,"-").concat(s)]:s},(0,d.jsx)(y,a(a({},b),{},{type:r,size:o,ref:n,readOnly:m,id:l||_,className:h()(u,w,f&&"is-valid",p&&"is-invalid","color"===r&&"".concat(i,"-color"))}))});Mm.displayName="FormControl";const Lm=Object.assign(Mm,{Feedback:Sm}),Fm=jg("form-floating"),jm=["controlId","as"],Vm=t.forwardRef((e,n)=>{let{controlId:i,as:r="div"}=e,s=c(e,jm);const o=(0,t.useMemo)(()=>({controlId:i}),[i]);return(0,d.jsx)(Em.Provider,{value:o,children:(0,d.jsx)(r,a(a({},s),{},{ref:n}))})});Vm.displayName="FormGroup";const zm=Vm,Um=["as","bsPrefix","className"],Bm=["className"];const Hm=t.forwardRef((t,e)=>{const[n,{as:i="div",bsPrefix:r,spans:s}]=function(t){let{as:e,bsPrefix:n,className:i}=t,r=c(t,Um);n=v(n,"col");const s=b(),o=_(),l=[],u=[];return s.forEach(t=>{const e=r[t];let i,s,a;delete r[t],"object"===typeof e&&null!=e?({span:i,offset:s,order:a}=e):i=e;const c=t!==o?"-".concat(t):"";i&&l.push(!0===i?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(i)),null!=a&&u.push("order".concat(c,"-").concat(a)),null!=s&&u.push("offset".concat(c,"-").concat(s))}),[a(a({},r),{},{className:h()(i,...l,...u)}),{as:e,bsPrefix:n,spans:l}]}(t),{className:o}=n,l=c(n,Bm);return(0,d.jsx)(i,a(a({},l),{},{ref:e,className:h()(o,!s.length&&r)}))});Hm.displayName="Col";const Wm=Hm,qm=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Km=t.forwardRef((e,n)=>{let{as:i="label",bsPrefix:r,column:s=!1,visuallyHidden:o=!1,className:l,htmlFor:u}=e,f=c(e,qm);const{controlId:p}=(0,t.useContext)(Em);r=v(r,"form-label");let g="col-form-label";"string"===typeof s&&(g="".concat(g," ").concat(g,"-").concat(s));const m=h()(l,r,o&&"visually-hidden",s&&g);return u=u||p,s?(0,d.jsx)(Wm,a({ref:n,as:"label",className:m,htmlFor:u},f)):(0,d.jsx)(i,a({ref:n,className:m,htmlFor:u},f))});Km.displayName="FormLabel";const Gm=Km,Qm=["bsPrefix","className","id"],Ym=t.forwardRef((e,n)=>{let{bsPrefix:i,className:r,id:s}=e,o=c(e,Qm);const{controlId:l}=(0,t.useContext)(Em);return i=v(i,"form-range"),(0,d.jsx)("input",a(a({},o),{},{type:"range",ref:n,className:h()(r,i),id:s||l}))});Ym.displayName="FormRange";const Xm=Ym,$m=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],Jm=t.forwardRef((e,n)=>{let{bsPrefix:i,size:r,htmlSize:s,className:o,isValid:l=!1,isInvalid:u=!1,id:f}=e,p=c(e,$m);const{controlId:g}=(0,t.useContext)(Em);return i=v(i,"form-select"),(0,d.jsx)("select",a(a({},p),{},{size:s,ref:n,className:h()(o,i,r&&"".concat(i,"-").concat(r),l&&"is-valid",u&&"is-invalid"),id:f||g}))});Jm.displayName="FormSelect";const Zm=Jm,ty=["bsPrefix","className","as","muted"],ey=t.forwardRef((t,e)=>{let{bsPrefix:n,className:i,as:r="small",muted:s}=t,o=c(t,ty);return n=v(n,"form-text"),(0,d.jsx)(r,a(a({},o),{},{ref:e,className:h()(i,n,s&&"text-muted")}))});ey.displayName="FormText";const ny=ey,iy=t.forwardRef((t,e)=>(0,d.jsx)(Om,a(a({},t),{},{ref:e,type:"switch"})));iy.displayName="Switch";const ry=Object.assign(iy,{Input:Om.Input,Label:Om.Label}),sy=["bsPrefix","className","children","controlId","label"],oy=t.forwardRef((t,e)=>{let{bsPrefix:n,className:i,children:r,controlId:s,label:o}=t,l=c(t,sy);return n=v(n,"form-floating"),(0,d.jsxs)(zm,a(a({ref:e,className:h()(i,n),controlId:s},l),{},{children:[r,(0,d.jsx)("label",{htmlFor:s,children:o})]}))});oy.displayName="FloatingLabel";const ay=oy,ly=["className","validated","as"],cy={_ref:gm().any,validated:gm().bool,as:gm().elementType},uy=t.forwardRef((t,e)=>{let{className:n,validated:i,as:r="form"}=t,s=c(t,ly);return(0,d.jsx)(r,a(a({},s),{},{ref:e,className:h()(n,i&&"was-validated")}))});uy.displayName="Form",uy.propTypes=cy;const hy=Object.assign(uy,{Group:zm,Control:Lm,Floating:Fm,Check:Om,Switch:ry,Label:Gm,Text:ny,Range:Xm,Select:Zm,FloatingLabel:ay}),dy=["as","disabled"];function fy(t){let{tagName:e,disabled:n,href:i,target:r,rel:s,role:o,onClick:a,tabIndex:l=0,type:c}=t;e||(e=null!=i||null!=r||null!=s?"a":"button");const u={tagName:e};if("button"===e)return[{type:c||"button",disabled:n},u];const h=t=>{(n||"a"===e&&function(t){return!t||"#"===t.trim()}(i))&&t.preventDefault(),n?t.stopPropagation():null==a||a(t)};return"a"===e&&(i||(i="#"),n&&(i=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:l,href:i,target:"a"===e?r:void 0,"aria-disabled":n||void 0,rel:"a"===e?s:void 0,onClick:h,onKeyDown:t=>{" "===t.key&&(t.preventDefault(),h(t))}},u]}const py=t.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,dy);const[s,{tagName:o}]=fy(Object.assign({tagName:n,disabled:i},r));return(0,d.jsx)(o,Object.assign({},r,s,{ref:e}))});py.displayName="Button";const gy=["as","bsPrefix","variant","size","active","disabled","className"],my=t.forwardRef((t,e)=>{let{as:n,bsPrefix:i,variant:r="primary",size:s,active:o=!1,disabled:l=!1,className:u}=t,f=c(t,gy);const p=v(i,"btn"),[g,{tagName:m}]=fy(a({tagName:n,disabled:l},f)),y=m;return(0,d.jsx)(y,a(a(a({},g),f),{},{ref:e,disabled:l,className:h()(u,p,o&&"active",r&&"".concat(p,"-").concat(r),s&&"".concat(p,"-").concat(s),f.href&&l&&"disabled")}))});my.displayName="Button";const yy=my;function vy(e){const{given:n,want:i,setChoice:r,goToPage:s,isMultipleChoice:o,responseCounts:l,setResponseCounts:c,learnedOverTime:u,setLearnedOverTime:h,currentSetName:f,externalSet:p,onTermCountChange:g}=e,{isDarkMode:m}=Og(),{currentUser:y}=Pg(),[v,b]=(0,t.useState)(null),[_,w]=(0,t.useState)(""),[x,S]=(0,t.useState)(""),[k,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(!1),[A,P]=(0,t.useState)(1),[N,D]=(0,t.useState)(!1),[O,R]=(0,t.useState)(!1),[M,L]=(0,t.useState)("black"),[F,j]=(0,t.useState)(""),[V,z]=(0,t.useState)(""),[U,B]=(0,t.useState)(""),[H,W]=(0,t.useState)("primary"),[q,K]=(0,t.useState)("Submit"),[G]=(0,t.useState)(400),[Q,Y]=(0,t.useState)(null),[X,$]=(0,t.useState)([]),[J,Z]=(0,t.useState)(null),tt=(0,t.useRef)(0),[et,nt]=(0,t.useState)([]),[it,rt]=(0,t.useState)([]),[st,ot]=(0,t.useState)({}),[at,lt]=(0,t.useState)({}),[ct,ut]=(0,t.useState)(0),[ht,dt]=(0,t.useState)(0),[ft,pt]=(0,t.useState)(new Set),[gt,mt]=(0,t.useState)(null),yt=m?{backgroundColor:"#23272b",color:"#fff",borderColor:"#444"}:{},vt=m?{color:"#fff"}:{},bt=m?{backgroundColor:"#181a1b",color:"#fff",border:"1px solid #444"}:{},_t=m?"light":"primary",wt=m?"#343a40":void 0,xt=m?"4px solid #fff":"4px solid black",St=(t,e)=>{if(!t||0===t.length||!e)return{options:[],correctIndex:null};const n=Array.from(new Set(t.map(t=>null===t||void 0===t?void 0:t[i]).filter(t=>t&&t===t))).filter(t=>t!==e[i]);var r;const s=[...(r=n,r.map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(t=>{let{value:e}=t;return e})).slice(0,Math.min(3,n.length))],o=Math.floor(Math.random()*(s.length+1));return s.splice(o,0,e[i]),{options:s,correctIndex:o}};(0,t.useEffect)(()=>{let t=!0;const e=t=>{if(b(null),w(""),S(""),T(""),I(!1),P(1),D(!1),j(""),z(""),B(""),W("primary"),K("Submit"),h([]),dt(0),c([]),ot({}),lt({}),pt(new Set),ut(0),nt([]),rt([]),$([]),Z(null),null===t||void 0===t||!t.vocabItems||!Array.isArray(t.vocabItems))return void console.error("Selected set has invalid vocabItems:",t);const e=t.vocabItems.filter(t=>t&&t.character&&t.pinyin&&t.definition&&""!==t.character.trim()&&""!==t.pinyin.trim()&&""!==t.definition.trim()).map(t=>({character:t.character,pinyin:t.pinyin,definition:t.definition}));if(0===e.length)return console.error("No valid words found in set"),void(g&&g(0));b({words:e}),ut(e.length),g&&g(e.length);let r=e.map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(t=>{let{value:e}=t;return e});if(nt(r),rt(r),dt(0),mt(null),r.length>0){const t=r[0];if(o){const{options:n,correctIndex:i}=St(e,t);$(n),Z(i)}mt(t),w(t[n]),S(t[i]),j(t.character),z(t.pinyin),B(t.definition),rt(r.slice(1))}};return t&&(async()=>{if(p)return void e(p);if(!r||!y)return void console.log("No set selected or user not logged in");const t=r.replace("custom_",""),n=(await kg(y.uid)).find(e=>e.id===t);n?e(n):console.error("Selected set not found")})(),()=>{t=!1}},[r,y,p,o,n,i]);const Et=()=>{if(console.log("Preparing next word. Current state:",{remainingSet:it,currentSet:v,answerCounts:st,wrongCounts:at}),!v||!v.words||0===v.words.length)return void console.error("No valid set to train with");let t=a({},v);if(t.words=t.words.filter(t=>{const e=st[t[i]]||0,n=at[t[i]]||0,r=e<3&&!(e>=2&&0===n);return console.log("Filtering word:",t,"correctCount:",e,"wrongCount:",n,"keep:",r),r}),console.log("Filtered training set:",t),t.words.length>0){let e=t.words.map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(t=>{let{value:e}=t;return e});if(gt&&e.length>1&&e[0][i]===gt[i]){const t=Math.floor(Math.random()*(e.length-1))+1;[e[0],e[t]]=[e[t],e[0]]}if(console.log("Shuffled remaining words:",e),nt(e),rt(e),e.length>0){const t=e[0];mt(t),w(t[n]),S(t[i]),j(t.character),z(t.pinyin),B(t.definition),o&&Tt(t),rt(e.slice(1))}}else console.log("No words left to train, going to finish page"),s&&s("finishPage")};(0,t.useEffect)(()=>{const t=t=>kt(t);return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[o,X,Q]),(0,t.useEffect)(()=>{0!==l.length&&h(t=>[...t,{trial:l.length,learned:tt.current}])},[l]);const kt=t=>{var e;if(!o)return;const n={49:0,50:1,51:2,52:3,1:0,2:1,3:2,4:3},i=null!==(e=n[t.keyCode])&&void 0!==e?e:n[t.key];void 0!==i&&i<X.length&&(Y(i),Ct(i))},Tt=t=>{const e=(null===v||void 0===v?void 0:v.words)||[],{options:n,correctIndex:i}=St(e,t);$(n),Z(i),Y(null)},Ct=t=>{if(!o&&null!==t&&void 0!==t&&t.preventDefault&&t.preventDefault(),N)return I(!1),T(""),L("black"),W("primary"),K("Submit"),D(!1),Y(null),void Et();I(!0),w(""),D(!0);let e="";if(o){const n="number"===typeof t?t:Q;e=((null!==n?X[n]:"")||"").toLowerCase().replace(/\s+/g,"")}else e=k.toLowerCase().replace(/\s+/g,"");e===x.toLowerCase().replace(/\s+/g,"")?(R(!0),L("#2E972E"),W("success"),K("Next ->"),c(t=>[...t,1]),ot(t=>{const e=a({},t);e[x]=(e[x]||0)+1;const n=e[x],i=at[x]||0;return pt(t=>{const e=null!==t&&void 0!==t?t:new Set;if(!e.has(x)&&ht<ct&&(3===n||2===n&&0===i)){const t=new Set(e);t.add(x);const n=ht+1;return dt(n),tt.current=n,t}return e}),e})):(R(!1),L("#DD4F4F"),W("danger"),K("Next Term ->"),c(t=>[...t,0]),lt(t=>{let e=a({},t);return e[x]=(e[x]||0)+1,e})),P(t=>t+1)};return(0,d.jsxs)(d.Fragment,{children:[m&&(0,d.jsx)("style",{children:"\n                    .testingzone-darkmode-input::placeholder {\n                        color: #b0b0b0 !important;\n                        opacity: 1 !important;\n                    }\n                    .testingzone-darkmode-close .btn-close {\n                        filter: invert(1) brightness(2);\n                    }\n                "}),(0,d.jsxs)(sm,{body:!0,style:a({width:G},yt),children:[(0,d.jsxs)(E,{gap:1,className:"mb-3",children:[(0,d.jsxs)("div",{style:vt,children:["Progress: ",ht,"/",ct," words learned"]}),(0,d.jsx)(fm,{now:ct>0?ht/ct*100:0,label:ct>0?"".concat(Math.round(ht/ct*100),"%"):"0%",variant:_t,style:m?{backgroundColor:"#181a1b",color:"#fff"}:{}})]}),(0,d.jsxs)(E,{direction:"horizontal",style:{justifyContent:"space-between",alignItems:"flex-start"},children:[(0,d.jsxs)(E,{gap:0,children:[(0,d.jsxs)(sm.Title,{style:vt,children:[n," \u2192 ",i]}),(0,d.jsx)(sm.Title,{style:vt,children:f})]}),(0,d.jsx)("div",{className:m?"testingzone-darkmode-close":void 0,children:(0,d.jsx)(bm,{onClick:()=>{s?s("startLearning"):window.history.back()}})})]}),(0,d.jsx)(sm.Body,{children:(0,d.jsx)(hy,{onSubmit:Ct,children:(0,d.jsxs)(E,{gap:1,children:[(0,d.jsxs)(E,{gap:2,children:[(0,d.jsx)(hy.Label,{style:a({fontSize:(It=_.length,It>5?"25px":"50px")},vt),children:_}),(0,d.jsx)(hy.Label,{style:a({fontSize:"25px"},vt),children:C&&(0,d.jsxs)(E,{children:[(0,d.jsx)(hy.Label,{style:a({fontSize:"50px"},vt),children:F}),(0,d.jsx)(hy.Label,{style:vt,children:V}),(0,d.jsx)(hy.Label,{style:vt,children:U})]})}),!o&&(0,d.jsx)(hy.Control,{style:a({color:M},bt),spellCheck:"false",placeholder:"Answer",id:"responseArea",readOnly:N,type:"text",value:k,onChange:t=>T(t.target.value),className:m?"testingzone-darkmode-input":""})]}),!o&&(0,d.jsx)(yy,{type:"submit",variant:H,style:m?{color:"#fff"}:{},children:q}),o&&(0,d.jsxs)(E,{gap:2,children:[(0,d.jsx)(E,{gap:2,children:X.map((t,e)=>(0,d.jsx)(yy,{style:{fontSize:"20px",width:"100%",backgroundColor:N&&null!==J?J===e?"#2E972E":"#DD4F4F":wt,border:Q===e?xt:"4px solid transparent",color:m?"#fff":void 0},variant:H,onClick:()=>{N?Ct():(Y(e),Ct(e))},children:t},"".concat(t,"-").concat(e)))}),(0,d.jsx)("div",{style:{borderTop:m?"1px solid #444":"1px solid #dee2e6",marginTop:"0.5rem",paddingTop:"1rem"},children:(0,d.jsx)(yy,{variant:m?"light":"outline-secondary",onClick:()=>{N?(I(!1),T(""),L("black"),W("primary"),K("Submit"),D(!1),Y(null),Et()):(R(!1),L("#DD4F4F"),W("danger"),K("Next ->"),c(t=>[...t,0]),lt(t=>{let e=a({},t);return e[x]=(e[x]||0)+1,e}),P(t=>t+1),I(!0),w(""),D(!0))},style:{width:"100%",fontSize:"1.1rem",fontWeight:"500"},children:N?"Next ->":"Skip ->"})})]})]})})})]})]});var It}function by(){return by=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},by.apply(null,arguments)}n(740);function _y(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function wy(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}function xy(e,n){return Object.keys(n).reduce(function(i,r){var s,o=i,a=o[_y(r)],c=o[r],u=l(o,[_y(r),r].map(wy)),h=n[r],d=function(e,n,i){var r=(0,t.useRef)(void 0!==e),s=(0,t.useState)(n),o=s[0],a=s[1],l=void 0!==e,c=r.current;return r.current=l,!l&&c&&o!==n&&a(n),[l?e:o,(0,t.useCallback)(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i&&i.apply(void 0,[t].concat(n)),a(t)},[i])]}(c,a,e[h]),f=d[0],p=d[1];return by({},u,((s={})[r]=f,s[h]=p,s))},e)}function Sy(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function Ey(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!==n&&void 0!==n?n:null}.bind(this))}function ky(t,e){try{var n=this.props,i=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}Sy.__suppressDeprecationWarning=!0,Ey.__suppressDeprecationWarning=!0,ky.__suppressDeprecationWarning=!0;const Ty=function(e){const n=(0,t.useRef)(e);return(0,t.useEffect)(()=>{n.current=e},[e]),n};function Cy(e){const n=Ty(e);return(0,t.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}"undefined"!==typeof n.g&&n.g.navigator&&n.g.navigator.product,new WeakMap;const Iy=["onKeyDown"];const Ay=t.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,Iy);const[r]=fy(Object.assign({tagName:"a"},i)),s=Cy(t=>{r.onKeyDown(t),null==n||n(t)});return(o=i.href)&&"#"!==o.trim()&&"button"!==i.role?(0,d.jsx)("a",Object.assign({ref:e},i,{onKeyDown:n})):(0,d.jsx)("a",Object.assign({ref:e},i,r,{onKeyDown:s}));var o});Ay.displayName="Anchor";const Py=Ay;function Ny(t,e){return Ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ny(t,e)}var Dy=n(950);const Oy=!1,Ry=t.createContext(null);var My="unmounted",Ly="exited",Fy="entering",jy="entered",Vy="exiting",zy=function(e){var n,i;function r(t,n){var i;i=e.call(this,t,n)||this;var r,s=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?s?(r=Ly,i.appearStatus=Fy):r=jy:r=t.unmountOnExit||t.mountOnEnter?My:Ly,i.state={status:r},i.nextCallback=null,i}i=e,(n=r).prototype=Object.create(i.prototype),n.prototype.constructor=n,Ny(n,i),r.getDerivedStateFromProps=function(t,e){return t.in&&e.status===My?{status:Ly}:null};var s=r.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Fy&&n!==jy&&(e=Fy):n!==Fy&&n!==jy||(e=Vy)}this.updateStatus(!1,e)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var t,e,n,i=this.props.timeout;return t=e=n=i,null!=i&&"number"!==typeof i&&(t=i.exit,e=i.enter,n=void 0!==i.appear?i.appear:e),{exit:t,enter:e,appear:n}},s.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===Fy){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Dy.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ly&&this.setState({status:My})},s.performEnter=function(t){var e=this,n=this.props.enter,i=this.context?this.context.isMounting:t,r=this.props.nodeRef?[i]:[Dy.findDOMNode(this),i],s=r[0],o=r[1],a=this.getTimeouts(),l=i?a.appear:a.enter;!t&&!n||Oy?this.safeSetState({status:jy},function(){e.props.onEntered(s)}):(this.props.onEnter(s,o),this.safeSetState({status:Fy},function(){e.props.onEntering(s,o),e.onTransitionEnd(l,function(){e.safeSetState({status:jy},function(){e.props.onEntered(s,o)})})}))},s.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:Dy.findDOMNode(this);e&&!Oy?(this.props.onExit(i),this.safeSetState({status:Vy},function(){t.props.onExiting(i),t.onTransitionEnd(n.exit,function(){t.safeSetState({status:Ly},function(){t.props.onExited(i)})})})):this.safeSetState({status:Ly},function(){t.props.onExited(i)})},s.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},s.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,e.nextCallback=null,t(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},s.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:Dy.findDOMNode(this),i=null==t&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=r[0],o=r[1];this.props.addEndListener(s,o)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},s.render=function(){var e=this.state.status;if(e===My)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,l(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Ry.Provider,{value:null},"function"===typeof i?i(e,r):t.cloneElement(t.Children.only(i),r))},r}(t.Component);function Uy(){}zy.contextType=Ry,zy.propTypes={},zy.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Uy,onEntering:Uy,onEntered:Uy,onExit:Uy,onExiting:Uy,onExited:Uy},zy.UNMOUNTED=My,zy.EXITED=Ly,zy.ENTERING=Fy,zy.ENTERED=jy,zy.EXITING=Vy;const By=zy;function Hy(t){var e=function(t){return t&&t.ownerDocument||document}(t);return e&&e.defaultView||window}var Wy=/([A-Z])/g;var qy=/^ms-/;function Ky(t){return function(t){return t.replace(Wy,"-$1").toLowerCase()}(t).replace(qy,"-ms-")}var Gy=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const Qy=function(t,e){var n="",i="";if("string"===typeof e)return t.style.getPropertyValue(Ky(e))||function(t,e){return Hy(t).getComputedStyle(t,e)}(t).getPropertyValue(Ky(e));Object.keys(e).forEach(function(r){var s=e[r];s||0===s?!function(t){return!(!t||!Gy.test(t))}(r)?n+=Ky(r)+": "+s+";":i+=r+"("+s+") ":t.style.removeProperty(Ky(r))}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n},Yy=!("undefined"===typeof window||!window.document||!window.document.createElement);var Xy=!1,$y=!1;try{var Jy={get passive(){return Xy=!0},get once(){return $y=Xy=!0}};Yy&&(window.addEventListener("test",Jy,Jy),window.removeEventListener("test",Jy,!0))}catch(fT){}const Zy=function(t,e,n,i){if(i&&"boolean"!==typeof i&&!$y){var r=i.once,s=i.capture,o=n;!$y&&r&&(o=n.__once||function t(i){this.removeEventListener(e,t,s),n.call(this,i)},n.__once=o),t.addEventListener(e,o,Xy?i:s)}t.addEventListener(e,n,i)};const tv=function(t,e,n,i){var r=i&&"boolean"!==typeof i?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)};const ev=function(t,e,n,i){return Zy(t,e,n,i),function(){tv(t,e,n,i)}};function nv(t,e,n){void 0===n&&(n=5);var i=!1,r=setTimeout(function(){i||function(t,e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}(t,"transitionend",!0)},e+n),s=ev(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function iv(t,e,n,i){null==n&&(n=function(t){var e=Qy(t,"transitionDuration")||"",n=-1===e.indexOf("ms")?1e3:1;return parseFloat(e)*n}(t)||0);var r=nv(t,n,i),s=ev(t,"transitionend",e);return function(){r(),s()}}function rv(t,e){const n=Qy(t,e)||"",i=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*i}function sv(t,e){const n=rv(t,"transitionDuration"),i=rv(t,"transitionDelay"),r=iv(t,n=>{n.target===t&&(r(),e(n))},n+i)}const ov=t=>t&&"function"!==typeof t?e=>{t.current=e}:t;const av=function(e,n){return(0,t.useMemo)(()=>function(t,e){const n=ov(t),i=ov(e);return t=>{n&&n(t),i&&i(t)}}(e,n),[e,n])};const lv=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],cv=t.forwardRef((e,n)=>{let{onEnter:i,onEntering:r,onEntered:s,onExit:o,onExiting:l,onExited:u,addEndListener:h,children:f,childRef:p}=e,g=c(e,lv);const m=(0,t.useRef)(null),y=av(m,p),v=t=>{var e;y((e=t)&&"setState"in e?Dy.findDOMNode(e):null!=e?e:null)},b=t=>e=>{t&&m.current&&t(m.current,e)},_=(0,t.useCallback)(b(i),[i]),w=(0,t.useCallback)(b(r),[r]),x=(0,t.useCallback)(b(s),[s]),S=(0,t.useCallback)(b(o),[o]),E=(0,t.useCallback)(b(l),[l]),k=(0,t.useCallback)(b(u),[u]),T=(0,t.useCallback)(b(h),[h]);return(0,d.jsx)(By,a(a({ref:n},g),{},{onEnter:_,onEntered:x,onEntering:w,onExit:S,onExited:k,onExiting:E,addEndListener:T,nodeRef:m,children:"function"===typeof f?(t,e)=>f(t,a(a({},e),{},{ref:v})):t.cloneElement(f,{ref:v})}))}),uv=cv,hv=["className","children","transitionClasses","onEnter"],dv={[Fy]:"show",[jy]:"show"},fv=t.forwardRef((e,n)=>{let{className:i,children:r,transitionClasses:s={},onEnter:o}=e;const l=a({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},c(e,hv)),u=(0,t.useCallback)((t,e)=>{!function(t){t.offsetHeight}(t),null==o||o(t,e)},[o]);return(0,d.jsx)(uv,a(a({ref:n,addEndListener:sv},l),{},{onEnter:u,childRef:r.ref,children:(e,n)=>t.cloneElement(r,a(a({},n),{},{className:h()("fade",i,r.props.className,dv[e],s[e])}))}))});fv.displayName="Fade";const pv=fv,gv=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],mv=Vg("h4");mv.displayName="DivStyledAsH4";const yv=jg("alert-heading",{Component:mv}),vv=jg("alert-link",{Component:Py}),bv=t.forwardRef((t,e)=>{const n=xy(t,{show:"onClose"}),{bsPrefix:i,show:r=!0,closeLabel:s="Close alert",closeVariant:o,className:l,children:u,variant:f="primary",onClose:p,dismissible:g,transition:m=pv}=n,y=c(n,gv),b=v(i,"alert"),_=Cy(t=>{p&&p(!1,t)}),w=!0===m?pv:m,x=(0,d.jsxs)("div",a(a({role:"alert"},w?void 0:y),{},{ref:e,className:h()(l,b,f&&"".concat(b,"-").concat(f),g&&"".concat(b,"-dismissible")),children:[g&&(0,d.jsx)(bm,{onClick:_,"aria-label":s,variant:o}),u]}));return w?(0,d.jsx)(w,a(a({unmountOnExit:!0},y),{},{ref:void 0,in:r,children:x})):r?x:null});bv.displayName="Alert";const _v=Object.assign(bv,{Link:vv,Heading:yv});function wv(t){return t+.5|0}const xv=(t,e,n)=>Math.max(Math.min(t,n),e);function Sv(t){return xv(wv(2.55*t),0,255)}function Ev(t){return xv(wv(255*t),0,255)}function kv(t){return xv(wv(t/2.55)/100,0,1)}function Tv(t){return xv(wv(100*t),0,100)}const Cv={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Iv=[..."0123456789ABCDEF"],Av=t=>Iv[15&t],Pv=t=>Iv[(240&t)>>4]+Iv[15&t],Nv=t=>(240&t)>>4===(15&t);function Dv(t){var e=(t=>Nv(t.r)&&Nv(t.g)&&Nv(t.b)&&Nv(t.a))(t)?Av:Pv;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const Ov=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Rv(t,e,n){const i=e*Math.min(n,1-n),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Mv(t,e,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+t/60)%6;return n-n*e*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Lv(t,e,n){const i=Rv(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Fv(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),s=Math.min(e,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function jv(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ev)}function Vv(t,e,n){return jv(Rv,t,e,n)}function zv(t){return(t%360+360)%360}function Uv(t){const e=Ov.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?Sv(+e[5]):Ev(+e[5]));const r=zv(+e[2]),s=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return jv(Lv,t,e,n)}(r,s,o):"hsv"===e[1]?function(t,e,n){return jv(Mv,t,e,n)}(r,s,o):Vv(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const Bv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Hv={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Wv;function qv(t){Wv||(Wv=function(){const t={},e=Object.keys(Hv),n=Object.keys(Bv);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Bv[s]);s=parseInt(Hv[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),Wv.transparent=[0,0,0,0]);const e=Wv[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const Kv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Gv=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Qv=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Yv(t,e,n){if(t){let i=Fv(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=Vv(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Xv(t,e){return t?Object.assign(e||{},t):t}function $v(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ev(t[3]))):(e=Xv(t,{r:0,g:0,b:0,a:1})).a=Ev(e.a),e}function Jv(t){return"r"===t.charAt(0)?function(t){const e=Kv.exec(t);let n,i,r,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?Sv(t):xv(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?Sv(n):xv(n,0,255)),i=255&(e[4]?Sv(i):xv(i,0,255)),r=255&(e[6]?Sv(r):xv(r,0,255)),{r:n,g:i,b:r,a:s}}}(t):Uv(t)}class Zv{constructor(t){if(t instanceof Zv)return t;const e=typeof t;let n;"object"===e?n=$v(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*Cv[t[1]],g:255&17*Cv[t[2]],b:255&17*Cv[t[3]],a:5===n?17*Cv[t[4]]:255}:7!==n&&9!==n||(e={r:Cv[t[1]]<<4|Cv[t[2]],g:Cv[t[3]]<<4|Cv[t[4]],b:Cv[t[5]]<<4|Cv[t[6]],a:9===n?Cv[t[7]]<<4|Cv[t[8]]:255})),e}(t)||qv(t)||Jv(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Xv(this._rgb);return t&&(t.a=kv(t.a)),t}set rgb(t){this._rgb=$v(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(kv(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")")):void 0;var t}hexString(){return this._valid?Dv(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Fv(t),n=e[0],i=Tv(e[1]),r=Tv(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(kv(t.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const s=e===r?.5:e,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=Qv(kv(t.r)),r=Qv(kv(t.g)),s=Qv(kv(t.b));return{r:Ev(Gv(i+n*(Qv(kv(e.r))-i))),g:Ev(Gv(r+n*(Qv(kv(e.g))-r))),b:Ev(Gv(s+n*(Qv(kv(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Zv(this.rgb)}alpha(t){return this._rgb.a=Ev(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=wv(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Yv(this._rgb,2,t),this}darken(t){return Yv(this._rgb,2,-t),this}saturate(t){return Yv(this._rgb,1,t),this}desaturate(t){return Yv(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=Fv(t);n[0]=zv(n[0]+e),n=Vv(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function tb(){}const eb=(()=>{let t=0;return()=>t++})();function nb(t){return null===t||void 0===t}function ib(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function rb(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function sb(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function ob(t,e){return sb(t)?t:e}function ab(t,e){return"undefined"===typeof t?e:t}const lb=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function cb(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function ub(t,e,n,i){let r,s,o;if(ib(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(rb(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function hb(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function db(t){if(ib(t))return t.map(db);if(rb(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=db(t[n[r]]);return e}return t}function fb(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function pb(t,e,n,i){if(!fb(t))return;const r=e[t],s=n[t];rb(r)&&rb(s)?gb(r,s,i):e[t]=db(s)}function gb(t,e,n){const i=ib(e)?e:[e],r=i.length;if(!rb(t))return t;const s=(n=n||{}).merger||pb;let o;for(let a=0;a<r;++a){if(o=i[a],!rb(o))continue;const e=Object.keys(o);for(let i=0,r=e.length;i<r;++i)s(e[i],t,o,n)}return t}function mb(t,e){return gb(t,e,{merger:yb})}function yb(t,e,n){if(!fb(t))return;const i=e[t],r=n[t];rb(i)&&rb(r)?mb(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=db(r))}const vb={"":t=>t,x:t=>t.x,y:t=>t.y};function bb(t,e){const n=vb[e]||(vb[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function _b(t){return t.charAt(0).toUpperCase()+t.slice(1)}const wb=t=>"undefined"!==typeof t,xb=t=>"function"===typeof t,Sb=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const Eb=Math.PI,kb=2*Eb,Tb=kb+Eb,Cb=Number.POSITIVE_INFINITY,Ib=Eb/180,Ab=Eb/2,Pb=Eb/4,Nb=2*Eb/3,Db=Math.log10,Ob=Math.sign;function Rb(t,e,n){return Math.abs(t-e)<n}function Mb(t){const e=Math.round(t);t=Rb(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Db(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Lb(t){return!function(t){return"symbol"===typeof t||"object"===typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Fb(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function jb(t){return t*(Eb/180)}function Vb(t){return t*(180/Eb)}function zb(t){if(!sb(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Ub(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Eb&&(s+=kb),{angle:s,distance:r}}function Bb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Hb(t,e){return(t-e+Tb)%kb-Eb}function Wb(t){return(t%kb+kb)%kb}function qb(t,e,n,i){const r=Wb(t),s=Wb(e),o=Wb(n),a=Wb(s-r),l=Wb(o-r),c=Wb(r-s),u=Wb(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Kb(t,e,n){return Math.max(e,Math.min(n,t))}function Gb(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Qb(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Yb=(t,e,n,i)=>Qb(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),Xb=(t,e,n)=>Qb(t,n,i=>t[i][e]>=n);const $b=["push","pop","shift","splice","unshift"];function Jb(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||($b.forEach(e=>{delete t[e]}),delete t._chartjs)}function Zb(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const t_="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function e_(t,e){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,t_.call(window,()=>{i=!1,t.apply(e,n)}))}}const n_=t=>"start"===t?"left":"end"===t?"right":"center",i_=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function r_(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(r=Math.min(Yb(l,u,h).lo,n?i:Yb(e,u,o.getPixelForValue(h)).lo),c){const t=l.slice(0,r+1).reverse().findIndex(t=>!nb(t[a.axis]));r-=Math.max(0,t)}r=Kb(r,0,i-1)}if(p){let t=Math.max(Yb(l,o.axis,d,!0).hi+1,n?0:Yb(e,u,o.getPixelForValue(d),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!nb(t[a.axis]));t+=Math.max(0,e)}s=Kb(t,r,i)-r}else s=i-r}return{start:r,count:s}}function s_(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const o_=t=>0===t||1===t,a_=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*kb/n),l_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*kb/n)+1,c_={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Ab),easeOutSine:t=>Math.sin(t*Ab),easeInOutSine:t=>-.5*(Math.cos(Eb*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>o_(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>o_(t)?t:a_(t,.075,.3),easeOutElastic:t=>o_(t)?t:l_(t,.075,.3),easeInOutElastic(t){const e=.1125;return o_(t)?t:t<.5?.5*a_(2*t,e,.45):.5+.5*l_(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-c_.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*c_.easeInBounce(2*t):.5*c_.easeOutBounce(2*t-1)+.5};function u_(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function h_(t){return u_(t)?t:new Zv(t)}function d_(t){return u_(t)?t:new Zv(t).saturate(.5).darken(.1).hexString()}const f_=["x","y","borderWidth","radius","tension"],p_=["color","borderColor","backgroundColor"];const g_=new Map;function m_(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=g_.get(n);return i||(i=new Intl.NumberFormat(t,e),g_.set(n,i)),i}(e,n).format(t)}const y_={values:t=>ib(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const o=Db(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),m_(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Db(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?y_.numeric.call(this,t,e,n):""}};var v_={formatters:y_};const b_=Object.create(null),__=Object.create(null);function w_(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function x_(t,e,n){return"string"===typeof e?gb(w_(t,e),n):gb(w_(t,""),e)}class S_{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>d_(e.backgroundColor),this.hoverBorderColor=(t,e)=>d_(e.borderColor),this.hoverColor=(t,e)=>d_(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return x_(this,t,e)}get(t){return w_(this,t)}describe(t,e){return x_(__,t,e)}override(t,e){return x_(b_,t,e)}route(t,e,n,i){const r=w_(this,t),s=w_(this,n),o="_"+e;Object.defineProperties(r,{[o]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[i];return rb(t)?Object.assign({},e,t):ab(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}var E_=new S_({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:p_},numbers:{type:"number",properties:f_}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:v_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function k_(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function T_(t,e,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||ib(h)){if(ib(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||ib(d)||(o=k_(t,r,s,o,d))}else o=k_(t,r,s,o,h);t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function C_(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function I_(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function A_(t,e,n,i){P_(t,e,n,i,null)}function P_(t,e,n,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*Ib;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,g,0,0,kb):t.arc(n,i,g,0,kb),t.closePath();break;case"triangle":u=r?r/2:g,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=Nb,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=Nb,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+Pb)*l,h=Math.cos(m+Pb)*(r?r/2-c:l),a=Math.sin(m+Pb)*l,d=Math.sin(m+Pb)*(r?r/2-c:l),t.arc(n-h,i-a,c,m-Eb,m-Ab),t.arc(n+d,i-o,c,m-Ab,m),t.arc(n+h,i+a,c,m,m+Ab),t.arc(n-d,i+o,c,m+Ab,m+Eb),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}m+=Pb;case"rectRot":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":m+=Pb;case"cross":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),m+=Pb,h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function N_(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function D_(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function O_(t){t.restore()}function R_(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!==!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function M_(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function L_(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function F_(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function j_(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=ib(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),nb(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&F_(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),nb(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),L_(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function V_(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Eb,Eb,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Eb,Ab,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ab,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Ab,!0),t.lineTo(n+o.topLeft,i)}const z_=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,U_=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function B_(t,e){const n=(""+t).match(z_);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const H_=t=>+t||0;function W_(t,e){const n={},i=rb(e),r=i?Object.keys(e):e,s=rb(t)?i?n=>ab(t[n],t[e[n]]):e=>t[e]:()=>t;for(const o of r)n[o]=H_(s(o));return n}function q_(t){return W_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function K_(t){return W_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function G_(t){const e=q_(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Q_(t,e){t=t||{},e=e||E_.font;let n=ab(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let i=ab(t.style,e.style);i&&!(""+i).match(U_)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ab(t.family,e.family),lineHeight:B_(ab(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ab(t.weight,e.weight),string:""};return r.string=function(t){return!t||nb(t.size)||nb(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function Y_(t,e,n,i){let r,s,o,a=!0;for(r=0,s=t.length;r<s;++r)if(o=t[r],void 0!==o&&(void 0!==e&&"function"===typeof o&&(o=o(e),a=!1),void 0!==n&&ib(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function X_(t,e){return Object.assign(Object.create(t),e)}function $_(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>t[0];const r=(arguments.length>2?arguments[2]:void 0)||t;"undefined"===typeof n&&(n=lw("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>$_([i,...t],e,r,n)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>nw(n,i,()=>function(t,e,n,i){let r;for(const s of e)if(r=lw(tw(s,t),n),"undefined"!==typeof r)return ew(t,r)?ow(n,i,t,r):r}(i,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>cw(t).includes(e),ownKeys:t=>cw(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function J_(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Z_(t,i),setContext:e=>J_(t,e,n,i),override:r=>J_(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>nw(t,e,()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];xb(a)&&o.isScriptable(e)&&(a=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);a.delete(t),ew(t,l)&&(l=ow(r._scopes,r,t,l));return l}(e,a,t,n));ib(a)&&a.length&&(a=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(t))return e[s.index%e.length];if(rb(e[0])){const n=e,i=r._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=ow(i,r,t,l);e.push(J_(n,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable));ew(e,a)&&(a=J_(a,r,s&&s[e],o));return a}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function Z_(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:xb(n)?n:()=>n,isIndexable:xb(i)?i:()=>i}}const tw=(t,e)=>t?t+_b(e):e,ew=(t,e)=>rb(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function nw(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const i=n();return t[e]=i,i}function iw(t,e,n){return xb(t)?t(e,n):t}const rw=(t,e)=>!0===t?e:"string"===typeof t?bb(e,t):void 0;function sw(t,e,n,i,r){for(const s of e){const e=rw(n,s);if(e){t.add(e);const s=iw(e._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===e&&"undefined"!==typeof i&&n!==i)return null}return!1}function ow(t,e,n,i){const r=e._rootScopes,s=iw(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=aw(a,o,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=aw(a,o,s,l,i),null!==l))&&$_(Array.from(a),[""],r,s,()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];if(ib(r)&&rb(n))return n;return r||{}}(e,n,i)))}function aw(t,e,n,i,r){for(;n;)n=sw(t,e,n,i,r);return n}function lw(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function cw(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function uw(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:r.parse(bb(u,s),c)};return o}const hw=Number.EPSILON||1e-14,dw=(t,e)=>e<t.length&&!t[e].skip&&t[e],fw=t=>"x"===t?"y":"x";function pw(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Bb(s,r),l=Bb(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function gw(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=fw(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=dw(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=dw(t,o+1),l){if(c){const t=c[e]-l[e];r[o]=0!==t?(c[n]-l[n])/t:0}s[o]=a?c?Ob(r[o-1])!==Ob(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(t,e,n){const i=t.length;let r,s,o,a,l,c=dw(t,0);for(let u=0;u<i-1;++u)l=c,c=dw(t,u+1),l&&c&&(Rb(e[u],0,hw)?n[u]=n[u+1]=0:(r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])))}(t,r,s),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=fw(n),r=t.length;let s,o,a,l=dw(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=dw(t,c+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a["cp1".concat(n)]=r-s,a["cp1".concat(i)]=u-s*e[c]),l&&(s=(l[n]-r)/3,a["cp2".concat(n)]=r+s,a["cp2".concat(i)]=u+s*e[c])}}(t,s,e)}function mw(t,e,n){return Math.max(Math.min(t,n),e)}function yw(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)gw(t,r);else{let n=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=pw(n,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,i,r,s,o,a=N_(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&N_(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=mw(r.cp1x,e.left,e.right),r.cp1y=mw(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=mw(r.cp2x,e.left,e.right),r.cp2y=mw(r.cp2y,e.top,e.bottom)))}(t,n)}function vw(){return"undefined"!==typeof window&&"undefined"!==typeof document}function bw(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function _w(t,e,n){let i;return"string"===typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const ww=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const xw=["top","right","bottom","left"];function Sw(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=xw[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Ew(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=ww(n),s="border-box"===r.boxSizing,o=Sw(r,"padding"),a=Sw(r,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(r,s,t.target))o=r,a=s;else{const t=e.getBoundingClientRect();o=i.clientX-t.left,a=i.clientY-t.top,l=!0}return{x:o,y:a,box:l}}(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const kw=t=>Math.round(10*t)/10;function Tw(t,e,n,i){const r=ww(t),s=Sw(r,"margin"),o=_w(r.maxWidth,t,"clientWidth")||Cb,a=_w(r.maxHeight,t,"clientHeight")||Cb,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const s=t&&bw(t);if(s){const t=s.getBoundingClientRect(),o=ww(s),a=Sw(o,"border","width"),l=Sw(o,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,i=_w(o.maxWidth,s,"clientWidth"),r=_w(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||Cb,maxHeight:r||Cb}}(t,e,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const t=Sw(r,"border","width"),e=Sw(r,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=kw(Math.min(c,o,l.maxWidth)),u=kw(Math.min(u,a,l.maxHeight)),c&&!u&&(u=kw(c/2));return(void 0!==e||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=kw(Math.floor(u*i))),{width:c,height:u}}function Cw(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(t.height,"px"),o.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const Iw=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};vw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(fT){}return t}();function Aw(t,e){const n=function(t,e){return ww(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Pw(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Nw(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function Dw(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Pw(t,r,n),a=Pw(r,s,n),l=Pw(s,e,n),c=Pw(o,a,n),u=Pw(a,l,n);return Pw(c,u,n)}function Ow(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Rw(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Mw(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Lw(t){return"angle"===t?{between:qb,compare:Hb,normalize:Wb}:{between:Gb,compare:(t,e)=>t-e,normalize:t=>t}}function Fw(t){let{start:e,end:n,count:i,loop:r,style:s}=t;return{start:e%i,end:n%i,loop:r&&(n-e+1)%i===0,style:s}}function jw(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=Lw(i),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=Lw(i),l=e.length;let c,u,{start:h,end:d,loop:f}=t;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(e[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,y,v=!1,b=null;const _=()=>v||l(r,y,g)&&0!==a(r,y),w=()=>!v||0===a(s,g)||l(s,y,g);for(let x=u,S=u;x<=h;++x)m=e[x%o],m.skip||(g=c(m[i]),g!==y&&(v=l(g,r,s),null===b&&_()&&(b=0===a(g,r)?x:S),null!==b&&w()&&(p.push(Fw({start:b,end:x,loop:d,count:o,style:f})),b=null),S=x,y=g));return null!==b&&p.push(Fw({start:b,end:h,loop:d,count:o,style:f})),p}function Vw(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=jw(i[r],t.points,e);s.length&&n.push(...s)}return n}function zw(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),s=Uw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(t,e,i,r){const s=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=s;for(;n[e%l].skip;)e+=s;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:i,style:r}),u=r,h=e%l)}}for(const p of e){h=a?h:p.start;let t,e=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];t=Uw(i.setContext(X_(r,{type:"segment",p0:e,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Bw(t,u)&&f(h,d-1,p.loop,u),e=s,u=t}h<d-1&&f(h,d-1,p.loop,u)}return c}(t,e,n,i):e}function Uw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Bw(t,e){if(!e)return!1;const n=[],i=function(t,e){return u_(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Hw(t,e,n){return t.options.clip?t[n]:e[n]}function Ww(t,e){const n=e._clip;if(n.disabled)return!1;const i=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Hw(n,e,"left"),right:Hw(n,e,"right"),top:Hw(i,e,"top"),bottom:Hw(i,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class qw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],s=e.duration;r.forEach(i=>i({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=t_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Kw=new qw;const Gw="transparent",Qw={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=h_(t||Gw),r=i.valid&&h_(e||Gw);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Yw{constructor(t,e,n,i){const r=e[n];i=Y_([t.to,i,r,t.from]);const s=Y_([t.from,r,i]);this._active=!0,this._fn=t.fn||Qw[t.type||typeof s],this._easing=c_[t.easing]||c_.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Y_([t.to,e,i,t.from]),this._from=Y_([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||e<n),!this._active)return this._target[i]=o,void this._notify(!0);e<0?this._target[i]=r:(a=e/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class Xw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!rb(t))return;const e=Object.keys(E_.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!rb(r))return;const s={};for(const t of e)s[t]=r[t];(ib(r.properties)&&r.properties||[i]).forEach(t=>{t!==i&&n.has(t)||n.set(t,s)})})}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const e=t[i[r]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(r[l]=u=new Yw(h,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Kw.add(this._chart,n),!0):void 0}}function $w(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function Jw(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Zw(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=t.keys,s="single"===i.mode;let o,a,l,c;if(null===e)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],sb(c)&&(s||0===e||Ob(e)===Ob(c))&&(e+=c)}return u||i.all?e:0}function tx(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function ex(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function nx(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function ix(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const t=e[f],{[l]:n,[c]:s}=t;d=(t._stacks||(t._stacks={}))[c]=ex(r,u,n),d[a]=s,d._top=nx(d,o,!0,i.type),d._bottom=nx(d,o,!1,i.type);(d._visualValues||(d._visualValues={}))[a]=s}}function rx(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function sx(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const ox=t=>"reset"===t||"none"===t,ax=(t,e)=>e?t:Object.assign({},t);class lx{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=tx(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&sx(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=ab(n.xAxisID,rx(t,"x")),s=e.yAxisID=ab(n.yAxisID,rx(t,"y")),o=e.rAxisID=ab(n.rAxisID,rx(t,"r")),a=e.indexAxis,l=e.iAxisID=i(a,r,s,o),c=e.vAxisID=i(a,s,r,o);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Jb(this._data,this),t._stacked&&sx(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(rb(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:i}=e,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:t[u]};return a}(e,t)}else if(n!==e){if(n){Jb(n,this);const t=this._cachedMeta;sx(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),$b.forEach(t=>{const e="_onData"+_b(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const o=n.apply(this,r);return i._chartjs.listeners.forEach(t=>{"function"===typeof t[e]&&t[e](...r)}),o}})}))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=tx(e.vScale,e),e.stack!==n.stack&&(i=!0,sx(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&(ix(this,e._parsed),e._stacked=tx(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,u=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=ib(i[t])?this.parseArrayData(n,i,t,e):rb(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&ix(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:s}=t,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:c||r.parse(l[f],f),[a]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:s}=t,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(t,e,n,i){const{xScale:r,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=e[h],l[c]={x:r.parse(bb(d,o),h),y:s.parse(bb(d,a),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,s=e[t.axis];return Zw({keys:Jw(i,!0),values:e._stacks[t.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let s=null===r?NaN:r;const o=i&&n._stacks[e.axis];i&&o&&(i.values=o,s=Zw(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,s=i.length,o=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Jw(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=i[h];const e=d[o.axis];return!sb(d[t.axis])||c>e||u<e}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,t,d,a),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,t,d,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i][t.axis],sb(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return rb(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(ab(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=$w(t,n),r=$w(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,r,o,a),c=o;c<o+a;++c){const e=i[c];e.hidden||(e.active&&l?s.push(e):e.draw(t,r))}for(c=0;c<s.length;++c)s[c].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return X_(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return X_(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===e,r=this._cachedDataOpts,s=t+"-"+e,o=r[s],a=this.enableOptionSharing&&wb(n);if(o)return ax(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?["".concat(t,"Hover"),"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(E_.elements[t]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,i,e),u);return f.$shared&&(f.$shared=a,r[s]=Object.freeze(ax(f,a))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(e),o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(t,n,e))}const l=new Xw(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||ox(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:s}}updateElement(t,e,n,i){ox(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!ox(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const i=n.length,r=e.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=s;o--)t[o]=t[o-e]};for(a(r),o=t;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&sx(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function cx(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Zb(i.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let i,r,s,o,a=e._length;const l=()=>{32767!==s&&-32768!==s&&(wb(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=e.getPixelForValue(n[i]),l();for(o=void 0,i=0,r=e.ticks.length;i<r;++i)s=e.getPixelForTick(i),l();return a}function ux(t,e,n,i){return ib(t)?function(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function hx(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(ux(d,h,s,c));return l}function dx(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function fx(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[px(u,o,a,l)]=!0,r=c)),s[px(r,o,a,l)]=!0,t.borderSkipped=s}function px(t,e,n,i){var r,s,o;return i?(o=n,t=gx(t=(r=t)===(s=e)?o:r===o?s:r,n,e)):t=gx(t,e,n),t}function gx(t,e,n){return"start"===t?e:"end"===t?n:t}function mx(t,e,n){let{inflateAmount:i}=e;t.inflateAmount="auto"===i?1===n?.33:0:i}s(lx,"defaults",{}),s(lx,"datasetElementType",null),s(lx,"dataElementType",null);class yx extends lx{parsePrimitiveData(t,e,n,i){return hx(t,e,n,i)}parseArrayData(t,e,n,i){return hx(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(bb(p,l),h),u.push(ux(bb(p,c),f,s,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),s=r._custom,o=dx(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=r||nb(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||dx(e._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,t[d].active?"active":i));const m=g.options||t[d].options;fx(g,m,p,s),mx(g,m,c.ratio),this.updateElement(t[d],d,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),r=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(e),a=o&&o[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===a),i=e&&e[t.vScale.axis];if(nb(i)||isNaN(i))return!0};for(const c of i)if((void 0===e||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,s;for(r=0,s=e.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=t.barThickness;return{min:o||cx(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(t),l=a._custom,c=dx(l);let u,h,d=a[e.axis],f=0,p=n?this.applyStack(e,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&Ob(d)!==Ob(l.barEnd)&&(f=0),f+=d);const g=nb(r)||c?f:r;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(t,e,n){return 0!==t?Ob(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,o)*s,d===o&&(m-=h/2);const t=e.getPixelForDecimal(0),r=e.getPixelForDecimal(1),l=Math.min(t,r),f=Math.max(t,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(a._stacks[e.axis]._visualValues[i]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=Ob(h)*e.getLineWidthForValue(o)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,s=ab(i.maxBarThickness,1/0);let o,a;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,l="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n):function(t,e,n,i){const r=n.barThickness;let s,o;return nb(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}(t,e,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);o=l.start+l.chunk*c+l.chunk/2,a=Math.min(s,l.chunk*l.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(s,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[e.axis]||n[r].hidden||n[r].draw(this._ctx)}}s(yx,"id","bar"),s(yx,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),s(yx,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class vx extends lx{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=ab(t[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=ab(t&&t.r&&+t.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,i),c=s.axis,u=o.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,e.active?"active":i),r&&(d.options.radius=0)),this.updateElement(e,h,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=ab(n&&n._custom,r),i}}s(vx,"id","bubble"),s(vx,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),s(vx,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class bx extends lx{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=t=>+n[t];if(rb(n[t])){const{key:t="value"}=this._parsing;o=e=>+bb(n[e],t)}for(r=t,s=t+e;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return jb(this.options.rotation-90)}_getCircumference(){return jb(this.options.circumference)}_getRotationExtents(){let t=kb,e=-kb;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,r=1,s=0,o=0;if(e<kb){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(t,e,i)=>qb(t,a,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>qb(t,a,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,h),m=f(Ab,u,d),y=p(Eb,c,h),v=p(Eb+Ab,u,d);i=(g-y)/2,r=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(d,h,a),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),_=lb(this.options.radius,b),w=(_-Math.max(_*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,i.total=this.calculateTotal(),this.outerRadius=_-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/kb)}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=r&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,r);for(g=e;g<e+n;++g){const e=this._circumference(g,r),n=t[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=e,this.updateElement(n,g,s,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?kb*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=m_(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,s,o,a;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),t=s.data,o=s.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(ab(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}s(bx,"id","doughnut"),s(bx,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),s(bx,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),s(bx,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class _x extends lx{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,s=this.chart._animationsDisabled;let{start:o,count:a}=r_(e,i,s);this._drawStart=o,this._drawCount=a,s_(e)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(i,o,a,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,i),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=Lb(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,y=e+n,v=t.length;let b=e>0&&this.getParsed(e-1);for(let _=0;_<v;++_){const n=t[_],f=m?n:{};if(_<e||_>=y){f.skip=!0;continue}const v=this.getParsed(_),w=nb(v[d]),x=f[h]=s.getPixelForValue(v[h],_),S=f[d]=r||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],_);f.skip=isNaN(x)||isNaN(S)||w,f.stop=_>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=l.data[_]),u&&(f.options=c||this.resolveDataElementOptions(_,n.active?"active":i)),m||this.updateElement(n,_,f,i),b=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}s(_x,"id","line"),s(_x,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),s(_x,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class wx extends lx{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=m_(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return uw.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*Eb;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,i,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,i,f),g=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?jb(this.resolveDataElementOptions(t,e).angle||n):0}}s(wx,"id","polarArea"),s(wx,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),s(wx,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class xx extends bx{}s(xx,"id","pie"),s(xx,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Sx extends lx{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return uw.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,o,u,i)}}}s(Sx,"id","radar"),s(Sx,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),s(Sx,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ex extends lx{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:s}=r_(e,n,i);if(this._drawStart=r,this._drawCount=s,s_(e)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=Lb(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let v=e>0&&this.getParsed(e-1);for(let b=e;b<e+n;++b){const e=t[b],n=this.getParsed(b),c=y?e:{},p=nb(n[f]),_=c[d]=s.getPixelForValue(n[d],b),w=c[f]=r||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);c.skip=isNaN(_)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,e.active?"active":i)),y||this.updateElement(e,b,c,i),v=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,s)/2}}s(Ex,"id","scatter"),s(Ex,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),s(Ex,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function kx(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Tx{static override(t){Object.assign(Tx.prototype,t)}constructor(t){s(this,"options",void 0),this.options=t||{}}init(){}formats(){return kx()}parse(){return kx()}format(){return kx()}add(){return kx()}diff(){return kx()}startOf(){return kx()}endOf(){return kx()}}var Cx=Tx;function Ix(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const o=a._reversePixels?Xb:Yb;if(!i){const i=o(s,e,n);if(l){const{vScale:e}=r._cachedMeta,{_parsed:n}=t,s=n.slice(0,i.lo+1).reverse().findIndex(t=>!nb(t[e.axis]));i.lo-=Math.max(0,s);const o=n.slice(i.hi).findIndex(t=>!nb(t[e.axis]));i.hi+=Math.max(0,o)}return i}if(r._sharedOptions){const t=s[0],i="function"===typeof t.getRange&&t.getRange(e);if(i){const t=o(s,e,n-i),r=o(s,e,n+i);return{lo:t.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function Ax(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:t,data:n}=s[a],{lo:l,hi:c}=Ix(s[a],e,o,r);for(let e=l;e<=c;++e){const r=n[e];r.skip||i(r,t,e)}}}function Px(t,e,n,i,r){const s=[];if(!r&&!t.isPointInArea(e))return s;return Ax(t,n,e,function(n,o,a){(r||N_(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&s.push({element:n,datasetIndex:o,index:a})},!0),s}function Nx(t,e,n,i,r,s){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,s=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return Ax(t,n,e,function(n,c,u){const h=n.inRange(e.x,e.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||t.isPointInArea(d))&&!h)return;const f=a(e,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})}),o}function Dx(t,e,n,i,r,s){return s||t.isPointInArea(e)?"r"!==n||i?Nx(t,e,n,i,r,s):function(t,e,n,i){let r=[];return Ax(t,n,e,function(t,n,s){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],i),{angle:l}=Ub(t,{x:e.x,y:e.y});qb(l,o,a)&&r.push({element:t,datasetIndex:n,index:s})}),r}(t,e,n,r):[]}function Ox(t,e,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return Ax(t,n,e,(t,i,l)=>{t[o]&&t[o](e[n],r)&&(s.push({element:t,datasetIndex:i,index:l}),a=a||t.inRange(e.x,e.y,r))}),i&&!a?[]:s}var Rx={evaluateInteractionItems:Ax,modes:{index(t,e,n,i){const r=Ew(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Px(t,r,s,i,o):Dx(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,i){const r=Ew(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Px(t,r,s,i,o):Dx(t,r,s,!1,i,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>Px(t,Ew(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const r=Ew(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Dx(t,r,s,n.intersect,i,o)},x:(t,e,n,i)=>Ox(t,Ew(e,t),"x",n.intersect,i),y:(t,e,n,i)=>Ox(t,Ew(e,t),"y",n.intersect,i)}};const Mx=["left","top","right","bottom"];function Lx(t,e){return t.filter(t=>t.pos===e)}function Fx(t,e){return t.filter(t=>-1===Mx.indexOf(t.pos)&&t.box.axis===e)}function jx(t,e){return t.sort((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function Vx(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Mx.includes(i))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&e.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&e.availableHeight)}return n}function zx(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Ux(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Bx(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!rb(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[r]+=n.size}s.getPadding&&Ux(o,s.getPadding());const a=Math.max(0,e.outerWidth-zx(o,t,"left","right")),l=Math.max(0,e.outerHeight-zx(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Hx(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{i[t]=Math.max(e[t],n[t])}),i}return i(t?["left","right"]:["top","bottom"])}function Wx(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Hx(a.horizontal,e));const{same:o,other:h}=Bx(e,n,a,i);c|=o&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&Wx(r,e,n,i)||u}function qx(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Kx(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=e.w*c,s=l.size||t.height;wb(l.start)&&(o=l.start),t.fullSize?qx(t,r.left,o,n.outerWidth-r.right-r.left,s):qx(t,e.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=t.bottom}else{const i=e.h*c,o=l.size||t.width;wb(l.start)&&(s=l.start),t.fullSize?qx(t,s,r.top,o,n.outerHeight-r.bottom-r.top):qx(t,s,e.top+l.placed,o,i),l.start=s,l.placed+=i,s=t.right}}e.x=s,e.y=o}var Gx={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=G_(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=function(t){const e=function(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=jx(e.filter(t=>t.box.fullSize),!0),i=jx(Lx(e,"left"),!0),r=jx(Lx(e,"right")),s=jx(Lx(e,"top"),!0),o=jx(Lx(e,"bottom")),a=Fx(e,"x"),l=Fx(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Lx(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;ub(t.boxes,t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()});const u=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);Ux(d,G_(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=Vx(l.concat(c),h);Wx(a.fullSize,f,h,p),Wx(l,f,h,p),Wx(c,f,h,p)&&Wx(l,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Kx(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Kx(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ub(a.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Qx{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Yx extends Qx{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Xx="$chartjs",$x={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Jx=t=>null===t||""===t;const Zx=!!Iw&&{passive:!0};function tS(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Zx)}function eS(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function nS(t,e,n){const i=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||eS(n.addedNodes,i),e=e&&!eS(n.removedNodes,i);e&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function iS(t,e,n){const i=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||eS(n.removedNodes,i),e=e&&!eS(n.addedNodes,i);e&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const rS=new Map;let sS=0;function oS(){const t=window.devicePixelRatio;t!==sS&&(sS=t,rS.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function aS(t,e,n){const i=t.canvas,r=i&&bw(i);if(!r)return;const s=e_((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()},window),o=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||s(n,i)});return o.observe(r),function(t,e){rS.size||window.addEventListener("resize",oS),rS.set(t,e)}(t,s),o}function lS(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){rS.delete(t),rS.size||window.removeEventListener("resize",oS)}(t)}function cS(t,e,n){const i=t.canvas,r=e_(e=>{null!==t.ctx&&n(function(t,e){const n=$x[t.type]||t.type,{x:i,y:r}=Ew(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,Zx)}(i,e,r),r}class uS extends Qx{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Xx]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Jx(r)){const e=Aw(t,"width");void 0!==e&&(t.width=e)}if(Jx(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Aw(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Xx])return!1;const n=e[Xx].initial;["height","width"].forEach(t=>{const i=n[t];nb(i)?e.removeAttribute(t):e.setAttribute(t,i)});const i=n.style||{};return Object.keys(i).forEach(t=>{e.style[t]=i[t]}),e.width=e.width,delete e[Xx],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:nS,detach:iS,resize:aS}[e]||cS;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:lS,detach:lS,resize:lS}[e]||tS)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return Tw(t,e,n,i)}isAttached(t){const e=t&&bw(t);return!(!e||!e.isConnected)}}class hS{constructor(){s(this,"x",void 0),s(this,"y",void 0),s(this,"active",!1),s(this,"options",void 0),s(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Lb(this.x)&&Lb(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),i}}function dS(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(t,e,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===o&&(e.push(t[r]),s++,o=n[s*i])}(e,c,s,o/r),c;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const s=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(i);for(let o=0,a=s.length-1;o<a;o++){const t=s[o];if(t>r)return t}return Math.max(r,1)}(s,e,r);if(o>0){let t,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(fS(e,c,u,nb(i)?0:a-i,a),t=0,n=o-1;t<n;t++)fS(e,c,u,s[t],s[t+1]);return fS(e,c,u,l,nb(i)?e.length:l+i),c}return fS(e,c,u),c}function fS(t,e,n,i,r){const s=ab(i,0),o=Math.min(ab(r,t.length),t.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(e.push(t[l]),u++,c=Math.round(s+u*n))}s(hS,"defaults",{}),s(hS,"defaultRoutes",void 0);const pS=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,gS=(t,e)=>Math.min(e||t,t);function mS(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function yS(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function vS(t){return t.drawTicks?t.tickLength:0}function bS(t,e){if(!t.display)return 0;const n=Q_(t.font,e),i=G_(t.padding);return(ib(t.text)?t.text.length:1)*n.lineHeight+i.height}function _S(t,e,n){let i=n_(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class wS extends hS{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=ob(t,Number.POSITIVE_INFINITY),e=ob(e,Number.NEGATIVE_INFINITY),n=ob(n,Number.POSITIVE_INFINITY),i=ob(i,Number.NEGATIVE_INFINITY),{min:ob(t,n),max:ob(e,i),minDefined:sb(t),maxDefined:sb(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)e=o[a].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),s||(i=Math.max(i,e.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:ob(n,ob(i,n)),max:ob(i,ob(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){cb(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,s=lb(e,(r-i)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?mS(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=dS(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){cb(this.options.afterUpdate,[this])}beforeSetDimensions(){cb(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){cb(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),cb(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){cb(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=cb(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){cb(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){cb(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=gS(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Kb(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(t.offset?.5:1)),o=this.maxHeight-vS(t.grid)-e.padding-bS(t.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=Vb(Math.min(Math.asin(Kb((c.highest.height+6)/s,-1,1)),Math.asin(Kb(o/a,-1,1))-Math.asin(Kb(h/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){cb(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){cb(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=bS(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=vS(r)+s):(t.height=this.maxHeight,t.width=vS(r)+s),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=jb(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const e=n.mirror?0:u*r.width+c*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*r.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,u,c)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?u=t.width:"inner"!==r&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){cb(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)nb(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=mS(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(e/gS(e,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,_=0;for(l=0;l<e;l+=a){if(h=t[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,nb(h)||ib(h)){if(ib(h))for(c=0,u=h.length;c<u;++c)v=h[c],nb(v)||ib(v)||(m=k_(i,p.data,p.gc,m,v),y+=g)}else m=k_(i,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),b=Math.max(m,b),_=Math.max(y,_)}!function(t,e){ub(t,t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}})}(r,e);const w=s.indexOf(b),x=o.indexOf(_),S=t=>({width:s[t]||0,height:o[t]||0});return{first:S(0),last:S(e-1),widest:S(w),highest:S(x),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Kb(this._alignToPixels?C_(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return X_(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=X_(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=jb(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),s=t.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=vS(r),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return C_(n,t,f)};let m,y,v,b,_,w,x,S,E,k,T,C;if("top"===s)m=g(this.bottom),w=this.bottom-u,S=m-p,k=g(t.top)+p,C=t.bottom;else if("bottom"===s)m=g(this.top),k=t.top,C=g(t.bottom)-p,w=m+p,S=this.top+u;else if("left"===s)m=g(this.right),_=this.right-u,x=m-p,E=g(t.left)+p,T=t.right;else if("right"===s)m=g(this.left),E=t.left,T=g(t.right)-p,_=m+p,x=this.left+u;else if("x"===e){if("center"===s)m=g((t.top+t.bottom)/2+.5);else if(rb(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}k=t.top,C=t.bottom,w=m+p,S=w+u}else if("y"===e){if("center"===s)m=g((t.left+t.right)/2);else if(rb(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}_=m-p,x=_-u,E=t.left,T=t.right}const I=ab(i.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/I));for(y=0;y<c;y+=A){const t=this.getContext(y),e=r.setContext(t),i=o.setContext(t),s=e.lineWidth,c=e.color,u=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;v=yS(this,y,a),void 0!==v&&(b=C_(n,v,s),l?_=x=E=T=b:w=S=k=C=b,h.push({tx1:_,ty1:w,tx2:x,ty2:S,x1:E,y1:k,x2:T,y2:C,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,h=vS(n.grid),d=h+c,f=u?-c:d,p=-jb(this.labelRotation),g=[];let m,y,v,b,_,w,x,S,E,k,T,C,I="middle";if("top"===i)w=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,_=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,_=t.x}else if("x"===e){if("center"===i)w=(t.top+t.bottom)/2+d;else if(rb(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)+d}x=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)_=(t.left+t.right)/2-d;else if(rb(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===a?I="top":"end"===a&&(I="bottom"));const A=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],b=v.label;const t=r.setContext(this.getContext(m));S=this.getPixelForTick(m)+r.labelOffset,E=this._resolveTickFontOptions(m),k=E.lineHeight,T=ib(b)?b.length:1;const e=T/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let h,d=x;if(s?(_=S,"inner"===x&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===l||0!==p?-T*k+k/2:"center"===l?-A.highest.height/2-e*k+k:-A.highest.height+k/2:"near"===l||0!==p?k/2:"center"===l?A.highest.height/2-e*k:A.highest.height-T*k,u&&(C*=-1),0===p||t.showLabelBackdrop||(_+=k/2*Math.sin(p))):(w=S,C=(1-T)*k/2),t.showLabelBackdrop){const e=G_(t.backdropPadding),n=A.heights[m],i=A.widths[m];let r=C-e.top,s=0-e.left;switch(I){case"middle":r-=n/2;break;case"bottom":r-=n}switch(x){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===y-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:E,textOffset:C,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:I,translation:[_,w],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-jb(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=t+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===e?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,s;const o=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,s=i.length;r<s;++r){const t=i[r];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=C_(t,this.left,s)-s/2,c=C_(t,this.right,o)+o/2,u=h=a):(u=C_(t,this.top,s)-s/2,h=C_(t,this.bottom,o)+o/2,l=c=a),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&D_(e,n);const i=this.getLabelItems(t);for(const r of i){const t=r.options,n=r.font;j_(e,r.label,0,r.textOffset,n,t)}n&&O_(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=Q_(n.font),s=G_(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===e||"center"===e||rb(e)?(a+=s.bottom,ib(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-r,m=a-s;if(t.isHorizontal()){if(d=i_(i,s,a),rb(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:pS(t,n,e);h=a-s}else{if(rb(n)){const t=Object.keys(n)[0],i=n[t];d=u[t].getPixelForValue(i)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:pS(t,n,e);f=i_(i,o,r),p="left"===n?-Ab:Ab}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,e,o);j_(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:_S(o,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=ab(t.grid&&t.grid.z,-1),i=ab(t.border&&t.border.z,0);return this._isVisible()&&this.draw===wS.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=e.length;r<s;++r){const s=e[r];s[n]!==this.id||t&&s.type!==t||i.push(s)}return i}_resolveTickFontOptions(t){return Q_(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class xS{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=gb(Object.create(null),[n?E_.get(n):{},E_.get(e),t.defaults]);E_.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");E_.route(s,r,l,a)})}(e,t.defaultRoutes);t.descriptors&&E_.describe(e,t.descriptors)}(t,s,n),this.override&&E_.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in E_[i]&&(delete E_[i][n],this.override&&delete b_[n])}}class SS{constructor(){this.controllers=new xS(lx,"datasets",!0),this.elements=new xS(hS,"elements"),this.plugins=new xS(Object,"plugins"),this.scales=new xS(wS,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}addControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}addElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}addPlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}addScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}removeElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}removePlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}removeScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}_each(t,e,n){[...e].forEach(e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):ub(e,e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)})})}_exec(t,e,n){const i=_b(t);cb(n["before"+i],[],n),e[t](n),cb(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var ES=new SS;class kS{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),s=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===cb(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){nb(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=ab(n.options&&n.options.plugins,{}),r=function(t){const e={},n=[],i=Object.keys(ES.plugins.items);for(let s=0;s<i.length;s++)n.push(ES.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const t=r[s];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,e,n,i){let{plugins:r,localIds:s}=e;const o=[],a=t.getContext();for(const l of r){const e=l.id,r=TS(n[e],i);null!==r&&o.push({plugin:l,options:CS(t.config,{plugin:l,local:s[e]},r,a)})}return o}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function TS(t,e){return e||!1!==t?!0===t?{}:t:null}function CS(t,e,n,i){let{plugin:r,local:s}=e;const o=t.pluginScopeKeys(r),a=t.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function IS(t,e){const n=E_.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function AS(t){if("x"===t||"y"===t||"r"===t)return t}function PS(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function NS(t){if(AS(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const r of n){const e=r.axis||PS(r.position)||t.length>1&&AS(t[0].toLowerCase());if(e)return e}throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function DS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function OS(t,e){const n=b_[t.type]||{scales:{}},i=e.scales||{},r=IS(t.type,e),s=Object.create(null);return Object.keys(i).forEach(e=>{const o=i[e];if(!rb(o))return console.error("Invalid scale configuration for scale: ".concat(e));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const a=NS(e,o,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return DS(t,"x",n[0])||DS(t,"y",n[0])}return{}}(e,t),E_.scales[o.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,r),c=n.scales||{};s[e]=mb(Object.create(null),[{axis:a},o,c[a],c[l]])}),t.data.datasets.forEach(n=>{const r=n.type||t.type,o=n.indexAxis||IS(r,e),a=(b_[r]||{}).scales||{};Object.keys(a).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),r=n[e+"AxisID"]||e;s[r]=s[r]||Object.create(null),mb(s[r],[{axis:e},i[r],a[t]])})}),Object.keys(s).forEach(t=>{const e=s[t];mb(e,[E_.scales[e.type],E_.scale])}),s}function RS(t){const e=t.options||(t.options={});e.plugins=ab(e.plugins,{}),e.scales=OS(t,e)}function MS(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const LS=new Map,FS=new Set;function jS(t,e){let n=LS.get(t);return n||(n=e(),LS.set(t,n),FS.add(n)),n}const VS=(t,e,n)=>{const i=bb(e,n);void 0!==i&&t.add(i)};class zS{constructor(t){this._config=function(t){return(t=t||{}).data=MS(t.data),RS(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=MS(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),RS(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return jS(t,()=>[["datasets.".concat(t),""]])}datasetAnimationScopeKeys(t,e){return jS("".concat(t,".transition.").concat(e),()=>[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]])}datasetElementScopeKeys(t,e){return jS("".concat(t,"-").concat(e),()=>[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return jS("".concat(n,"-plugin-").concat(e),()=>[["plugins.".concat(e),...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>VS(a,t,e))),e.forEach(t=>VS(a,i,t)),e.forEach(t=>VS(a,b_[r]||{},t)),e.forEach(t=>VS(a,E_,t)),e.forEach(t=>VS(a,__,t))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),FS.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,b_[e]||{},E_.datasets[e]||{},{type:e},E_,__]}resolveNamedOptions(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=US(this._resolverCache,t,i);let a=s;if(function(t,e){const{isScriptable:n,isIndexable:i}=Z_(t);for(const r of e){const e=n(r),s=i(r),o=(s||e)&&t[r];if(e&&(xb(o)||BS(o))||s&&ib(o))return!0}return!1}(s,e)){r.$shared=!1;a=J_(s,n=xb(n)?n():n,this.createResolver(t,n,o))}for(const l of e)r[l]=a[l];return r}createResolver(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=US(this._resolverCache,t,n);return rb(e)?J_(r,e,void 0,i):r}}function US(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:$_(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},i.set(r,s)}return s}const BS=t=>rb(t)&&Object.getOwnPropertyNames(t).some(e=>xb(t[e]));const HS=["top","bottom","left","right","chartArea"];function WS(t,e){return"top"===t||"bottom"===t||-1===HS.indexOf(t)&&"x"===e}function qS(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function KS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),cb(n&&n.onComplete,[t],e)}function GS(t){const e=t.chart,n=e.options.animation;cb(n&&n.onProgress,[t],e)}function QS(t){return vw()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const YS={},XS=t=>{const e=QS(t);return Object.values(YS).filter(t=>t.canvas===e).pop()};function $S(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const s=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=s)}}}class JS{static register(){ES.add(...arguments),ZS()}static unregister(){ES.remove(...arguments),ZS()}constructor(t,e){const n=this.config=new zS(e),i=QS(t),r=XS(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!vw()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Yx:uS}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=eb(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new kS,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}(t=>this.update(t),s.resizeDelay||0),this._dataChanges=[],YS[this.id]=this,o&&a?(Kw.listen(this,"complete",KS),Kw.listen(this,"progress",GS),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return nb(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ES}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return I_(this.canvas,this.ctx),this}stop(){return Kw.stop(this),this}resize(t,e){Kw.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,t,e,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Cw(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),cb(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){ub(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let r=[];e&&(r=r.concat(Object.keys(e).map(t=>{const n=e[t],i=NS(t,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),ub(r,e=>{const r=e.options,s=r.id,o=NS(s,r),a=ab(r.type,e.dtype);void 0!==r.position&&WS(r.position,o)===WS(e.dposition)||(r.position=e.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(ES.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,t)}),ub(i,(t,e)=>{t||delete n[e]}),ub(n,t=>{Gx.configure(this,t,t.options),Gx.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(qS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||IS(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=ES.getController(s),{datasetElementType:i,dataElementType:o}=E_.datasets[s];Object.assign(e,{dataElementType:ES.getElement(o),datasetElementType:i&&ES.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){ub(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!i&&-1===r.indexOf(t);t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||ub(r,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(qS("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ub(this.scales,t=>{Gx.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);Sb(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){$S(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),i=n(0);for(let r=1;r<e;r++)if(!Sb(i,n(r)))return;return Array.from(i).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Gx.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],ub(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,xb(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Kw.has(this)?this.attached&&!Kw.running(this)&&Kw.start(this):(this.draw(),KS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Ww(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&D_(e,i),t.controller.draw(),i&&O_(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return N_(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=Rx.modes[e];return"function"===typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(t=>t&&t._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=X_(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,i);wb(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(r,{visible:n}),this.update(e=>e.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Kw.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),I_(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete YS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};ub(this.options.events,t=>n(t,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){ub(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ub(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(t=>{let{datasetIndex:e,index:n}=t;const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[n],index:n}});!hb(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=r(e,t),o=n?t:r(t,e);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,s=e,o=this._getActiveElements(t,i,n,s),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,cb(r.onHover,[t,o,this],this),a&&cb(r.onClick,[t,o,this],this));const c=!hb(o,i);return(c||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function ZS(){return ub(JS.instances,t=>t._plugins.invalidate())}function tE(t,e,n,i){const r=W_(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-e)/2,o=Math.min(s,i*e/2),a=t=>{const e=(n-Math.min(s,t))*i/2;return Kb(t,0,Math.min(s,e))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Kb(r.innerStart,0,o),innerEnd:Kb(r.innerEnd,0,o)}}function eE(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function nE(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const t=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const g=(p-Math.max(.001,p*h-n/Eb)/h)/2,m=l+g+f,y=r-g-f,{outerStart:v,outerEnd:b,innerStart:_,innerEnd:w}=tE(e,d,h,y-m),x=h-v,S=h-b,E=m+v/x,k=y-b/S,T=d+_,C=d+w,I=m+_/T,A=y-w/C;if(t.beginPath(),s){const e=(E+k)/2;if(t.arc(o,a,h,E,e),t.arc(o,a,h,e,k),b>0){const e=eE(S,k,o,a);t.arc(e.x,e.y,b,k,y+Ab)}const n=eE(C,y,o,a);if(t.lineTo(n.x,n.y),w>0){const e=eE(C,A,o,a);t.arc(e.x,e.y,w,y+Ab,A+Math.PI)}const i=(y-w/d+(m+_/d))/2;if(t.arc(o,a,d,y-w/d,i,!0),t.arc(o,a,d,i,m+_/d,!0),_>0){const e=eE(T,I,o,a);t.arc(e.x,e.y,_,I+Math.PI,m-Ab)}const r=eE(x,m,o,a);if(t.lineTo(r.x,r.y),v>0){const e=eE(x,E,o,a);t.arc(e.x,e.y,v,m-Ab,E)}}else{t.moveTo(o,a);const e=Math.cos(E)*h+o,n=Math.sin(E)*h+a;t.lineTo(e,n);const i=Math.cos(k)*h+o,r=Math.sin(k)*h+a;t.lineTo(i,r)}t.closePath()}function iE(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){nE(t,e,n,i,p,r);for(let e=0;e<s;++e)t.stroke();isNaN(a)||(p=o+(a%kb||kb))}f&&function(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Ab,i-Ab),t.closePath(),t.clip()}(t,e,p),s||(nE(t,e,n,i,p,r),t.stroke())}s(JS,"defaults",E_),s(JS,"instances",YS),s(JS,"overrides",b_),s(JS,"registry",ES),s(JS,"version","4.4.9"),s(JS,"getChart",XS);class rE extends hS{constructor(t){super(),s(this,"circumference",void 0),s(this,"endAngle",void 0),s(this,"fullCircles",void 0),s(this,"innerRadius",void 0),s(this,"outerRadius",void 0),s(this,"pixelMargin",void 0),s(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=Ub(i,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=ab(u,a-o),f=qb(r,o,a)&&o!==a,p=d>=kb||f,g=Gb(s,l+h,c+h);return p&&g}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(s+o+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>kb?Math.floor(n/kb):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(Eb,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){nE(t,e,n,i,l,r);for(let e=0;e<s;++e)t.fill();isNaN(a)||(l=o+(a%kb||kb))}nE(t,e,n,i,l,r),t.fill()}(t,this,a,r,s),iE(t,this,a,r,s),t.restore()}}function sE(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=ab(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ab(n.borderDash,e.borderDash)),t.lineDashOffset=ab(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ab(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ab(n.borderWidth,e.borderWidth),t.strokeStyle=ab(n.borderColor,e.borderColor)}function oE(t,e,n){t.lineTo(n.x,n.y)}function aE(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function lE(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=aE(r,n,i),u=function(t){return t.stepped?R_:t.tension||"monotone"===t.cubicInterpolationMode?M_:oE}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(a+(g?c-h:h))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,s.stepped),f=d);return l&&(d=r[(a+(g?c:0))%o],u(t,f,d,g,s.stepped)),!!l}function cE(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=aE(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,y=0;const v=t=>(o+(c?a-t:t))%s,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(h=r[v(0)],t.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=r[v(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(b(),t.lineTo(e,n),d=i,y=0,f=p=n),g=n}b()}function uE(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?cE:lE}s(rE,"id","arc"),s(rE,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),s(rE,"defaultRoutes",{backgroundColor:"backgroundColor"}),s(rE,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const hE="function"===typeof Path2D;function dE(t,e,n,i){hE&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),sE(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:s}=e,o=uE(e);for(const a of r)sE(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class fE extends hS{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;yw(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=function(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}(n,r,s,i);return zw(t,!0===i?[{start:o,end:a,loop:s}]:function(t,e,n,i){const r=t.length,s=[];let o,a=e,l=t[e];for(o=e+1;o<=n;++o){const n=t[o%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:e%r,end:(o-1)%r,loop:i}),e=a=n.stop?o:null):(a=o,l.skip&&(e=o)),l=n}return null!==a&&s.push({start:e%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!t._fullLoop&&0===o&&a===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,s=Vw(this,{property:e,start:i,end:i});if(!s.length)return;const o=[],a=function(t){return t.stepped?Nw:t.tension||"monotone"===t.cubicInterpolationMode?Dw:Pw}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,e,n){return uE(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=uE(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const o of i)s&=r(t,this,o,{start:e,end:e+n-1});return!!s}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),dE(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function pE(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}s(fE,"id","line"),s(fE,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),s(fE,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),s(fE,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class gE extends hS{constructor(t){super(),s(this,"parsed",void 0),s(this,"skip",void 0),s(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return pE(this,t,"x",e)}inYRange(t,e){return pE(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!N_(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,A_(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function mE(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function yE(t,e,n,i){return t?0:Kb(e,n,i)}function vE(t){const e=mE(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=q_(i);return{t:yE(r.top,s.top,0,n),r:yE(r.right,s.right,0,e),b:yE(r.bottom,s.bottom,0,n),l:yE(r.left,s.left,0,e)}}(t,n/2,i/2),s=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=K_(r),o=Math.min(e,n),a=t.borderSkipped,l=i||rb(r);return{topLeft:yE(!l||a.top||a.left,s.topLeft,0,o),topRight:yE(!l||a.top||a.right,s.topRight,0,o),bottomLeft:yE(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:yE(!l||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function bE(t,e,n,i){const r=null===e,s=null===n,o=t&&!(r&&s)&&mE(t,i);return o&&(r||Gb(e,o.left,o.right))&&(s||Gb(n,o.top,o.bottom))}function _E(t,e){t.rect(e.x,e.y,e.w,e.h)}function wE(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}s(gE,"id","point"),s(gE,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),s(gE,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class xE extends hS{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=vE(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?V_:_E;var a;t.save(),s.w===r.w&&s.h===r.h||(t.beginPath(),o(t,wE(s,e,r)),t.clip(),o(t,wE(r,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,wE(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return bE(this,t,e,n)}inXRange(t,e){return bE(this,t,null,e)}inYRange(t,e){return bE(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}s(xE,"id","bar"),s(xE,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),s(xE,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const SE=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class EE extends hS{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=cb(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=Q_(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=SE(n,r);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,i,o,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),a[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+o}),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-t;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach((t,s)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,i,r){const s=function(t,e,n,i){let r=t.text;r&&"string"!==typeof r&&(r=r.reduce((t,e)=>t.length>e.length?t:e));return e+n.size/2+i.measureText(r).width}(i,t,e,n),o=function(t,e,n){let i=t;"string"!==typeof e.text&&(i=kE(e,n));return i}(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}(n,e,r,t,i);s>0&&d+m+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,s=Ow(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=i_(n,this.left+i,this.right-this.lineWidths[r]);for(const a of e)r!==a.row&&(r=a.row,o=i_(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+t+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=i_(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const a of e)a.col!==r&&(r=a.col,o=i_(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;D_(t,this),this._draw(),O_(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:s}=t,o=E_.color,a=Ow(t.rtl,this.left,this.width),l=Q_(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=SE(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:i_(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:i_(r,this.top+y+c,this.bottom-e[0].height),line:0},Rw(this.ctx,t.textDirection);const v=g+c;this.legendItems.forEach((b,_)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const w=i.measureText(b.text).width,x=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),S=f+h+w;let E=d.x,k=d.y;a.setWidth(this.width),m?_>0&&E+S+c>this.right&&(k=d.y+=v,d.line++,E=d.x=i_(r,this.left+c,this.right-n[d.line])):_>0&&k+v>this.bottom&&(E=d.x=E+e[d.line].width+c,d.line++,k=d.y=i_(r,this.top+y+c,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=ab(n.lineWidth,1);if(i.fillStyle=ab(n.fillStyle,o),i.lineCap=ab(n.lineCap,"butt"),i.lineDashOffset=ab(n.lineDashOffset,0),i.lineJoin=ab(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=ab(n.strokeStyle,o),i.setLineDash(ab(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=a.xPlus(t,f/2);P_(i,o,l,e+h,s.pointStyleWidth&&f)}else{const s=e+Math.max((u-p)/2,0),o=a.leftForLtr(t,f),l=K_(n.borderRadius);i.beginPath(),Object.values(l).some(t=>0!==t)?V_(i,{x:o,y:s,w:f,h:p,radius:l}):i.rect(o,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(E),k,b),E=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(x,E+f+h,m?E+S:this.right,t.rtl),function(t,e,n){j_(i,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(E),k,b),m)d.x+=S+c;else if("string"!==typeof b.text){const t=l.lineHeight;d.y+=kE(b,t)+c}else d.y+=v}),Mw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Q_(e.font),i=G_(e.padding);if(!e.display)return;const r=Ow(t.rtl,this.left,this.width),s=this.ctx,o=e.position,a=n.size/2,l=i.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=i_(t.align,u,this.right-h);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+i_(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=i_(o,u,u+h);s.textAlign=r.textAlign(n_(o)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,j_(s,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=Q_(t.font),n=G_(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(Gb(t,this.left,this.right)&&Gb(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Gb(t,i.left,i.left+i.width)&&Gb(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,o=(r=n,null!==(i=s)&&null!==r&&i.datasetIndex===r.datasetIndex&&i.index===r.index);s&&!o&&cb(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&cb(e.onHover,[t,n,this],this)}else n&&cb(e.onClick,[t,n,this],this);var i,r}}function kE(t,e){return e*(t.text?t.text.length:0)}var TE={id:"legend",_element:EE,start(t,e,n){const i=t.legend=new EE({ctx:t.ctx,options:n,chart:t});Gx.configure(t,i,n),Gx.addBox(t,i)},stop(t){Gx.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Gx.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=G_(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class CE extends hS{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=ib(n.text)?n.text.length:1;this._padding=G_(n.padding);const r=i*Q_(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=i_(o,n,r),c=e+t,a=r-n):("left"===s.position?(l=n+t,c=i_(o,i,e),u=-.5*Eb):(l=r-t,c=i_(o,e,i),u=.5*Eb),a=i-e),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Q_(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(i);j_(t,e.text,0,0,n,{color:e.color,maxWidth:o,rotation:a,textAlign:n_(e.align),textBaseline:"middle",translation:[r,s]})}}var IE={id:"title",_element:CE,start(t,e,n){!function(t,e){const n=new CE({ctx:t.ctx,options:e,chart:t});Gx.configure(t,n,e),Gx.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Gx.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Gx.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const AE={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),r+=t.y,++s}}if(0===s||0===i.size)return!1;return{x:[...i].reduce((t,e)=>t+e)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n,i,r,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=Bb(e,i.getCenterPoint());t<a&&(a=t,r=i)}}if(r){const t=r.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function PE(t,e){return e&&(ib(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function NE(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function DE(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function OE(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Q_(e.bodyFont),c=Q_(e.titleFont),u=Q_(e.footerFont),h=s.length,d=r.length,f=i.length,p=G_(e.padding);let g=p.height,m=0,y=i.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let v=0;const b=function(t){m=Math.max(m,n.measureText(t).width+v)};return n.save(),n.font=c.string,ub(t.title,b),n.font=l.string,ub(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,ub(i,t=>{ub(t.before,b),ub(t.lines,b),ub(t.after,b)}),v=0,n.font=u.string,ub(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function RE(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===t&&r+s+o>e.width||"right"===t&&r-s-o<0||void 0}(c,t,e,n)&&(c="center"),c}function ME(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||RE(t,e,n,i),yAlign:i}}function LE(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=K_(o);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+r:"right"===a&&(p+=Math.max(h,f)+r),{x:Kb(p,0,i.width-e.width),y:Kb(g,0,i.height-e.height)}}function FE(t,e,n){const i=G_(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function jE(t){return PE([],NE(t))}function VE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const zE={beforeTitle:tb,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:tb,beforeBody:tb,beforeLabel:tb,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return nb(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:tb,afterBody:tb,beforeFooter:tb,footer:tb,afterFooter:tb};function UE(t,e,n,i){const r=t[e].call(n,i);return"undefined"===typeof r?zE[e].call(n,i):r}class BE extends hS{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new Xw(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,X_(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=UE(n,"beforeTitle",this,t),r=UE(n,"title",this,t),s=UE(n,"afterTitle",this,t);let o=[];return o=PE(o,NE(i)),o=PE(o,NE(r)),o=PE(o,NE(s)),o}getBeforeBody(t,e){return jE(UE(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return ub(t,t=>{const e={before:[],lines:[],after:[]},r=VE(n,t);PE(e.before,NE(UE(r,"beforeLabel",this,t))),PE(e.lines,UE(r,"label",this,t)),PE(e.after,NE(UE(r,"afterLabel",this,t))),i.push(e)}),i}getAfterBody(t,e){return jE(UE(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=UE(n,"beforeFooter",this,t),r=UE(n,"footer",this,t),s=UE(n,"afterFooter",this,t);let o=[];return o=PE(o,NE(i)),o=PE(o,NE(r)),o=PE(o,NE(s)),o}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=e.length;o<a;++o)l.push(DE(this.chart,e[o]));return t.filter&&(l=l.filter((e,i,r)=>t.filter(e,i,r,n))),t.itemSort&&(l=l.sort((e,i)=>t.itemSort(e,i,n))),ub(l,e=>{const n=VE(t.callbacks,e);i.push(UE(n,"labelColor",this,e)),r.push(UE(n,"labelPointStyle",this,e)),s.push(UE(n,"labelTextColor",this,e))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const t=AE[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=OE(this,n),o=Object.assign({},t,e),a=ME(this.chart,n,o),l=LE(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=K_(o),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,y,v,b,_;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-s,v=b+s,_=b-s):(g=h+f,m=g+s,v=b-s,_=b+s),y=g):(m="left"===i?h+Math.max(a,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),_=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:_}}drawTitle(t,e,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=Ow(n.rtl,this.x,this.width);for(t.x=FE(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=Q_(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,a+1===r&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=Q_(r.bodyFont),u=FE(this,"left",r),h=i.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=e.y+d;if(r.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+a/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,A_(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,A_(t,e,n,c)}else{t.lineWidth=rb(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),o=K_(s.borderRadius);Object.values(o).some(t=>0!==t)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,V_(t,{x:e,y:f,w:l,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),V_(t,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Q_(n.bodyFont);let h=u.lineHeight,d=0;const f=Ow(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+r},g=f.textAlign(s);let m,y,v,b,_,w,x;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=FE(this,g,n),e.fillStyle=n.bodyColor,ub(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,w=i.length;b<w;++b){for(m=i[b],y=this.labelTextColors[b],e.fillStyle=y,ub(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(u.lineHeight,a)),_=0,x=v.length;_<x;++_)p(v[_]),h=u.lineHeight;ub(m.after,p)}d=0,h=u.lineHeight,ub(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let s,o;if(r){const a=Ow(n.rtl,this.x,this.width);for(t.x=FE(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",s=Q_(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,o=0;o<r;++o)e.fillText(i[o],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=K_(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+l-h,a),e.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+d,a+c),e.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=AE[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=OE(this,t),o=Object.assign({},n,this._size),a=ME(e,t,o),l=LE(t,o,a,e);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=G_(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),Rw(t,e.textDirection),r.y+=s.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Mw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(t=>{let{datasetIndex:e,index:n}=t;const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[n],index:n}}),r=!hb(n,i),s=this._positionChanged(i,e);(r||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(t,r,e,n),o=this._positionChanged(s,t),a=e||!hb(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const s=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,s=AE[r.position].call(this,t,e);return!1!==s&&(n!==s.x||i!==s.y)}}s(BE,"positioners",AE);var HE={id:"tooltip",_element:BE,positioners:AE,afterInit(t,e,n){n&&(t.tooltip=new BE({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",a(a({},n),{},{cancelable:!0})))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:zE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function WE(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"===typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}function qE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class KE extends wS{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(nb(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Kb(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:WE(n,t,ab(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=t;s<=e;s++)i.push({value:s});return i}getLabelForValue(t){return qE.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function GE(t,e){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=t,d=r||1,f=c-1,{min:p,max:g}=e,m=!nb(s),y=!nb(o),v=!nb(l),b=(g-p)/(u+1);let _,w,x,S,E=Mb((g-p)/f/d)*d;if(E<1e-14&&!m&&!y)return[{value:p},{value:g}];S=Math.ceil(g/E)-Math.floor(p/E),S>f&&(E=Mb(S*E/f/d)*d),nb(a)||(_=Math.pow(10,a),E=Math.ceil(E*_)/_),"ticks"===i?(w=Math.floor(p/E)*E,x=Math.ceil(g/E)*E):(w=p,x=g),m&&y&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-s)/r,E/1e3)?(S=Math.round(Math.min((o-s)/E,c)),E=(o-s)/S,w=s,x=o):v?(w=m?s:w,x=y?o:x,S=l-1,E=(x-w)/S):(S=(x-w)/E,S=Rb(S,Math.round(S),E/1e3)?Math.round(S):Math.ceil(S));const k=Math.max(zb(E),zb(w));_=Math.pow(10,nb(a)?k:a),w=Math.round(w*_)/_,x=Math.round(x*_)/_;let T=0;for(m&&(h&&w!==s?(n.push({value:s}),w<s&&T++,Rb(Math.round((w+T*E)*_)/_,s,QE(s,b,t))&&T++):w<s&&T++);T<S;++T){const t=Math.round((w+T*E)*_)/_;if(y&&t>o)break;n.push({value:t})}return y&&h&&x!==o?n.length&&Rb(n[n.length-1].value,o,QE(o,b,t))?n[n.length-1].value=o:n.push({value:o}):y&&x!==o||n.push({value:x}),n}function QE(t,e,n){let{horizontal:i,minRotation:r}=n;const s=jb(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}s(KE,"id","category"),s(KE,"defaults",{ticks:{callback:qE}});class YE extends wS{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return nb(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=t=>i=e?i:t,o=t=>r=n?r:t;if(t){const t=Ob(i),e=Ob(r);t<0&&e<0?o(0):t>0&&e>0&&s(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);o(r+e),t||s(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=GE({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Fb(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return m_(t,this.chart.options.locale,this.options.ticks.format)}}class XE extends YE{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=sb(t)?t:0,this.max=sb(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=jb(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}s(XE,"id","linear"),s(XE,"defaults",{ticks:{callback:v_.formatters.numeric}});const $E=t=>Math.floor(Db(t)),JE=(t,e)=>Math.pow(10,$E(t)+e);function ZE(t){return 1===t/Math.pow(10,$E(t))}function tk(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function ek(t,e){let{min:n,max:i}=e;n=ob(t.min,n);const r=[],s=$E(n);let o=function(t,e){let n=$E(e-t);for(;tk(t,e,n)>10;)n++;for(;tk(t,e,n)<10;)n--;return Math.min(n,$E(t))}(n,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=ob(t.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<i;)r.push({value:f,major:ZE(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=ob(t.max,f);return r.push({value:p,major:ZE(p),significand:d}),r}class nk extends wS{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=YE.prototype.parse.apply(this,[t,e]);if(0!==n)return sb(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=sb(t)?Math.max(0,t):null,this.max=sb(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!sb(this._userMin)&&(this.min=t===JE(this.min,0)?JE(this.min,-1):JE(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,s=t=>i=e?i:t;n===i&&(n<=0?(r(1),s(10)):(r(JE(n,-1)),s(JE(i,1)))),n<=0&&r(JE(i,-1)),i<=0&&s(JE(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=ek({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Fb(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":m_(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Db(t),this._valueRange=Db(this.max)-Db(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Db(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ik(t){const e=t.ticks;if(e.display&&t.display){const t=G_(e.backdropPadding);return ab(e.font&&e.font.size,E_.font.size)+t.height}return 0}function rk(t,e,n){return n=ib(n)?n:[n],{w:T_(t,e.string,n),h:n.length*e.lineHeight}}function sk(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function ok(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Eb/s:0;for(let l=0;l<s;l++){const s=o.setContext(t.getPointLabelContext(l));r[l]=s.padding;const c=t.getPointPosition(l,t.drawingArea+r[l],a),u=Q_(s.font),h=rk(t.ctx,u,t._pointLabels[l]);i[l]=h;const d=Wb(t.getIndexAngle(l)+a),f=Math.round(Vb(d));ak(n,e,d,sk(f,c.x,h.w,0,180),sk(f,c.y,h.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:ik(s)/2,additionalAngle:o?Eb/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const r=lk(t,u,l);i.push(r),"auto"===a&&(r.visible=ck(r,c),r.visible&&(c=r))}return i}(t,i,r)}function ak(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function lk(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(Vb(Wb(l.angle+Ab))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,a.h,c),h=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function ck(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(N_({x:n,y:i},e)||N_({x:n,y:s},e)||N_({x:r,y:i},e)||N_({x:r,y:s},e))}function uk(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!nb(a)){const n=K_(e.borderRadius),l=G_(e.backdropPadding);t.fillStyle=a;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=o-r+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),V_(t,{x:c,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(c,u,h,d)}}function hk(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,kb);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.getPointPosition(s,e),r.lineTo(n.x,n.y)}}s(nk,"id","logarithmic"),s(nk,"defaults",{ticks:{callback:v_.formatters.logarithmic,major:{enabled:!0}}});class dk extends YE{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=G_(ik(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=sb(t)&&!isNaN(t)?t:0,this.max=sb(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ik(this.options))}generateTickLabels(t){YE.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=cb(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?ok(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return Wb(t*(kb/(this._pointLabels.length||1))+jb(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(nb(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(nb(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return X_(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(t)-Ab+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),hk(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,s=this._pointLabels.length;let o,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=t._pointLabelItems[r];if(!e.visible)continue;const s=i.setContext(t.getPointLabelContext(r));uk(n,s,e);const o=Q_(s.font),{x:a,y:l,textAlign:c}=e;j_(n,t._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=i.setContext(n),l=r.setContext(n);!function(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),hk(t,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}}),n.display){for(t.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(t.lineWidth=s,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((i,o)=>{if(0===o&&this.min>=0&&!e.reverse)return;const a=n.setContext(this.getContext(o)),l=Q_(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=l.string,s=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=G_(a.backdropPadding);t.fillRect(-s/2-e.left,-r-l.size/2-e.top,s+e.width,l.size+e.height)}j_(t,i.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),t.restore()}drawTitle(){}}s(dk,"id","radialLinear"),s(dk,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:v_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}}),s(dk,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),s(dk,"descriptors",{angleLines:{_fallback:"grid"}});const fk={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pk=Object.keys(fk);function gk(t,e){return t-e}function mk(t,e){if(nb(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return"function"===typeof i&&(o=i(o)),sb(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!Lb(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function yk(t,e,n,i){const r=pk.length;for(let s=pk.indexOf(t);s<r-1;++s){const t=fk[pk[s]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return pk[s]}return pk[r-1]}function vk(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=Qb(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function bk(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class _k extends wS{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.time||(t.time={}),i=this._adapter=new Cx(t.adapters.date);i.init(e),mb(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:mk(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(t){s||isNaN(t.min)||(i=Math.min(i,t.min)),o||isNaN(t.max)||(r=Math.max(r,t.max))}s&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=sb(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=sb(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?yk(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let s=pk.length-1;s>=pk.indexOf(n);s--){const n=pk[s];if(fk[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return pk[n?pk.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=pk.indexOf(t)+1,n=pk.length;e<n;++e)if(fk[pk[e]].common)return pk[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&s.reverse(),bk(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),i=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),r=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=Kb(i,0,s),r=Kb(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||yk(r.minUnit,e,n,this._getLabelCapacity(e)),o=ab(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=Lb(a)||!0===a,c={};let u,h,d=e;if(l&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,l?"day":s),t.diff(n,e,s)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,o,s),h++)vk(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||vk(c,u,f),Object.keys(c).sort(gk).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,r=e||n[i];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const r=this.options,s=r.ticks.callback;if(s)return cb(s,[t,e,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[e],d=l&&u&&h&&h.major;return this._adapter.format(t,i||(d?u:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=jb(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,bk(this,[t],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(mk(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Zb(t.sort(gk))}}function wk(t,e,n){let i,r,s,o,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Yb(t,"pos",e)),({pos:i,time:s}=t[a]),({pos:r,time:o}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Yb(t,"time",e)),({time:i,pos:s}=t[a]),({time:r,pos:o}=t[l]));const c=r-i;return c?s+(o-s)*(e-i)/c:s}s(_k,"id","time"),s(_k,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class xk extends _k{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=wk(e,this.min),this._tableRange=wk(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;++s)l=t[s],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],a=i[s-1],l=i[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(o-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(wk(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return wk(this._table,n*this._tableRange+this._minPos,!0)}}s(xk,"id","timeseries"),s(xk,"defaults",_k.defaults);const Sk=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Ek="label";function kk(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function Tk(t,e){t.labels=e}function Ck(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ek;const i=[];t.datasets=e.map(e=>{const r=t.datasets.find(t=>t[n]===e[n]);return r&&e.data&&!i.includes(r)?(i.push(r),Object.assign(r,e),r):a({},e)})}function Ik(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ek;const n={labels:[],datasets:[]};return Tk(n,t.labels),Ck(n,t.datasets,e),n}function Ak(e,n){const{height:i=150,width:r=300,redraw:s=!1,datasetIdKey:o,type:l,data:u,options:h,plugins:d=[],fallbackContent:f,updateMode:p}=e,g=c(e,Sk),m=(0,t.useRef)(null),y=(0,t.useRef)(null),v=()=>{m.current&&(y.current=new JS(m.current,{type:l,data:Ik(u,o),options:h&&a({},h),plugins:d}),kk(n,y.current))},b=()=>{kk(n,null),y.current&&(y.current.destroy(),y.current=null)};return(0,t.useEffect)(()=>{!s&&y.current&&h&&function(t,e){const n=t.options;n&&e&&Object.assign(n,e)}(y.current,h)},[s,h]),(0,t.useEffect)(()=>{!s&&y.current&&Tk(y.current.config.data,u.labels)},[s,u.labels]),(0,t.useEffect)(()=>{!s&&y.current&&u.datasets&&Ck(y.current.config.data,u.datasets,o)},[s,u.datasets]),(0,t.useEffect)(()=>{y.current&&(s?(b(),setTimeout(v)):y.current.update(p))},[s,h,u.labels,u.datasets,p]),(0,t.useEffect)(()=>{y.current&&(b(),setTimeout(v))},[l]),(0,t.useEffect)(()=>(v(),()=>b()),[]),t.createElement("canvas",a({ref:m,role:"img",height:i,width:r},g),f)}const Pk=(0,t.forwardRef)(Ak);function Nk(e,n){return JS.register(n),(0,t.forwardRef)((n,i)=>t.createElement(Pk,a(a({},n),{},{ref:i,type:e})))}const Dk=Nk("line",_x);function Ok(e){const{goToPage:n,responseCounts:i,learnedOverTime:r,currentSetName:s,given:o,want:l,termCount:c}=e,{isDarkMode:u}=Og(),[h,f]=(0,t.useState)(0),[p,g]=(0,t.useState)(0);(0,t.useEffect)(()=>{m(i)},[i]);const m=t=>{const e=t.filter(t=>1===t).length,n=t.filter(t=>0===t).length;f(e),g(n)},y=u?{backgroundColor:"#23272b",color:"#fff",borderColor:"#444"}:{},v=u?{color:"#fff"}:{},b=u?{backgroundColor:"#181a1b",color:"#fff",border:"1px solid #444"}:{},_={responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Words Learned Over Time",color:u?"#fff":void 0}},scales:{x:{min:0,title:{display:!0,text:"Number of Trials",color:u?"#fff":void 0},ticks:{color:u?"#fff":void 0},grid:{color:u?"#444":void 0}},y:{min:0,title:{display:!0,text:"Words Learned",color:u?"#fff":void 0},beginAtZero:!0,ticks:{color:u?"#fff":void 0},grid:{color:u?"#444":void 0}}}};return(0,d.jsxs)(sm,{body:!0,style:a({width:"400px"},y),children:[(0,d.jsxs)(E,{direction:"horizontal",style:{justifyContent:"flex-start",alignItems:"flex-start"},children:[(0,d.jsxs)(sm.Title,{style:a({flexGrow:1},v),children:["Finished Testing ",s]}),(0,d.jsx)(bm,{onClick:()=>n("home")})]}),(0,d.jsxs)(E,{gap:"3",children:[(0,d.jsxs)(_v,{variant:"success",style:b,children:[(0,d.jsxs)("div",{children:["Correct Answers: ",h]}),(0,d.jsxs)("div",{children:["Incorrect Answers: ",p]}),(0,d.jsxs)("div",{children:["Accuracy: ",h+p>0?Math.round(h/(h+p)*100):0,"%"]}),(0,d.jsx)("div",{children:(()=>{if(!o||!l)return"";const t=o.toUpperCase(),e=l.toUpperCase();return"".concat(c||0," terms, Testing ").concat(e," given ").concat(t)})()})]}),r.length>0&&(0,d.jsx)(Dk,{data:{labels:r.map(t=>t.trial),datasets:[{label:"Words Learned",data:r.map(t=>t.learned),borderColor:"green",backgroundColor:"rgba(0,128,0,0.2)",tension:.3}]},options:_}),(0,d.jsx)(yy,{variant:"success",onClick:()=>{n("home")},children:"Return Home"})]})]})}function Rk(t){const{onBack:e,goToPage:n}=t,{currentUser:i,logout:r}=Pg(),{isDarkMode:s,toggleDarkMode:o}=Og(),l=s?{backgroundColor:"#23272b",color:"#fff",borderColor:"#444"}:{},c=s?{padding:"10px",backgroundColor:"#181a1b",borderRadius:"5px",textAlign:"center",color:"#fff"}:{padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"5px",textAlign:"center"};return(0,d.jsx)(sm,{style:a({width:"400px",maxHeight:"90%"},l),children:(0,d.jsxs)(sm.Body,{style:{height:"100%",overflow:"hidden"},children:[(0,d.jsxs)(E,{direction:"horizontal",style:{justifyContent:"space-between",alignItems:"flex-start",gap:"5px"},children:[(0,d.jsx)(sm.Title,{style:{color:s?"#fff":void 0},children:"Settings"}),(0,d.jsx)(yy,{variant:s?"outline-light":"outline-secondary",onClick:()=>{e?e():n?n("home"):window.history.back()},children:"Back"})]}),(0,d.jsxs)(E,{gap:3,style:{marginTop:"20px"},children:[(0,d.jsxs)("div",{style:c,children:[(0,d.jsx)("div",{style:{fontSize:"0.9rem",color:s?"#b0b0b0":"#6c757d"},children:i?"Logged in as":"Not logged in"}),(0,d.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:"500",wordBreak:"break-all",color:s?"#fff":void 0},children:i?i.email:"Sign in to save and edit sets"})]}),(0,d.jsx)(hy,{children:(0,d.jsx)(hy.Check,{type:"switch",id:"dark-mode-switch",label:"Dark Mode",checked:s,onChange:o,style:{fontSize:"1.1rem",color:s?"#fff":void 0}})}),i?(0,d.jsx)(yy,{variant:"danger",onClick:async()=>{try{await r()}catch(t){console.error("Failed to log out:",t)}},style:{marginTop:"10px"},children:"Log Out"}):(0,d.jsx)(yy,{variant:s?"light":"primary",style:{marginTop:"10px"},onClick:()=>{n?n("home"):window.location.assign("".concat("/mandarin-trainer","/"))},children:"Log In"})]})]})})}JS.register(KE,XE,gE,fE,IE,HE,TE);const Mk=["bsPrefix","fluid","as","className"],Lk=t.forwardRef((t,e)=>{let{bsPrefix:n,fluid:i=!1,as:r="div",className:s}=t,o=c(t,Mk);const l=v(n,"container"),u="string"===typeof i?"-".concat(i):"-fluid";return(0,d.jsx)(r,a(a({ref:e},o),{},{className:h()(s,i?"".concat(l).concat(u):l)}))});Lk.displayName="Container";const Fk=Lk;var jk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Vk=t.createContext&&t.createContext(jk),zk=function(){return zk=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},zk.apply(this,arguments)},Uk=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};function Bk(e){return e&&e.map(function(e,n){return t.createElement(e.tag,zk({key:n},e.attr),Bk(e.child))})}function Hk(e){return function(n){return t.createElement(Wk,zk({attr:zk({},e.attr)},n),Bk(e.child))}}function Wk(e){var n=function(n){var i,r=e.attr,s=e.size,o=e.title,a=Uk(e,["attr","size","title"]),l=s||n.size||"1em";return n.className&&(i=n.className),e.className&&(i=(i?i+" ":"")+e.className),t.createElement("svg",zk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:i,style:zk(zk({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==Vk?t.createElement(Vk.Consumer,null,function(t){return n(t)}):n(jk)}function qk(t){return Hk({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"}}]})(t)}function Kk(t){return Hk({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(t)}function Gk(){const{signInWithGoogle:t,error:e}=Pg(),{isDarkMode:n}=Og();return(0,d.jsx)(Fk,{className:"d-flex flex-column align-items-center justify-content-center",style:{minHeight:"100vh"},children:(0,d.jsx)(sm,{style:{width:"400px",backgroundColor:n?"#2d2d2d":"#ffffff",borderColor:n?"#404040":"#dee2e6"},children:(0,d.jsxs)(sm.Body,{className:"d-flex flex-column align-items-center p-4",children:[(0,d.jsxs)("div",{className:"d-flex align-items-center gap-3 mb-4",children:[(0,d.jsx)("img",{src:"/mandarin-trainer/roundedfinallogo.png",alt:"Mandarin Trainer Logo",style:{height:48,width:48}}),(0,d.jsx)("h2",{style:{margin:0,color:n?"#ffffff":"#000000"},children:"Mandarin Trainer"})]}),(0,d.jsx)("p",{className:"text-center mb-4",style:{color:n?"#cccccc":"#6c757d"},children:"Sign in to access your vocabulary sets and track your progress"}),(0,d.jsxs)(yy,{variant:n?"outline-light":"outline-primary",onClick:()=>{console.log("Google sign-in clicked"),t()},className:"d-flex align-items-center gap-2 mb-3 w-100 justify-content-center py-2",size:"lg",children:[(0,d.jsx)(qk,{}),"Sign in with Google"]}),e&&(0,d.jsx)("div",{className:"text-danger mt-3 text-center",children:e})]})})})}const Qk=["bsPrefix","className","as"],Yk=t.forwardRef((t,e)=>{let{bsPrefix:n,className:i,as:r="div"}=t,s=c(t,Qk);const o=v(n,"row"),l=b(),u=_(),f="".concat(o,"-cols"),p=[];return l.forEach(t=>{const e=s[t];let n;delete s[t],null!=e&&"object"===typeof e?({cols:n}=e):n=e;const i=t!==u?"-".concat(t):"";null!=n&&p.push("".concat(f).concat(i,"-").concat(n))}),(0,d.jsx)(r,a(a({ref:e},s),{},{className:h()(i,o,...p)}))});Yk.displayName="Row";const Xk=Yk,$k=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],Jk=t.forwardRef((t,e)=>{let{bsPrefix:n,className:i,striped:r,bordered:s,borderless:o,hover:l,size:u,variant:f,responsive:p}=t,g=c(t,$k);const m=v(n,"table"),y=h()(i,m,f&&"".concat(m,"-").concat(f),u&&"".concat(m,"-").concat(u),r&&"".concat(m,"-").concat("string"===typeof r?"striped-".concat(r):"striped"),s&&"".concat(m,"-bordered"),o&&"".concat(m,"-borderless"),l&&"".concat(m,"-hover")),b=(0,d.jsx)("table",a(a({},g),{},{className:y,ref:e}));if(p){let t="".concat(m,"-responsive");return"string"===typeof p&&(t="".concat(t,"-").concat(p)),(0,d.jsx)("div",{className:t,children:b})}return b}),Zk=Jk;function tT(e){let{set:n,goToPage:i,onSetUpdated:r}=e;const{currentUser:s}=Pg(),{isDarkMode:o}=Og(),[l,c]=(0,t.useState)((null===n||void 0===n?void 0:n.setName)||""),[u,h]=(0,t.useState)((null===n||void 0===n?void 0:n.vocabItems)||[]),f=(0,t.useRef)((null===n||void 0===n?void 0:n.setName)||""),p=(0,t.useRef)((null===n||void 0===n?void 0:n.vocabItems)||[]),[g,m]=(0,t.useState)({character:"",pinyin:"",definition:""}),[y,v]=(0,t.useState)(""),[b,_]=(0,t.useState)(""),[w,x]=(0,t.useState)(null),S=o?{backgroundColor:"#23272b",color:"#fff",borderColor:"#444"}:{},E=o?{backgroundColor:"#181a1b",color:"#fff",border:"1px solid #444"}:{},k=o?{backgroundColor:"#181a1b",color:"#fff"}:{};return(0,d.jsxs)("div",{style:{maxHeight:"100vh",overflowY:"auto",padding:"1rem",background:o?"#181a1b":void 0},className:o?"vocab-scroll-dark":"",children:[o&&(0,d.jsx)("style",{children:"\n                    .vocab-darkmode-input::placeholder {\n                        color: #b0b0b0 !important;\n                        opacity: 1 !important;\n                    }\n                    .vocab-scroll-dark::-webkit-scrollbar {\n                        width: 10px;\n                    }\n                    .vocab-scroll-dark::-webkit-scrollbar-track {\n                        background: #111;\n                    }\n                    .vocab-scroll-dark::-webkit-scrollbar-thumb {\n                        background: #444;\n                        border-radius: 6px;\n                    }\n                    .vocab-scroll-dark::-webkit-scrollbar-thumb:hover {\n                        background: #666;\n                    }\n                    .vocab-table-dark {\n                        background-color: #111 !important;\n                        color: #fff !important;\n                    }\n                    .vocab-table-dark th {\n                        background-color: #1f1f1f !important;\n                        color: #fff !important;\n                        border-color: #3a3a3a !important;\n                    }\n                    .vocab-table-dark td {\n                        border-color: #3a3a3a !important;\n                        background-color: #161616 !important;\n                        color: #fff !important;\n                    }\n                    .vocab-table-dark tbody tr {\n                        color: #fff !important;\n                    }\n                    .vocab-table-dark tbody tr td {\n                        color: #fff !important;\n                    }\n                    .vocab-table-dark tbody tr:nth-child(odd) {\n                        background-color: #161616 !important;\n                    }\n                    .vocab-table-dark tbody tr:nth-child(even) {\n                        background-color: #1d1d1d !important;\n                    }\n                    .vocab-table-dark tbody tr:hover {\n                        background-color: #2a2a2a !important;\n                    }\n                    .vocab-table-dark thead tr {\n                        background-color: #1f1f1f !important;\n                        border-color: #3a3a3a !important;\n                    }\n                "}),(0,d.jsxs)(Fk,{className:"py-4",children:[(0,d.jsxs)(Xk,{className:"mb-4",children:[(0,d.jsx)(Wm,{children:(0,d.jsx)("h2",{style:{color:o?"#fff":void 0},children:n?"Edit Set":"Create New Set"})}),(0,d.jsx)(Wm,{xs:"auto",children:(0,d.jsx)(yy,{variant:o?"outline-light":"outline-secondary",onClick:()=>{const t=f.current||"",e=p.current||[];(l!==t||JSON.stringify(u)!==JSON.stringify(e))&&!window.confirm("Discard unsaved changes and go back to My Sets?")||i("home")},children:"Back to My Sets"})})]}),y&&(0,d.jsx)(_v,{variant:"danger",children:y}),b&&(0,d.jsx)(_v,{variant:"success",children:b}),(0,d.jsx)(hy,{className:"mb-4",children:(0,d.jsxs)(hy.Group,{className:"mb-3",children:[(0,d.jsx)(hy.Label,{style:{color:o?"#fff":void 0},children:"Set Name"}),(0,d.jsx)(hy.Control,{type:"text",value:l,onChange:t=>c(t.target.value),placeholder:"Enter set name",style:E,className:o?"vocab-darkmode-input":""})]})}),(0,d.jsx)(sm,{className:"mb-4",style:S,children:(0,d.jsxs)(sm.Body,{children:[(0,d.jsx)(sm.Title,{style:{color:o?"#fff":void 0},children:"Add New Vocabulary Item"}),(0,d.jsx)(hy,{onSubmit:t=>{if(t.preventDefault(),!g.character||!g.pinyin||!g.definition)return;const e=[...u];if(null!==w)e[w]=g,x(null);else{if(u.length>=wg)return void v("Maximum limit of ".concat(wg," words per set reached"));e.push(g)}h(e),m({character:"",pinyin:"",definition:""}),v("")},children:(0,d.jsxs)(Xk,{children:[(0,d.jsx)(Wm,{children:(0,d.jsx)(hy.Control,{type:"text",placeholder:"\u5b57",value:g.character,onChange:t=>m(a(a({},g),{},{character:t.target.value})),style:E,className:o?"vocab-darkmode-input":""})}),(0,d.jsx)(Wm,{children:(0,d.jsx)(hy.Control,{type:"text",placeholder:"Pinyin",value:g.pinyin,onChange:t=>m(a(a({},g),{},{pinyin:t.target.value})),style:E,className:o?"vocab-darkmode-input":""})}),(0,d.jsx)(Wm,{children:(0,d.jsx)(hy.Control,{type:"text",placeholder:"Definition",value:g.definition,onChange:t=>m(a(a({},g),{},{definition:t.target.value})),style:E,className:o?"vocab-darkmode-input":""})}),(0,d.jsx)(Wm,{xs:"auto",children:(0,d.jsx)(yy,{type:"submit",variant:o?"outline-light":"primary",children:null!==w?"Update":"Add"})})]})})]})}),(0,d.jsxs)("h5",{className:"mb-2",style:{color:o?"#fff":void 0},children:["Set Length: ",u.length]}),(0,d.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto",marginBottom:"1rem"},className:o?"vocab-scroll-dark":"",children:(0,d.jsxs)(Zk,{striped:!0,bordered:!0,hover:!0,className:o?"vocab-table-dark":"",children:[(0,d.jsx)("thead",{style:{position:"sticky",top:0,zIndex:1},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:k,children:"Character"}),(0,d.jsx)("th",{style:k,children:"Pinyin"}),(0,d.jsx)("th",{style:k,children:"Definition"}),(0,d.jsx)("th",{style:k,children:"Actions"})]})}),(0,d.jsx)("tbody",{children:u.map((t,e)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:t.character}),(0,d.jsx)("td",{children:t.pinyin}),(0,d.jsx)("td",{children:t.definition}),(0,d.jsxs)("td",{children:[(0,d.jsx)(yy,{variant:o?"outline-light":"outline-secondary",size:"sm",className:"me-2",onClick:()=>{m(t),x(e)},children:"Edit"}),(0,d.jsx)(yy,{variant:"outline-danger",size:"sm",onClick:()=>(t=>{const e=[...u];e.splice(t,1),h(e)})(e),children:"Delete"})]})]},e))})]})}),(0,d.jsxs)("div",{className:"d-grid gap-2",children:[(0,d.jsx)(yy,{variant:o?"outline-light":"primary",size:"lg",onClick:async()=>{try{v(""),n?await async function(t,e){try{if(e.vocabItems&&e.vocabItems.length>wg)throw new Error("Maximum limit of ".concat(wg," words per set reached"));const n=pp(_g,"vocabSets",t);await mg(n,a(a({},e),{},{updatedAt:new Date}))}catch(y){throw console.error("Error updating vocab set:",y),y}}(n.id,{setName:l,vocabItems:u,updatedAt:new Date}):await Eg(s.uid,l,u),_("Set saved successfully!"),r&&await r(),setTimeout(()=>i("home"),500)}catch(y){console.error("Error saving set:",y),v(y.message)}},disabled:!l||0===u.length,children:"Save Set"}),n&&(0,d.jsx)(yy,{variant:o?"outline-danger":"danger",size:"lg",onClick:async()=>{if(window.confirm("Are you sure you want to delete this set? This action cannot be undone."))try{await Ig(n.id),r&&await r(),i("home")}catch(y){console.error("Error deleting set:",y),v(y.message)}},children:"Delete Set"})]})]})]})}function eT(e){const{goToPage:n}=e,{currentUser:i}=Pg(),{isDarkMode:r}=Og(),[s,o]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1),p=async()=>{try{const t=await kg(i.uid);o(t)}catch(t){console.error("Error loading sets:",t)}finally{l(!1)}};(0,t.useEffect)(()=>{i&&p()},[i]);const g=()=>{u(null),f(!1)},m=async()=>{await p()};return a?(0,d.jsx)("div",{children:"Loading..."}):c||h?(0,d.jsx)(tT,{set:c,goToPage:g,onSetUpdated:m}):(0,d.jsxs)(Fk,{className:"py-4",style:{overflowY:"auto",maxHeight:"100vh"},children:[(0,d.jsxs)(Xk,{className:"mb-4",style:{alignItems:"center"},children:[(0,d.jsx)(Wm,{children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,d.jsx)("img",{src:"/mandarin-trainer/roundedfinallogo.png",alt:"Mandarin Trainer Logo",style:{height:32,width:32}}),(0,d.jsx)("h2",{children:"Mandarin Trainer"})]})}),(0,d.jsx)(Wm,{xs:"auto",children:(0,d.jsxs)(E,{direction:"horizontal",gap:4,children:[(0,d.jsx)(yy,{variant:r?"outline-light":"secondary",onClick:()=>f(!0),children:"Create New Set"}),(0,d.jsx)(yy,{style:{backgroundColor:"transparent",border:"none",padding:0,color:r?"#ffffff":"#000000"},variant:"light",onClick:()=>n("settings"),children:(0,d.jsx)(Kk,{size:20})})]})})]}),(0,d.jsx)(Xk,{xs:1,md:2,lg:3,className:"g-4",children:s.map(t=>{var e;return(0,d.jsx)(Wm,{children:(0,d.jsx)(sm,{style:{backgroundColor:r?"#2d2d2d":"#ffffff",borderColor:r?"#404040":"#dee2e6"},children:(0,d.jsxs)(sm.Body,{children:[(0,d.jsx)(sm.Title,{style:{color:r?"#ffffff":"#000000"},children:t.setName}),(0,d.jsxs)(sm.Text,{style:{color:r?"#cccccc":"#6c757d"},children:[(null===(e=t.vocabItems)||void 0===e?void 0:e.length)||0," items"]}),(0,d.jsxs)(E,{direction:"horizontal",gap:2,children:[(0,d.jsx)(yy,{variant:r?"outline-light":"outline-primary",onClick:()=>u(t),children:"Edit"}),(0,d.jsx)(yy,{variant:r?"outline-success":"success",onClick:()=>(async t=>{try{let e=t.slug;e||(e=await Tg(t.id),await p());const n="/mandarin-trainer";window.location.assign("".concat(n,"/set/").concat(e))}catch(e){console.error("Error starting learning:",e)}})(t),children:"Learn"}),(0,d.jsx)(yy,{variant:r?"outline-info":"info",onClick:()=>(async t=>{try{let e=t.slug;e||(e=await Tg(t.id),await p());const n="/mandarin-trainer",i="".concat(window.location.origin).concat(n,"/set/").concat(e);await navigator.clipboard.writeText(i),alert("Share link copied to clipboard")}catch(e){console.error("Error copying link:",e),alert("Unable to copy link right now.")}})(t),children:"Share"})]})]})})},t.id)})})]})}const nT=["bsPrefix","size","vertical","className","role","as"],iT=t.forwardRef((t,e)=>{let{bsPrefix:n,size:i,vertical:r=!1,className:s,role:o="group",as:l="div"}=t,u=c(t,nT);const f=v(n,"btn-group");let p=f;return r&&(p="".concat(f,"-vertical")),(0,d.jsx)(l,a(a({},u),{},{ref:e,role:o,className:h()(s,p,i&&"".concat(f,"-").concat(i))}))});iT.displayName="ButtonGroup";const rT=iT,sT=["bsPrefix","name","className","checked","type","onChange","value","disabled","id","inputRef"],oT=()=>{},aT=t.forwardRef((t,e)=>{let{bsPrefix:n,name:i,className:r,checked:s,type:o,onChange:l,value:u,disabled:f,id:p,inputRef:g}=t,m=c(t,sT);return n=v(n,"btn-check"),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{className:n,name:i,type:o,value:u,ref:g,autoComplete:"off",checked:!!s,disabled:!!f,onChange:l||oT,id:p}),(0,d.jsx)(yy,a(a({},m),{},{ref:e,className:h()(r,f&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:p}))]})});aT.displayName="ToggleButton";const lT=aT;function cT(e){var n;let{set:i,goToPage:r,given:s,setGiven:o,want:l,setWant:c,setSetChoice:u,setCurrentSetName:h,setResponseCounts:f,setLearnedOverTime:p,isMultipleChoice:g,setIsMultipleChoice:m,showSettingsShortcut:y=!1,backLabel:v="Back",onBack:b}=e;const{isDarkMode:_}=Og(),[w,x]=(0,t.useState)(!1),S=[{name:"Pinyin",value:"pinyin"},{name:"Character",value:"character"},{name:"Definition",value:"definition"}];(0,t.useEffect)(()=>{s||o("definition"),l||c("character")},[]);const k=(null===i||void 0===i||null===(n=i.vocabItems)||void 0===n?void 0:n.length)>=5,T=_?{backgroundColor:"#23272b",color:"#fff",borderColor:"#444"}:{},C=_?{color:"#fff"}:{},I=_?{color:"#fff"}:{};if(!i)return null;const A=()=>{var t;return(0,d.jsxs)("div",{style:{position:"relative",paddingRight:"2rem"},children:[y&&(0,d.jsx)(yy,{variant:"link",size:"sm",onClick:t=>{if(t.preventDefault(),t.stopPropagation(),r)r("settings");else{const t="/mandarin-trainer";window.location.href="".concat(t,"/settings")}},style:{position:"absolute",top:"-4px",right:0,display:"flex",alignItems:"center",gap:"6px",color:_?"#fff":"#000",textDecoration:"none",padding:0},children:(0,d.jsx)(Kk,{size:20,color:_?"#fff":"#000"})}),(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsx)("h5",{style:a(a({marginBottom:"0.25rem"},C),{},{wordBreak:"break-word"}),children:i.setName}),(0,d.jsxs)("div",{style:{marginBottom:"0.35rem",fontWeight:600,color:_?"#d0d0d0":"#444"},children:[(null===i||void 0===i||null===(t=i.vocabItems)||void 0===t?void 0:t.length)||0," terms"]}),(0,d.jsx)("h6",{style:a({marginBottom:"0.5rem"},C),children:"Select Learning Mode"})]})]})};return(0,d.jsx)(sm,{body:!0,className:"mx-auto my-4",style:a({width:"100%",maxWidth:"420px",border:_?"1px solid #444":"1px solid #dee2e6",padding:"1.5rem"},T),children:(0,d.jsx)(E,{gap:3,children:w?(()=>{var t;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsx)("h5",{style:a(a({marginBottom:"0.25rem"},C),{},{wordBreak:"break-word"}),children:i.setName}),(0,d.jsx)("h6",{style:a({marginBottom:"0.75rem"},C),children:"Vocabulary Preview"})]}),(0,d.jsx)("div",{style:{width:"100%",border:_?"1px solid #444":"1px solid #dee2e6",borderRadius:"10px",padding:"1rem",backgroundColor:_?"#181a1b":"#f8f9fa",color:_?"#fff":"#000",maxHeight:"480px",overflowY:"auto"},children:null!==i&&void 0!==i&&null!==(t=i.vocabItems)&&void 0!==t&&t.length?(0,d.jsxs)("table",{style:{width:"100%",fontSize:"0.95rem"},children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{textAlign:"left"},children:"Character"}),(0,d.jsx)("th",{style:{textAlign:"left"},children:"Pinyin"}),(0,d.jsx)("th",{style:{textAlign:"left"},children:"Definition"})]})}),(0,d.jsx)("tbody",{children:i.vocabItems.map((t,e)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{style:{verticalAlign:"top"},children:t.character}),(0,d.jsx)("td",{style:{verticalAlign:"top"},children:t.pinyin}),(0,d.jsx)("td",{style:{verticalAlign:"top"},children:t.definition})]},e))})]}):(0,d.jsx)("div",{children:"No vocab items."})}),(0,d.jsx)(yy,{variant:_?"outline-light":"secondary",onClick:()=>x(!1),style:{marginTop:"1.4rem"},children:"Back"})]})})():(()=>{var t;return(0,d.jsxs)(d.Fragment,{children:[A(),!k&&(0,d.jsxs)(_v,{variant:"warning",children:["This set needs at least ",5," words to start learning. Current word count: ",(null===i||void 0===i||null===(t=i.vocabItems)||void 0===t?void 0:t.length)||0]}),(0,d.jsxs)(E,{direction:"horizontal",gap:3,style:{justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,d.jsxs)(E,{style:{flex:1,minWidth:"140px"},children:[(0,d.jsx)("h6",{style:a(a({textAlign:"center"},I),{},{textDecoration:"underline",marginBottom:"0.5rem"}),children:"Given"}),(0,d.jsx)(rT,{vertical:!0,children:S.map((t,e)=>(0,d.jsx)(lT,{id:"given-".concat(e),type:"radio",name:"given",value:t.value,variant:s===t.value?_?"light":"primary":_?"outline-light":"outline-primary",checked:s===t.value,onChange:t=>o(t.currentTarget.value),style:{borderRadius:"10px",border:"none",marginBottom:"6px"},children:t.name},e))})]}),(0,d.jsxs)(E,{style:{flex:1,minWidth:"140px"},children:[(0,d.jsx)("h6",{style:a(a({textAlign:"center"},I),{},{textDecoration:"underline",marginBottom:"0.5rem"}),children:"Test For"}),(0,d.jsx)(rT,{vertical:!0,children:S.map((t,e)=>(0,d.jsx)(lT,{id:"want-".concat(e),type:"radio",name:"want",value:t.value,variant:l===t.value?"success":"outline-success",checked:l===t.value,onChange:t=>c(t.currentTarget.value),style:{borderRadius:"10px",border:"none",marginBottom:"6px"},children:t.name},e))})]})]}),(0,d.jsx)(E,{style:{alignItems:"center"},children:(0,d.jsx)(hy.Check,{type:"switch",id:"multiple-choice-switch",label:"Multiple Choice",checked:g,onChange:t=>m(t.target.checked),style:{color:_?"#ffffff":"#000000",fontSize:"1.1rem",marginBottom:"1rem"}})}),(0,d.jsxs)(E,{gap:4.8,children:[(0,d.jsx)(yy,{variant:_?"light":"primary",onClick:()=>{u("custom_".concat(i.id)),h(i.setName),f([]),p([]),r("testingZone")},disabled:!s||!l||!k,style:{borderRadius:"12px 12px 0 0",fontWeight:600,fontSize:"1.05rem"},children:"Start"}),(0,d.jsx)(yy,{variant:"success",onClick:()=>x(!0),style:{width:"100%",fontWeight:600,fontSize:"1.05rem",borderRadius:0},"aria-label":"View vocabulary items in this set",children:"View Vocab"}),(0,d.jsx)(yy,{variant:_?"outline-light":"secondary",onClick:()=>{if(b)return b();if(r)r("home");else{const t="/mandarin-trainer";window.location.assign("".concat(t,"/"))}},style:{borderRadius:"0 0 12px 12px",fontWeight:600,fontSize:"1.05rem"},children:"My Sets"})]})]})})()})})}function uT(){const{currentUser:e}=Pg(),[n,i]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[o,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(0),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)([2]),[y,v]=(0,t.useState)(!1),[b,_]=(0,t.useState)([2]),[w,x]=(0,t.useState)(!0),[S,k]=(0,t.useState)(!1),[T,C]=(0,t.useState)(!1),[I,A]=(0,t.useState)(!1),[P,N]=(0,t.useState)(!1),[D,O]=(0,t.useState)(null),[R,M]=(0,t.useState)(null),[L,F]=(0,t.useState)("home"),[j,V]=(0,t.useState)("home"),[z,U]=(0,t.useState)({page:"home",payload:null}),[B,H]=(0,t.useState)(!1),[W,q]=(0,t.useState)(null),[K,G]=(0,t.useState)(!1),[Q,Y]=(0,t.useState)([]),[X,$]=(0,t.useState)([]),J=window.location.pathname.split("/").filter(Boolean),Z=(()=>{const t=J.findIndex(t=>"set"===t);return-1!==t&&J[t+1]?J[t+1]:null})(),tt=J.includes("settings");(0,t.useEffect)(()=>{let t=!0;return(async()=>{if(!Z)return;H(!0),q(null),G(!1);const e=setTimeout(()=>{t&&G(!0)},2e3);try{const e=await Cg(Z);if(!t)return;e&&!0===e.isPublic?(O(e),M(e),c(e.setName||""),Y([]),$([]),x(!1),k(!1),C(!1),A(!1),N(!0),F("startLearning"),n||i("definition"),r||s("character")):q("Set not found or not public.")}catch(o){t&&q("Error loading shared set.")}finally{t&&H(!1),clearTimeout(e)}})(),()=>{t=!1}},[Z,n,r]);const et=!e&&!tt&&!Z;if(Z){if(B&&w)return null;if(B&&K)return(0,d.jsx)("div",{style:{textAlign:"center",marginTop:"2rem"},children:"Loading set..."});if(W)return(0,d.jsx)("div",{style:{textAlign:"center",marginTop:"2rem"},children:W})}else if(et)return(0,d.jsx)(Gk,{});function nt(t,n){const i=L||"home";V(i),F(t),x(!1),k(!1),C(!1),A(!1),N(!1);const r="/mandarin-trainer";if(e||!Z||"home"!==t&&"menu"!==t){if("home"===t||"menu"===t){const t="".concat(r,"/");if(window.location.pathname.includes("/set/"))return void window.location.assign(t);x(!0),console.log("isMultipleChoice",f)}else if("testingZone"===t)k(!0);else if("finishPage"===t)C(!0);else if("settings"===t)U({page:(null===n||void 0===n?void 0:n.returnTo)||i||"home",payload:(null===n||void 0===n?void 0:n.returnPayload)||("startLearning"===i?D:null)}),A(!0);else if("startLearning"===t){const t=(null===n||void 0===n?void 0:n.set)||n||D||R;t?(O(t),M(t),N(!0)):x(!0)}}else window.location.assign("".concat(r,"/"))}return(0,d.jsx)("div",{style:{width:"100vw",height:"100vh"},children:(0,d.jsxs)(E,{style:{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},children:[tt&&I&&(0,d.jsx)(Rk,{onBack:()=>{nt(z.page,z.payload)},isTraditional:y,setIsTraditional:v,traditionalValue:b,setTraditionalValue:_}),w&&(0,d.jsx)(eT,{goToPage:nt}),S&&(0,d.jsx)(vy,{given:n,setGiven:i,want:r,setWant:s,setChoice:o,setSetChoice:a,goToPage:nt,isMultipleChoice:f,responseCounts:Q,setResponseCounts:Y,learnedOverTime:X,setLearnedOverTime:$,currentSetName:l,externalSet:R||D,onTermCountChange:h}),T&&(0,d.jsx)(Ok,{setChoice:o,goToPage:nt,responseCounts:Q,setResponseCounts:Y,learnedOverTime:X,currentSetName:l,given:n,want:r,termCount:u}),I&&!tt&&(0,d.jsx)(Rk,{onBack:()=>{nt(z.page,z.payload)},isTraditional:y,setIsTraditional:v,traditionalValue:b,setTraditionalValue:_}),P&&(0,d.jsx)(cT,{set:D,goToPage:nt,given:n,want:r,setGiven:i,setWant:s,setSetChoice:a,setCurrentSetName:c,setResponseCounts:Y,setLearnedOverTime:$,isMultipleChoice:f,setIsMultipleChoice:p,showSettingsShortcut:!0,backLabel:"Back",onBack:void 0,onStart:()=>{Y([]),$([]),M(D),c((null===D||void 0===D?void 0:D.setName)||""),nt("testingZone")}})]})})}function hT(){return(0,d.jsx)(Ng,{children:(0,d.jsx)(Rg,{children:(0,d.jsx)(uT,{})})})}const dT=t=>{t&&t instanceof Function&&n.e(453).then(n.bind(n,453)).then(e=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:o}=e;n(t),i(t),r(t),s(t),o(t)})};e.createRoot(document.getElementById("root")).render((0,d.jsx)(t.StrictMode,{children:(0,d.jsx)(hT,{})})),dT()})()})();
//# sourceMappingURL=main.e7cc6ded.js.map